/*  Copyright 2009-2012 elicit, inc.
*   IMPORTANT NOTE: This file is licensed only for use in providing the elicit service,
*   or any part thereof, and is subject to the elicit Terms and Conditions. You may not
*   port this file to another platform without elicit's written consent. */
(function($elc,window,document,undefined){$elc.lib.loadJQueryPlugins=function($,window,document){
/*
		* jQuery Cookie Plugin
		* https://github.com/carhartl/jquery-cookie
		*
		* Copyright 2011, Klaus Hartl
		* Dual licensed under the MIT or GPL Version 2 licenses.
		* http://www.opensource.org/licenses/mit-license.php
		* http://www.opensource.org/licenses/GPL-2.0
		*/
$.cookie=function(key,value,options){if(arguments.length>1&&(!/Object/.test(Object.prototype.toString.call(value))||value===null||value===undefined)){options=$.extend({},options);if(value===null||value===undefined){options.expires=-1}if(typeof options.expires==="number"){var days=options.expires,t=options.expires=new Date();t.setDate(t.getDate()+days)}value=String(value);return(document.cookie=[encodeURIComponent(key),"=",options.raw?value:encodeURIComponent(value),options.expires?"; expires="+options.expires.toUTCString():"",options.path?"; path="+options.path:"",options.domain?"; domain="+options.domain:"",options.secure?"; secure":""].join(""))}options=value||{};var decode=options.raw?function(s){return s}:decodeURIComponent;var pairs=document.cookie.split("; ");for(var i=0,pair;pair=pairs[i]&&pairs[i].split("=");i++){if(decode(pair[0])===key){return decode(pair[1]||"")}}return null};
/*
		@title:
		Center

		@version:
		2.0

		@author:
		Andreas Lagerkvist

		@date:
		2008-09-17

		@url:
		http://andreaslagerkvist.com/jquery/center/

		@license:
		http://creativecommons.org/licenses/by/3.0/

		@copyright:
		2008 Andreas Lagerkvist (andreaslagerkvist.com)

		@requires:
		jquery

		@does:
		This little pluggy centers an element on the screen using either fixed or absolute positioning. Can be used to display messages, pop up images etc.

		@howto:
		jQuery('#my-element').center(true); would center the element with ID 'my-element' using absolute position (leave empty for fixed).

		@exampleHTML:
		<p>I should be fixed centered</p>

		<p>The paragraph above and the paragraph beneath this one are centered. They should be in the middle of the viewport.</p>

		<p>I should be absolutely centered</p>

		@exampleJS:
		jQuery('#jquery-center-example p:first-child').center();
		jQuery('#jquery-center-example p:last-child').center(true);
		*/
$.fn.center=function(absolute){return this.each(function(){var t=jQuery(this);t.css({position:absolute?"absolute":"fixed",left:"50%",top:"50%",zIndex:"99"}).css({marginLeft:"-"+(t.outerWidth()/2)+"px",marginTop:"-"+(t.outerHeight()/2)+"px"});if(absolute){t.css({marginTop:parseInt(t.css("marginTop"),10)+jQuery(window).scrollTop(),marginLeft:parseInt(t.css("marginLeft"),10)+jQuery(window).scrollLeft()})}})};$.fn.extend({disableSelection:function(){this.each(function(){if(typeof this.onselectstart!="undefined"){this.onselectstart=function(){return false}}else{if(typeof this.style.MozUserSelect!="undefined"){this.style.MozUserSelect="none"}else{this.onmousedown=function(){return false}}}})}});
/*
		* Force Redraw
		*
		* Created by Pascal Beyeler (anvio.ch)
		* Dual licensed under the MIT and GPL licenses:
		* http://www.opensource.org/licenses/mit-license.php
		* http://www.gnu.org/licenses/gpl.html
		*
		*/
(function($){$.fn.forceRedraw=function(brutal){$(this).addClass("forceRedraw").removeClass("forceRedraw");if(brutal){var paddingLeft=$(this).css("padding-left");var parsedPaddingLeft=parseInt(paddingLeft,10);$(this).css("padding-left",++parsedPaddingLeft);window.setTimeout($.proxy(function(){$(this).css("padding-left",paddingLeft)},this),1)}};$.fn.textWidth=function(){var html_org=$(this).html();var html_calc="<span>"+html_org+"</span>";$(this).html(html_calc);var width=$(this).find("span:first").width();$(this).html(html_org);return width};$.fn.textHeight=function(){var html_org=$(this).html();var html_calc="<span>"+html_org+"</span>";$(this).html(html_calc);var height=$(this).find("span:first").height();$(this).html(html_org);return height}})($);
/*
		* jQuery resize event - v1.1 - 3/14/2010
		* http://benalman.com/projects/jquery-resize-plugin/
		* 
		* Copyright (c) 2010 "Cowboy" Ben Alman
		* Dual licensed under the MIT and GPL licenses.
		* http://benalman.com/about/license/
		*/
(function($,window,undefined){var elems=$([]),jq_resize=$.resize=$.extend($.resize,{}),timeout_id,str_setTimeout="setTimeout",str_resize="resize",str_data=str_resize+"-special-event",str_delay="delay",str_throttle="throttleWindow";jq_resize[str_delay]=250;jq_resize[str_throttle]=true;$.event.special[str_resize]={setup:function(){if(!jq_resize[str_throttle]&&this[str_setTimeout]){return false}var elem=$(this);elems=elems.add(elem);$.data(this,str_data,{w:elem.width(),h:elem.height()});if(elems.length===1){loopy()}},teardown:function(){if(!jq_resize[str_throttle]&&this[str_setTimeout]){return false}var elem=$(this);elems=elems.not(elem);elem.removeData(str_data);if(!elems.length){clearTimeout(timeout_id)}},add:function(handleObj){if(!jq_resize[str_throttle]&&this[str_setTimeout]){return false}var old_handler;function new_handler(e,w,h){var elem=$(this),data=$.data(this,str_data);data.w=w!==undefined?w:elem.width();data.h=h!==undefined?h:elem.height();old_handler.apply(this,arguments)}if($.isFunction(handleObj)){old_handler=handleObj;return new_handler}else{old_handler=handleObj.handler;handleObj.handler=new_handler}}};function loopy(){timeout_id=window[str_setTimeout](function(){elems.each(function(){var elem=$(this),width=elem.width(),height=elem.height(),data=$.data(this,str_data);if(width!==data.w||height!==data.h){elem.trigger(str_resize,[data.w=width,data.h=height])}});loopy()},jq_resize[str_delay])}})($,window);$.fn.getBgWidthHeight=function(){var height=0,width=0,bgImg=$(this).css("background-image");if(bgImg!=undefined&&bgImg!="none"){var path=bgImg.replace("url","").replace("(","").replace(")","").replace('"',"").replace('"',"");var tempImg='<img id="tempImg" src="'+path+'"/>';$("body").append(tempImg);$("#tempImg").hide();height=$("#tempImg").height();width=$("#tempImg").width();$("#tempImg").remove()}return{height:height,width:width}};
/*
		* jQote2 - client-side Javascript templating engine
		* Copyright (C) 2010, aefxx
		* http://aefxx.com/
		*
		* Dual licensed under the WTFPL v2 or MIT (X11) licenses
		* WTFPL v2 Copyright (C) 2004, Sam Hocevar
		*
		* Date: Thu, Oct 21st, 2010
		* Version: 0.9.7
		*/
(function($){var _=false,E1="UndefinedTemplateError",E2="TemplateCompilationError",E3="TemplateExecutionError",A="[object Array]",S="[object String]",F="[object Function]",n=1,c="%",q=/^[^<]*(<[\w\W]+>)[^>]*$/,ts=Object.prototype.toString;function r(e,x){throw ($.extend(e,x),e)}function dns(f){var a=[];if(ts.call(f)!==A){return _}for(var i=0,l=f.length;i<l;i++){a[i]=f[i].jqote_id}return a.length?a.sort().join(".").replace(/(\b\d+\b)\.(?:\1(\.|$))+/g,"$1$2"):_}function l(s,t){var f,g=[],t=t||c,x=ts.call(s);if(x===F){return s.jqote_id?[s]:_}if(x!==A){return[$.jqotec(s,t)]}if(x===A){for(var i=0,l=s.length;i<l;i++){return g.length?g:_}}}$.fn.extend({jqote:function(x,y){var x=ts.call(x)===A?x:[x],d="";this.each(function(i){var f=$.jqotec(this,y);for(var j=0;j<x.length;j++){d+=f.call(x[j],i,j,x,f)}});return d}});$.each({app:"append",pre:"prepend",sub:"html"},function(x,y){$.fn["jqote"+x]=function(e,d,t){var p,r,s=$.jqote(e,d,t),$$=!q.test(s)?function(s){return $(document.createTextNode(s))}:$;if(!!(p=dns(l(e)))){r=new RegExp("(^|\\.)"+p.split(".").join("\\.(.*)?")+"(\\.|$)")}return this.each(function(){var z=$$(s);$(this)[y](z);(z[0].nodeType===3?$(this):z).trigger("jqote."+x,[z,r])})}});$.extend({jqote:function(e,d,t){var s="",t=t||c,f=l(e);if(f===_){r(new Error("Empty or undefined template passed to $.jqote"),{type:E1})}d=ts.call(d)!==A?[d]:d;for(var i=0,m=f.length;i<m;i++){for(var j=0;j<d.length;j++){s+=f[i].call(d[j],i,j,d,f[i])}}return s},jqotec:function(x,t){var h,e,y,t=t||c,z=ts.call(x);if(z===S&&q.test(x)){e=y=x;if(h=$.jqotecache[x]){return h}}else{e=z===S||x.nodeType?$(x):x instanceof jQuery?x:null;if(!e[0]||!(y=e[0].innerHTML)&&!(y=e.text())){r(new Error("Empty or undefined template passed to $.jqotec"),{type:E1})}if(h=$.jqotecache[$.data(e[0],"jqote_id")]){return h}}var s="",i,a=y.replace(/\s*<!\[CDATA\[\s*|\s*\]\]>\s*|[\r\n\t]/g,"").split("<"+t).join(t+">\x1b").split(t+">");for(var m=0,k=a.length;m<k;m++){s+=a[m].charAt(0)!=="\x1b"?"out+='"+a[m].replace(/(\\|["'])/g,"\\$1")+"'":(a[m].charAt(1)==="="?";out+=("+a[m].substr(2)+");":(a[m].charAt(1)==="!"?";out+=$.jqotenc(("+a[m].substr(2)+"));":";"+a[m].substr(1)))}s="try{"+('var out="";'+s+";return out;").split("out+='';").join("").split('var out="";out+=').join("var out=")+'}catch(e){e.type="'+E3+'";e.args=arguments;e.template=arguments.callee.toString();throw e;}';try{var f=new Function("i, j, data, fn",s)}catch(e){r(e,{type:E2})}i=e instanceof jQuery?$.data(e[0],"jqote_id",n):e;return $.jqotecache[i]=(f.jqote_id=n++,f)},jqotefn:function(e){var t=ts.call(e),i=t===S&&q.test(e)?e:$.data($(e)[0],"jqote_id");return $.jqotecache[i]||_},jqotetag:function(s){if(ts.call(s)===S){c=s}},jqotenc:function(s){return s.toString().replace(/&(?!\w+;)/g,"&#38;").split("<").join("&#60;").split(">").join("&#62;").split('"').join("&#34;").split("'").join("&#39;")},jqotecache:{}});$.event.special.jqote={add:function(o){var n,h=o.handler,d=!o.data?[]:ts.call(o.data)!==A?[o.data]:o.data;if(!o.namespace){o.namespace="app.pre.sub"}if(!d.length||!(n=dns(l(d)))){return}o.handler=function(e,m,r){return !r||r.test(n)?h.apply(this,[e,m]):null}}}})($);
/* Copyright (c) 2010 Brandon Aaron (http://brandonaaron.net)
		* Licensed under the MIT License (LICENSE.txt).
		*
		* Version 2.1.2
		*/
(function(a){a.fn.bgiframe=(/msie 6\.0/i.test(navigator.userAgent)?function(d){d=a.extend({top:"auto",left:"auto",width:"auto",height:"auto",opacity:true,src:"javascript:false;"},d);var c='<iframe class="bgiframe"frameborder="0"tabindex="-1"src="'+d.src+'"style="display:block;position:absolute;z-index:-1;'+(d.opacity!==false?"filter:Alpha(Opacity='0');":"")+"top:"+(d.top=="auto"?"expression(((parseInt(this.parentNode.currentStyle.borderTopWidth)||0)*-1)+'px')":b(d.top))+";left:"+(d.left=="auto"?"expression(((parseInt(this.parentNode.currentStyle.borderLeftWidth)||0)*-1)+'px')":b(d.left))+";width:"+(d.width=="auto"?"expression(this.parentNode.offsetWidth+'px')":b(d.width))+";height:"+(d.height=="auto"?"expression(this.parentNode.offsetHeight+'px')":b(d.height))+';"/>';return this.each(function(){if(a(this).children("iframe.bgiframe").length===0){this.insertBefore(document.createElement(c),this.firstChild)}})}:function(){return this});a.fn.bgIframe=a.fn.bgiframe;function b(c){return c&&c.constructor===Number?c+"px":c}})($);$.fn.preloadImages=function(callback){checklist=this.toArray();this.each(function(){$("<img>").attr({src:this}).load(function(){checklist.remove($(this).attr("src"));if(checklist.length==0){callback()}})})};$.fn.offsetRelativeTo=function(el){var $el=$(el),o1=this.offset(),o2=$el.offset();o1.top-=o2.top-$el.scrollTop();o1.left-=o2.left-$el.scrollLeft();return o1};(function($){var escapeable=/["\\\x00-\x1f\x7f-\x9f]/g,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};$.toJSON=typeof JSON==="object"&&JSON.stringify?JSON.stringify:function(o){if(o===null){return"null"}var type=typeof o;if(type==="undefined"){return undefined}if(type==="number"||type==="boolean"){return""+o}if(type==="string"){return $.quoteString(o)}if(type==="object"){if(typeof o.toJSON==="function"){return $.toJSON(o.toJSON())}if(o.constructor===Date){var month=o.getUTCMonth()+1,day=o.getUTCDate(),year=o.getUTCFullYear(),hours=o.getUTCHours(),minutes=o.getUTCMinutes(),seconds=o.getUTCSeconds(),milli=o.getUTCMilliseconds();if(month<10){month="0"+month}if(day<10){day="0"+day}if(hours<10){hours="0"+hours}if(minutes<10){minutes="0"+minutes}if(seconds<10){seconds="0"+seconds}if(milli<100){milli="0"+milli}if(milli<10){milli="0"+milli}return'"'+year+"-"+month+"-"+day+"T"+hours+":"+minutes+":"+seconds+"."+milli+'Z"'}if(o.constructor===Array){var ret=[];for(var i=0;i<o.length;i++){ret.push($.toJSON(o[i])||"null")}return"["+ret.join(",")+"]"}var name,val,pairs=[];for(var k in o){type=typeof k;if(type==="number"){name='"'+k+'"'}else{if(type==="string"){name=$.quoteString(k)}else{continue}}type=typeof o[k];if(type==="function"||type==="undefined"){continue}val=$.toJSON(o[k]);pairs.push(name+":"+val)}return"{"+pairs.join(",")+"}"}};$.evalJSON=typeof JSON==="object"&&JSON.parse?JSON.parse:function(src){return eval("("+src+")")};$.secureEvalJSON=typeof JSON==="object"&&JSON.parse?JSON.parse:function(src){var filtered=src.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"");if(/^[\],:{}\s]*$/.test(filtered)){return eval("("+src+")")}else{throw new SyntaxError("Error parsing JSON, source is not valid.")}};$.quoteString=function(string){if(string.match(escapeable)){return'"'+string.replace(escapeable,function(a){var c=meta[a];if(typeof c==="string"){return c}c=a.charCodeAt();return"\\u00"+Math.floor(c/16).toString(16)+(c%16).toString(16)})+'"'}return'"'+string+'"'}})($);(function($){var _this;if(!("__jquery_xdomain__" in $)&&navigator.appName==="Microsoft Internet Explorer"&&"XDomainRequest" in window&&!("XMLHttpRequest" in window&&"withCredentials" in new XMLHttpRequest())&&document.location.href.indexOf("file:///")==-1){$.__jquery_xdomain__=$.support.cors=true;var urlMatcher=/^(((([^:\/#\?]+:)?(?:\/\/((?:(([^:@\/#\?]+)(?:\:([^:@\/#\?]+))?)@)?(([^:\/#\?]+)(?:\:([0-9]+))?))?)?)?((\/?(?:[^\/\?#]+\/+)*)([^\?#]*)))?(\?[^#]+)?)(#.*)?/,oldxhr=$.ajaxSettings.xhr,sessionCookie="XDR_SESSION_COOKIE_NAME" in window?window.XDR_SESSION_COOKIE_NAME:"jsessionid",cookies="XDR_COOKIE_HEADERS" in window?window.XDR_COOKIE_HEADERS:[],headers="XDR_HEADERS" in window?window.XDR_HEADERS:["Content-Type"],ReadyState={UNSENT:0,OPENED:1,LOADING:3,DONE:4},debug=window.XDR_DEBUG&&"console" in window,XDomainRequestAdapter,domain,reqId=0;function forEachCookie(names,fn){if(typeof names=="string"){names=[names]}var i,cookie;for(i=0;i<names.length;i++){cookie=new RegExp("(?:^|; )"+names[i]+"=([^;]*)","i").exec(document.cookie);cookie=cookie&&cookie[1];if(cookie){fn.call(null,names[i],cookie)}}}function parseResponse(str){if(str.length>=5){var sub=str.substring(str.length<=20?0:str.length-20),i=sub.length-1,end,hl,st;if(sub.charAt(i)==="~"){for(end=i--;i>=0&&sub.charAt(i)!=="~";i--){}hl=parseInt(sub.substring(i+1,end));if(!isNaN(hl)&&hl>=0&&i>=2&&sub.charAt(i)==="~"){for(end=i--;i>=0&&sub.charAt(i)!=="~";i--){}st=parseInt(sub.substring(i+1,end));if(!isNaN(st)&&i>=0&&sub.charAt(i)==="~"){end=str.length-hl-sub.length+i;return[st,str.substring(0,end),str.substr(end,hl)]}}}}return[200,str,""]}function parseUrl(url){if(typeof(url)==="object"){return url}var matches=urlMatcher.exec(url);return matches?{href:matches[0]||"",hrefNoHash:matches[1]||"",hrefNoSearch:matches[2]||"",domain:matches[3]||"",protocol:matches[4]||"",authority:matches[5]||"",username:matches[7]||"",password:matches[8]||"",host:matches[9]||"",hostname:matches[10]||"",port:matches[11]||"",pathname:matches[12]||"",directory:matches[13]||"",filename:matches[14]||"",search:matches[15]||"",hash:matches[16]||""}:{}}function parseCookies(header){if(header.length==0){return[]}var cooks=[],i=0,start=0,end,dom;do{end=header.indexOf(",",start);cooks[i]=(cooks[i]||"")+header.substring(start,end==-1?header.length:end);start=end+1;if(cooks[i].indexOf("Expires=")==-1||cooks[i].indexOf(",")!=-1){i++}else{cooks[i]+=","}}while(end>0);for(i=0;i<cooks.length;i++){dom=cooks[i].indexOf("Domain=");if(dom!=-1){cooks[i]=cooks[i].substring(0,dom)+cooks[i].substring(cooks[i].indexOf(";",dom)+1)}}return cooks}domain=parseUrl(document.location.href).domain;XDomainRequestAdapter=function(){var self=this,_xdr=new XDomainRequest(),_mime,_reqHeaders=[],_method,_url,_id=reqId++,_setState=function(state){self.readyState=state;if(typeof self.onreadystatechange==="function"){self.onreadystatechange.call(self)}},_done=function(state,code){if(!self.responseText){self.responseText=""}if(debug){console.log("[XDR-"+_id+"] request end with state "+state+" and code "+code+" and data length "+self.responseText.length)}self.status=code;if(!self.responseType){_mime=_mime||_xdr.contentType;if(_mime.match(/\/json/)){self.responseType="json";self.response=self.responseText}else{if(_mime.match(/\/xml/)){self.responseType="document";var $error,dom=new ActiveXObject("Microsoft.XMLDOM");dom.async=false;dom.loadXML(self.responseText);self.responseXML=self.response=dom;if($(dom).children("error").length!=0){$error=$(dom).find("error");self.status=parseInt($error.attr("response_code"))}}else{self.responseType="text";self.response=self.responseText}}}_setState(state);_xdr=null;_reqHeaders=null;_url=null};_xdr.onprogress=function(){_setState(ReadyState.LOADING)};_xdr.ontimeout=function(){_done(ReadyState.DONE,408)};_xdr.onerror=function(){_done(ReadyState.DONE,500)};_xdr.onload=function(){var cooks,i,resp=parseResponse(_xdr.responseText||"");if(debug){console.log("[XDR-"+reqId+"] parsing cookies for header "+resp[2])}cooks=parseCookies(resp[2]);self.responseText=resp[1]||"";if(debug){console.log("[XDR-"+_id+"] raw data:\n"+_xdr.responseText+"\n parsed response: status="+resp[0]+", header="+resp[2]+", data=\n"+resp[1])}for(i=0;i<cooks.length;i++){if(debug){console.log("[XDR-"+_id+"] installing cookie "+cooks[i])}document.cookie=cooks[i]+";Domain="+document.domain}_done(ReadyState.DONE,resp[0]);if(typeof(_this.success)==="function"){_this.success(resp[1])}resp=null};this.readyState=ReadyState.UNSENT;this.status=0;this.statusText="";this.responseType="";this.timeout=0;this.withCredentials=false;this.overrideMimeType=function(mime){_mime=mime};this.abort=function(){_xdr.abort()};this.setRequestHeader=function(k,v){if($.inArray(k,headers)>=0){_reqHeaders.push({k:k,v:v})}};this.open=function(m,u){_url=u;_method=m;_setState(ReadyState.OPENED)};this.send=function(data){_xdr.timeout=this.timeout;if(sessionCookie||cookies||_reqHeaders.length){var h,addParam=function(name,value){var q=_url.indexOf("?");_url+=(q==-1?"?":"&")+name+"="+encodeURIComponent(value);if(debug){console.log("[XDR-"+_id+"] added parameter "+name+"="+value+" => "+_url)}};for(h=0;h<_reqHeaders.length;h++){addParam(_reqHeaders[h].k,_reqHeaders[h].v)}forEachCookie(sessionCookie,function(name,value){var q=_url.indexOf("?");if(q==-1){_url+=";"+name+"="+value}else{_url=_url.substring(0,q)+";"+name+"="+value+_url.substring(q)}if(debug){console.log("[XDR-"+_id+"] added cookie "+_url)}});forEachCookie(cookies,addParam);addParam("_xdr",""+_id)}if(debug){console.log("[XDR-"+_id+"] opening "+_url)}_xdr.open(_method,_url);if(debug){console.log("[XDR-"+_id+"] send, timeout="+_xdr.timeout)}_xdr.send(data)};this.getAllResponseHeaders=function(){return""};this.getResponseHeader=function(){return null}};$.ajaxSettings.xhr=function(){var target=parseUrl(this.url).domain;_this=this;if(target===""||target===domain){return oldxhr.call($.ajaxSettings)}else{try{return new XDomainRequestAdapter()}catch(e){}}}}})($);$.fn.equals=function(other){if(this.length!=other.length){return false}var result=true;this.each(function(i){if(this!=other[i]){result=false;return false}});return result};$.fn.equalsNative=function(x,y){var p;for(p in y){if(typeof(x[p])=="undefined"){return false}}for(p in y){if(y[p]){switch(typeof(y[p])){case"object":if(!y[p].equals(x[p])){return false}break;case"function":if(typeof(x[p])=="undefined"||(p!="equals"&&y[p].toString()!=x[p].toString())){return false}break;default:if(y[p]!=x[p]){return false}}}else{if(x[p]){return false}}}for(p in x){if(typeof(y[p])=="undefined"){return false}}return true};$.fn.changeElementType=function(newType){var attrs={};$.each(this[0].attributes,function(idx,attr){attrs[attr.nodeName]=attr.nodeValue});var newelement=$("<"+newType+"/>",attrs).append($(this).contents());this.replaceWith(newelement);return newelement};(function($,len,createRange,duplicate){$.fn.caret=function(options,opt2){var start,end,t=this[0],browser=!!(document.all&&(/msie /i).test(navigator.appVersion)&&(window.ActiveXObject!==undefined));if(typeof options==="object"&&typeof options.start==="number"&&typeof options.end==="number"){start=options.start;end=options.end}else{if(typeof options==="number"&&typeof opt2==="number"){start=options;end=opt2}else{if(typeof options==="string"){if((start=t.value.indexOf(options))>-1){end=start+options[len]}else{start=null}}else{if(Object.prototype.toString.call(options)==="[object RegExp]"){var re=options.exec(t.value);if(re!=null){start=re.index;end=start+re[0][len]}}}}}if(typeof start!="undefined"){if(browser){var selRange=this[0].createTextRange();selRange.collapse(true);selRange.moveStart("character",start);selRange.moveEnd("character",end-start);selRange.select()}else{this[0].selectionStart=start;this[0].selectionEnd=end}this[0].focus();return this}else{if(browser){var selection=document.selection;if(this[0].tagName.toLowerCase()!="textarea"){var val=this.val(),range=selection[createRange]()[duplicate]();range.moveEnd("character",val[len]);var s=(range.text==""?val[len]:val.lastIndexOf(range.text));range=selection[createRange]()[duplicate]();range.moveStart("character",-val[len]);var e=range.text[len]}else{var range=selection[createRange](),stored_range=range[duplicate]();stored_range.moveToElementText(this[0]);stored_range.setEndPoint("EndToEnd",range);var s=stored_range.text[len]-range.text[len],e=s+range.text[len]}}else{var s=t.selectionStart,e=t.selectionEnd}var te=t.value.substring(s,e);return{start:s,end:e,text:te,replace:function(st){return t.value.substring(0,s)+st+t.value.substring(e,t.value[len])}}}}})($,"length","createRange","duplicate");$.fn.getClasses=function(){var ca=this.attr("class");var rval=[];if(ca&&ca.length&&ca.split){ca=jQuery.trim(ca);ca=ca.replace(/\s+/g," ");rval=ca.split(" ")}return rval};$.eventReport=function(selector,root){var s=[];$(selector||"*",root).andSelf().each(function(){var e=$._data(this,"events");if(!e){return}s.push(this.tagName);if(this.id){s.push("#",this.id)}if(this.className){s.push(".",this.className.replace(/ +/g,"."))}for(var p in e){var r=e[p],h=r.length-r.delegateCount;if(h){s.push("\n",h," ",p," handler",h>1?"s":"")}if(r.delegateCount){for(var q=0;q<r.length;q++){if(r[q].selector){s.push("\n",p," for ",r[q].selector)}}}}s.push("\n\n")});return s.join("")};$.fn.eventReport=function(selector){return $.eventReport(selector,this)}(function($){var jdiv=$("<div>"),div=jdiv.get(0);var getter=("outerHTML" in div)?function(){return this.get(0).outerHTML}:function(){return jdiv.html(this.first().clone()).html()};$.fn.outerHTML=function(){return arguments.length?this.replaceWith.apply(this,arguments):getter.call(this)}}($))}})($elc,window,document);/*  Copyright 2009-2012 elicit, inc.
*   IMPORTANT NOTE: This file is licensed only for use in providing the elicit service,
*   or any part thereof, and is subject to the elicit Terms and Conditions. You may not
*   port this file to another platform without elicit's written consent. */
(function(a,d,b,c){a.lib.loadLibElcHint=function(e,h,f){e.fn.spin=function(j,i){if(Spinner){return this.each(function(){var k=e(this),l=k.data();if(l.spinner){l.spinner.stop();delete l.spinner}if(j!==false){l.spinner=new Spinner(j).spin(this)}})}else{throw"Spinner class not available."}};(function(r,s,t){function x(i,j){var k=s.createElement(i||"div"),l;for(l in j){k[l]=j[l]}return k}function y(i){for(var j=1,k=arguments.length;j<k;j++){i.appendChild(arguments[j])}return i}function A(i,m,n,o){var p=["opacity",m,~~(i*100),n,o].join("-"),q=0.01+n/o*100,I=Math.max(1-(1-i)/m*(100-q),i),J=w.substring(0,w.indexOf("Animation")).toLowerCase(),K=J&&"-"+J+"-"||"";return v[p]||(z.insertRule("@"+K+"keyframes "+p+"{0%{opacity:"+I+"}"+q+"%{opacity:"+i+"}"+(q+0.01)+"%{opacity:1}"+(q+m)%100+"%{opacity:"+i+"}100%{opacity:"+I+"}}",0),v[p]=1),p}function B(i,j){var k=i.style,l,m;if(k[j]!==t){return j}j=j.charAt(0).toUpperCase()+j.slice(1);for(m=0;m<u.length;m++){l=u[m]+j;if(k[l]!==t){return l}}}function C(i,j){for(var k in j){i.style[B(i,k)||k]=j[k]}return i}function D(i){for(var j=1;j<arguments.length;j++){var k=arguments[j];for(var l in k){i[l]===t&&(i[l]=k[l])}}return i}function E(i){var j={x:i.offsetLeft,y:i.offsetTop};while(i=i.offsetParent){j.x+=i.offsetLeft,j.y+=i.offsetTop}return j}var u=["webkit","Moz","ms","O"],v={},w,z=function(){var i=x("style");return y(s.getElementsByTagName("head")[0],i),i.sheet||i.styleSheet}(),F={lines:12,length:7,width:5,radius:10,rotate:0,color:"#000",speed:1,trail:100,opacity:0.25,fps:20,zIndex:2000000000,className:"spinner",top:"auto",left:"auto"},G=function H(i){if(!this.spin){return new H(i)}this.opts=D(i||{},H.defaults,F)};G.defaults={},D(G.prototype,{spin:function(l){this.stop();var n=this,I=n.opts,J=n.el=C(x(0,{className:I.className}),{position:"relative",zIndex:I.zIndex}),K=I.radius+I.length+I.width,L,M;l&&(l.insertBefore(J,l.firstChild||null),M=E(l),L=E(J),C(J,{left:(I.left=="auto"?M.x-L.x+(l.offsetWidth>>1):I.left+K)+"px",top:(I.top=="auto"?M.y-L.y+(l.offsetHeight>>1):I.top+K)+"px"})),J.setAttribute("aria-role","progressbar"),n.lines(J,n.opts);if(!w){var N=0,O=I.fps,P=O/I.speed,Q=(1-I.opacity)/(P*I.trail/100),R=P/I.lines;!function S(){N++;for(var i=I.lines;i;i--){var j=Math.max(1-(N+i*R)%P*Q,I.opacity);n.opacity(J,I.lines-i,j,I)}n.timeout=n.el&&setTimeout(S,~~(1000/O))}()}return n},stop:function(){var i=this.el;return i&&(clearTimeout(this.timeout),i.parentNode&&i.parentNode.removeChild(i),this.el=t),this},lines:function(i,j){function m(n,o){return C(x(),{position:"absolute",width:j.length+j.width+"px",height:j.width+"px",background:n,boxShadow:o,transformOrigin:"left",transform:"rotate("+~~(360/j.lines*k+j.rotate)+"deg) translate("+j.radius+"px,0)",borderRadius:(j.width>>1)+"px"})}var k=0,l;for(;k<j.lines;k++){l=C(x(),{position:"absolute",top:1+~(j.width/2)+"px",transform:j.hwaccel?"translate3d(0,0,0)":"",opacity:j.opacity,animation:w&&A(j.opacity,j.trail,k,j.lines)+" "+1/j.speed+"s linear infinite"}),j.shadow&&y(l,C(m("#000","0 0 4px #000"),{top:"2px"})),y(i,y(l,m(j.color,"0 0 1px rgba(0,0,0,.1)")))}return i},opacity:function(i,j,k){j<i.childNodes.length&&(i.childNodes[j].style.opacity=k)}}),!function(){function i(k,l){return x("<"+k+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',l)}var j=C(x("group"),{behavior:"url(#default#VML)"});!B(j,"transform")&&j.adj?(z.addRule(".spin-vml","behavior:url(#default#VML)"),G.prototype.lines=function(l,m){function p(){return C(i("group",{coordsize:o+" "+o,coordorigin:-n+" "+-n}),{width:o,height:o})}function K(k,L,M){y(I,y(C(p(),{rotation:360/m.lines*k+"deg",left:~~L}),y(C(i("roundrect",{arcsize:1}),{width:n,height:m.width,left:m.radius,top:-m.width>>1,filter:M}),i("fill",{color:m.color,opacity:m.opacity}),i("stroke",{opacity:0}))))}var n=m.length+m.width,o=2*n,q=-(m.width+m.length)*2+"px",I=C(p(),{position:"absolute",top:q,left:q}),J;if(m.shadow){for(J=1;J<=m.lines;J++){K(J,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)")}}for(J=1;J<=m.lines;J++){K(J)}return y(l,I)},G.prototype.opacity=function(k,l,m,n){var o=k.firstChild;n=n.shadow&&n.lines||0,o&&l+n<o.childNodes.length&&(o=o.childNodes[l+n],o=o&&o.firstChild,o=o&&o.firstChild,o&&(o.opacity=m))}):w=B(j,"animation")}(),r.Spinner=G})(h,f);var g;(function(){var j=false,i=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/;g=function(){};g.extend=function(n){var k=this.prototype;j=true;var o=new this();j=false;for(var m in n){o[m]=typeof n[m]=="function"&&typeof k[m]=="function"&&i.test(n[m])?(function(q,p){return function(){var s=this._super;this._super=k[q];var r=p.apply(this,arguments);this._super=s;return r}})(m,n[m]):n[m]}function l(){if(!j&&this.init){this.init.apply(this,arguments)}}l.prototype=o;l.prototype.constructor=l;l.extend=arguments.callee;return l}})();(function(i,m,j){var l="elcHint",k;k=g.extend({name:l,defaults:{HINT_EVENT:"hintEvent.hint.elc",startLength:0,resultNum:4,maxLength:1000,hasSpinner:true,hasClearBtn:true,doesClearBtnPersist:false,enableEscape:false,enterOnKeyNav:false,enterClearsHint:true,ignoreTabAndRightKeys:false,onClearGiveInputFocus:true,spinnerConfig:{color:"#888",lines:11,length:3,width:2,radius:3},useHintPlaceholderInput:false,useInputFit:false,inputFitMinFont:9,inputFitMaxFont:c,inputFitUnitType:"px",inputFitTopOriginal:c,supressFocusAnimation:false,elicitApp:null},isLoggingEnabled:false,settings:{},$el:null,$hintbox:null,$hint_placeholder:null,$resultsTable:null,$icon:null,$spinner:null,$clearbtn:null,CLEAR_EVENT:"clear.hint.elc",CANCEL_EVENT:"cancel.hint.elc",KEY_NAV_EVENT:"keynav.hint.elc",KEY_NAV_DOWN:"down",KEY_NAV_UP:"up",KEY_NAV_LEFT:"left",KEY_NAV_RIGHT:"right",KEY_NAV_ENTER:"enter",ESCAPE_EVENT:"escape.hint.elc",$container:null,$containerFocus:null,$hint:null,$hint_key:null,$hint_word:null,$search:null,hasHitMaxLength:false,sindex:-1,tempkey:"",isClickedHint:false,curHint:"",allHints:[],spinnerDelayTimeout_id:-1,hintFadedUpAlready:true,now:null,hintKey:"",hintWord:"",inputCaught:false,blurAssignTimeout_id:-1,isMobile:false,isAndroid:false,prevInputNumChars:-1,lastInputVal:"",init:function(o,p){var n=this,q;n.settings=i.extend(true,n.settings,n.defaults,p);n.setupVars(o);n.setupWidget();n.bindEvents();n.reset();q=n.getPublicInterface();return q},setupVars:function(o){var n=this;if(n.settings.startLength<0){n.settings.startLength=0}if(n.settings.resultNum<0){settings.resultNum=0}n.$el=i(o);n.$el.data(n.name,n);n.$hintbox=i("<div class='elc-hint-container elc-pngfix '><div class='elc-hint-match'><span class='key'></span><span class='word'></span></div><div class='elc-hint-container-focus'></div></div>");n.$hint_placeholder=i("<input type='text' class='elc-hint-placeholder' tabindex='-1' readOnly='readOnly' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' />");n.$resultsTable=i("<div class='elc-hint-results'><table><tbody></tbody></table></div>");n.$icon=i("<div class='elc-hint-icon-container' contenteditable='false'><div class='loading'></div><div class='clear'></div></div>");if(!n.settings.hasClearBtn){n.$icon.find(".clear").remove()}n.now=new Date()},setupWidget:function(){var o=this,q,n=i("<div class='spinjs'></div>").spin(o.settings.spinnerConfig),p;if(q===c){q=""}o.$el.removeClass("elc-hint");o.$el.addClass("elc-hint-search");p=o.$el.clone();o.$hintbox.append(p);if(o.settings.resultNum!==0){o.$hintbox.append(o.$resultsTable)}o.$el.val("");o.$el.replaceWith(o.$hintbox);o.$container=o.$hintbox;o.$containerFocus=o.$container.find(".elc-hint-container-focus");o.$containerFocus.css("opacity",0);o.$hint=i(".elc-hint-match",o.$container);o.$hint_key=i(".elc-hint-match .key",o.$container);o.$hint_word=i(".elc-hint-match .word",o.$container);o.$search=i(".elc-hint-search",o.$container);q=o.$search.attr("title");o.$search.data("title",q);o.$search.attr("title","");o.lastInputVal=o.$search.val();if(o.settings.useHintPlaceholderInput){o.$search.after(o.$hint_placeholder);o.$hintbox.find(".elc-hint-match").remove()}i(".elc-hint-results",o.$container).css("top",o.$container.height());o.$search.attr("maxlength",o.settings.maxLength);o.$container.append(o.$icon);o.$spinner=i(".loading",o.$icon);o.$spinner.append(n);o.$clearbtn=i(".clear",o.$icon);o.disableSelection(o.$hint_placeholder);o.refreshViewWidths();setTimeout(function(){o.refreshViewWidths()},300);if(m.$elc!==c){o.isMobile=m.$elc.util.isMobile()}o.isAndroid=navigator.userAgent.match(/Android/i)},bindEvents:function(p){if(p===c){p=true}var n=this,o=true;n.$el.find("*").unbind(n.name);if(p){n.$spinner.bind("click."+n.name,i.proxy(n.spinnerClickHandler,n));n.$clearbtn.bind("click."+n.name,i.proxy(n.clearClickHandler,n));n.$container.bind("mouseover."+n.name,i.proxy(n.handleContainerMouseOver,n)).bind("mouseout."+n.name,i.proxy(n.handleContainerMouseOut,n));n.$search.bind("focus."+n.name,i.proxy(n.searchFocusHandler,n)).bind("input."+n.name,i.proxy(n.handleInput,n)).bind("keydown."+n.name,i.proxy(n.handleKeyDown,n)).bind("keypress."+n.name,i.proxy(n.handleKeyPress,n)).bind("keyup."+n.name,i.proxy(n.handleKeyUp,n)).bind("cut."+n.name,i.proxy(n.handleCutPaste,n)).bind("paste."+n.name,i.proxy(n.handleCutPaste,n))}if(n.isMobile){o=false;n.$spinner.unbind("click."+n.name,n.spinnerClickHandler);n.$clearbtn.unbind("click."+n.name,n.clearClickHandler);if(p){n.$clearbtn.bind("touchstart."+n.name,i.proxy(n.clearClickHandler,n)).bind("touchend."+n.name,i.proxy(n.terminateEvent,n));n.$spinner.bind("touchstart."+n.name,n.spinnerClickHandler).bind("touchend."+n.name,i.proxy(n.terminateEvent,n))}}if(o){n.$container.bind("click."+n.name,i.proxy(n.handleContainerClick,n))}},reset:function(o){var n=this,p=n.$search.data("title");if(n.$search.val()!==""){n.$search.val("");n.sindex=-1}if(p===c){p=""}n.setHintText("",p);n.hideIcons();n.hideResults();n.resetInputFit()},handleContainerMouseOver:function(o){var n=this;n.$container.addClass("hovered")},handleContainerMouseOut:function(o){var n=this;n.$container.removeClass("hovered")},searchFocusHandler:function(p){var n=this,o=0;n.log("searchFocusHandler");n.handleKeyPress();n.giveContainerFocus(true);if(n.$search.val()==n.$search.data("title")){n.$search.val("")}n.$search.unbind("blur",n.searchBlurHandler);clearTimeout(n.blurAssignTimeout_id);if(n.isAndroid){o=50}n.blurAssignTimeout_id=setTimeout(function(){n.log("timeout - assign blur event handler");n.$search.bind("blur."+n.name,i.proxy(n.searchBlurHandler,n))},o)},searchBlurHandler:function(o){var n=this;clearTimeout(n.blurAssignTimeout_id);n.log("plugin blur visible:"+n.$search.is(":visible")+" hidden?"+n.$search.is(":hidden"));n.$search.unbind("blur."+n.name,i.proxy(n.searchBlurHandler,n));n.giveContainerFocus(false);if(n.$search.val()===""){n.reset(true)}},giveContainerFocus:function(q){var n=this,o=300,p=n.hintWord===n.$search.data("title");if(q===c){q=false}if(n.settings.supressFocusAnimation){o=0}n.log("giveContainerFocus:"+q);if(q){n.$container.addClass("elc-focused");n.$container.parent().addClass("elc-focused");n.$containerFocus.stop().animate({opacity:1},0)}else{n.$container.removeClass("elc-focused");n.$container.parent().removeClass("elc-focused");n.$containerFocus.stop().animate({opacity:0},o)}},removeContainerFocus:function(){var n=this;n.log("removeContainerFocus");n.giveContainerFocus(false)},terminateEvent:function(n){try{n.preventDefault();n.stopPropagation();n.stopImmediatePropagation()}catch(o){}},handleContainerClick:function(o){var n=this;if(m.$elc!==c){if(m.$elc.util.isMobile()){return}}if(!n.$search.is(":focus")){n.log("plugin container click - giving focus ");n.$search.focus()}},getHintText:function(){var n=this,o=n.hintKey+n.hintWord;return o},setHintText:function(p,s){var n=this,q=p.replace(/ /g,"&nbsp;"),t=s.replace(/ /g,"&nbsp;"),r,o=n.isIE6()?0:300;if(n.settings.useHintPlaceholderInput){n.setHintPlaceholderText(p,s);return}n.log("plugin setHintText key:'"+p+"' word:'"+s+"'");n.hintKey=p.replace(/&nbsp;/g," ");n.hintWord=s.replace(/&nbsp;/g," ");n.$hint_word.removeClass("default");r=function(){n.$hint_key.html(q);n.$hint_word.html(t);if(n.isIE6()){if(a!==c){n.$elc.util.redrawElement(n.$container.parent())}}};if(s==n.$search.data("title")){setTimeout(r,0);n.$hint_word.addClass("default")}else{r()}if(!n.hintFadedUpAlready&&p===""&&s===n.$search.data("title")){n.$hint.stop().animate({opacity:0},0).animate({opacity:1},o);n.hintFadedUpAlready=true}else{if(p!==""||s!==n.$search.data("title")){n.hintFadedUpAlready=false}}},clearHintText:function(){var n=this;n.log("clearHintText");n.setHintText("","")},setHintPlaceholderText:function(r,v){var n=this,p,q,s,w,t=this,u,o=n.isIE6()?0:300;n.log("plugin setHintText key:'"+r+"' word:'"+v+"'");n.hintKey=r.replace(/&nbsp;/g," ");n.hintWord=v.replace(/&nbsp;/g," ");p=n.hintKey;q=n.hintWord;s=r.replace(/ /g,"&nbsp;"),w=v.replace(/ /g,"&nbsp;");n.$hint_placeholder.removeClass("default");u=function(){n.$hint_placeholder.val(p+q);if(n.isIE6()){if(m.$elc!==c){m.$elc.util.redrawElement($container.parent())}}n.hideHintPlaceholderBasedOnWidth()};if(v==n.$search.data("title")){setTimeout(u,0);n.$hint_placeholder.addClass("default")}else{u()}if(!n.hintFadedUpAlready&&r===""&&v===n.$search.data("title")){n.$hint.stop().animate({opacity:0},0).animate({opacity:1},o);n.hintFadedUpAlready=true}else{if(r!==""||v!==n.$search.data("title")){n.hintFadedUpAlready=false}}},handleInput:function(o){var n=this;if(!n.isIELess10()){n.inputCaught=true;n.log("handleInput handler "+n.inputCaught);n.handleInputChanged()}},handleCutPaste:function(o){var n=this;if(!n.inputCaught){n.clearHintText();setTimeout(function(){n.syncWithInput()},0)}},handleInputChanged:function(v,o){var n=this,w,s=false,t=n.getHintText(),r=false,u=0,y,z=[],p=n.$search.val().length,A,x=n.lastInputVal;n.log("handleInputChanged "+v);if(o===c){o=false}if(v===c){v=""}n.lastInputVal=n.$search.val();if(n.$search.val().length>=n.settings.maxLength&&n.hasHitMaxLength){return}if(n.$search.val().length===0){if(x.length===0){return}else{n.reset(true)}}n.tempkey=n.$search.val();n.showClearBtn(true);if(n.getHintText()==n.$search.data("title")){n.log("hint text same as title:"+n.$search.data("title"));n.clearHintText()}w=(n.tempkey+v);try{w=w.toLowerCase();t=t.toLowerCase();if(t.indexOf(w)===0){s=true}}catch(q){}n.log("hintText;"+t+" key:"+w+" index:"+t.indexOf(w));if(!s&&n.settings.resultNum>0){for(u=0;u<allHints.length;u+=1){y=allHints[u];if(y!==c&&y.toLowerCase().indexOf(w)===0){if(!r){n.setHintText(w,y.substring(w.length))}z.push(y);r=true}}n.showResults();n.updateHintResultsDropDown(w,z);if(!r||allHints.length===0){n.log("found match indropdown || all hints.length 0");n.clearHintText();n.hideResults()}}else{if(!s){n.log("!hint has input val");n.clearHintText()}else{A=n.hintKey+n.hintWord;n.setHintText(A.substr(0,p),A.substr(p,A.length));if(n.settings.resultNum>0){for(u=0;u<allHints.length;u+=1){if(allHints[u].toLowerCase().indexOf(hintKey)===0){z.push(allHints[u])}}}}}n.log("$search.val().length:"+n.$search.val().length);if(n.$search.val().length<n.settings.startLength){n.hideResults()}n.inputFit();if(!o){setTimeout(function(){n.triggerGetHintEvent()},0)}},handleKeyDown:function(r){var n=this,o="",s,t;if(r){if(r.which!==""){o=String.fromCharCode(r.which)}n.log("keydown - keycode:"+r.keyCode+"  which: "+r.which+"  char: "+o+" $search.val:"+n.$search.val()+" event.ctrlKey:"+r.ctrlKey+" event.metaKey:"+r.metaKey+" blocker?"+n.isBlockerKey(r));if(r.keyCode==27){try{r.preventDefault();r.stopPropagation();r.stopImmediatePropagation()}catch(p){}return false}if(!n.settings.ignoreTabAndRightKeys){if(r.keyCode==9){s=n.handleFillInputWithHint();if(s){r.preventDefault();r.stopPropagation();r.stopImmediatePropagation()}return !s}}if(!n.settings.ignoreTabAndRightKeys){if(r.keyCode==39){s=n.handleFillInputWithHint(true);if(s||n.getElcResultSelectedWithWideLayout()){r.preventDefault();r.stopPropagation();r.stopImmediatePropagation()}if(n.settings.resultNum===0&&!s){n.$search.trigger({type:n.KEY_NAV_EVENT,key:n.KEY_NAV_RIGHT})}return !s}}if(r.keyCode==37){if(n.getElcResultSelectedWithWideLayout()){r.preventDefault();r.stopPropagation();r.stopImmediatePropagation()}if(n.settings.resultNum===0){n.$search.trigger({type:n.KEY_NAV_EVENT,key:n.KEY_NAV_LEFT})}}if(r.keyCode==13){n.onEnterHandler(r);return}if(r.keyCode==38){if(n.sindex>-1){n.sindex-=1;i(".elc-hint-results table tr td.selected").removeClass("selected");i(".elc-hint-results table tr td").eq(sindex).addClass("selected");if(sindex==-1){t=i(".elc-hint-results table tr td").length;n.sindex=(settings.resultNum<t)?settings.resultNum:t;i(".elc-hint-results table tr td.selected").removeClass("selected");n.$search.val(tempkey);n.log("keyup focus");n.$search.focus()}}else{i(".elc-hint-results table tr td.selected").removeClass("selected");n.sindex=-1}if(i(".elc-hint-results table tr td").length>0){r.preventDefault();n.selectKeyedResult();n.$search.trigger({type:n.KEY_NAV_EVENT,key:n.KEY_NAV_UP});if(n.settings.enterOnKeyNav){n.$search.trigger({type:n.KEY_NAV_EVENT,key:n.KEY_NAV_ENTER})}}if(n.settings.resultNum===0){n.$search.trigger({type:n.KEY_NAV_EVENT,key:n.KEY_NAV_UP})}try{r.preventDefault();r.stopPropagation();r.stopImmediatePropagation()}catch(q){}return false}if(r.keyCode==40){if(i(".elc-hint-results").css("display")=="none"&&i(".elc-hint-results table tr td").length>0){n.showResults();n.sindex=-1;return}if(i(".elc-hint-results table tr td").length>0){n.sindex+=1;if(i(".elc-hint-results table tr td.selected").length===0){n.tempkey=n.$search.val()}i(".elc-hint-results table tr td.selected").removeClass("selected");i(".elc-hint-results table tr td").eq(sindex).addClass("selected");n.selectKeyedResult();n.$search.trigger({type:n.KEY_NAV_EVENT,key:n.KEY_NAV_DOWN});if(n.settings.enterOnKeyNav){n.$search.trigger({type:n.KEY_NAV_EVENT,key:n.KEY_NAV_ENTER})}}if(n.sindex>=n.settings.resultNum||n.sindex>=i(".elc-hint-results table tr td").length){n.sindex=-1;i(".elc-hint-results table tr td.selected").removeClass("selected");n.$search.val(n.tempkey);n.$search.focus();n.setHintText(n.tempkey,i(".elc-hint-results table tr td span.word:first").html())}if(n.settings.resultNum===0){n.$search.trigger({type:n.KEY_NAV_EVENT,key:n.KEY_NAV_DOWN})}try{r.preventDefault();r.stopPropagation();r.stopImmediatePropagation()}catch(q){}return false}if(!n.inputCaught&&r.keyCode==8){setTimeout(function(){n.log("delete press");n.handleInputChanged(c,true)},0)}}},handleKeyPress:function(q){if(q){var n=this,o="";if(q.which!==""){o=String.fromCharCode(q.which)}n.log("keypress - keycode:"+q.keyCode+"  which: "+q.which+"  char: "+o+" $search.val:"+n.$search.val()+" event.ctrlKey:"+q.ctrlKey+" event.metaKey:"+q.metaKey+" blocker?"+n.isBlockerKey(q)+" inputChangeIsPartOfHint:"+q.inputChangeIsPartOfHint);if(q.keyCode===27){try{q.preventDefault();q.stopPropagation();q.stopImmediatePropagation()}catch(p){}return false}if(n.isBlockerKey(q)){return true}setTimeout(function(){if(!n.inputCaught&&(q.which>47||q.which===32)){n.log("input not caught in keypress.. inputCaught:"+n.inputCaught);n.handleInputChanged()}},0)}},handleKeyUp:function(p){var n=this,q;if(n.isBlockerKey(p)){return true}if(p.keyCode===27){try{p.preventDefault();p.stopPropagation();p.stopImmediatePropagation()}catch(o){}q=(n.settings.resultNum!==0&&(i(".elc-hint-results").css("display")=="block"));if(n.settings.enableEscape){if(!q){n.tempkey="";n.setHintText("",n.$search.data("title"));n.$search.val("");n.hideResults();n.sindex=-1;n.hideIcons();n.$search.trigger(n.CLEAR_EVENT);n.$search.blur();n.$search.focus();n.log("trigger escape focus settings.onClearGiveInputFocus "+n.settings.onClearGiveInputFocus)}else{i(".elc-hint-results").hide();n.$search.blur();n.$search.focus();n.log("results trigger escae focus settings.onClearGiveInputFocus "+n.settings.onClearGiveInputFocus)}}n.$search.trigger(n.ESCAPE_EVENT,n.hasResults);return false}if(p.keyCode==8){if(!n.inputCaught){n.handleInputChanged()}return true}if(!n.inputCaught&&p.keyCode>47||p.keyCode==32){return true}},onEnterHandler:function(p){var n=this,o=false;if(n.settings.enterClearsHint){n.log("enter handler clear text");n.clearHintText()}n.sindex=-1;n.selectKeyedResult();n.hideResults();try{p.preventDefault();p.stopPropagation();p.stopImmediatePropagation()}catch(q){}n.$search.trigger({type:n.KEY_NAV_EVENT,key:n.KEY_NAV_ENTER});return false},isBlockerKey:function(o){var n=this,p=false;if(o){p=o.ctrlKey===true||o.altKey===true||(o.metaKey!==c&&o.metaKey===true)||o.keyCode===224||o.keyCode===91||o.keyCode===92||o.keyCode===93}return p},triggerGetHintEvent:function(o){var n=this,p;if(o===c){o=false}p=i.Event(n.settings.HINT_EVENT,{bolInputFilledWithHint:o});n.log("triggerGetHintEvent: bolInputFilledWithHint:"+o+" $search.val(): "+n.$search.val());if(n.allHints[0]&&n.allHints[0].indexOf(n.$search.val())!==0){n.log("ie selection start issue");n.hideResults();n.clearHintText()}if(n.$search.val().length>=n.settings.maxLength&&n.hasHitMaxLength){n.log("max len reached");return}else{if(n.$search.val().length>=n.settings.maxLength){n.hasHitMaxLength=true}else{n.hasHitMaxLength=false}}if(i.trim(n.$search.val()).length===0){n.reset(true)}else{n.showSpinner()}n.$search.trigger(p)},syncWithInput:function(){var n=this;n.log("syncWithInput");n.resetInputFit();n.setKey(n.$search.val())},setKey:function(p,o){var n=this;n.log("setkey "+p);if(o===c){o=false}n.$search.val(p);if(!o){n.handleInputChanged()}},handleFillInputWithHint:function(r){var n=this,p=false,q=n.getHintText(),o=n.getHintText()!==""&&n.$search.val()!==""&&n.getHintText()!==n.$search.val();if(r===c){r=false}if(r&&n.getElcResultSelectedWithWideLayout()){o=false}if(n.$search.caret!==c){if(n.$search.caret().end!=n.$search.val().length){o=false}}if(o){n.log("handleFillInputWithHint: '"+q+"'");p=true;n.$search.val(q);n.setHintText(q,"");n.hideResults();n.sindex=-1;n.tempkey="";n.$search.focus();n.triggerGetHintEvent(p);setTimeout(function(){n.handleInputChanged(c,true)},0)}return p},fillInputWithHint:function(){var n=this;return n.handleFillInputWithHint()},getElcResultSelectedWithWideLayout:function(){var o=false,n=this;if(a!==c){if(n.settings.elicitApp&&a!==c&&n.settings.elicitApp.config.get("resultsLayoutType")===n.settings.elicitApp.enums.ResultsLayoutType.Wide&&n.settings.elicitApp.state.get("isResultSelected")){o=true}}return o},initInputFit:function(){var n=this,o,p;if(n.$search.length===0){return}if(n.settings.inputFitMaxFont===c){o=n.$search.css("font-size");p="px";if(o.indexOf("em")>-1){n.settings.inputFitUnitType="em"}n.settings.inputFitMaxFont=parseFloat(o,10)}if(n.settings.inputFitTopOriginal===c){if(n.$search.css("top").toLowerCase()==="auto"&&n.$search.css("top").toLowerCase()==="inherit"){n.settings.inputFitTopOriginal=0}else{n.settings.inputFitTopOriginal=parseInt(n.$search.css("top"),10)}}},resetInputFit:function(){var n=this;if(!n.settings.useInputFit){return}n.initInputFit();n.prevInputNumChars=-1;n.$hint_placeholder.css("visibility","visible");if(n.isIE()){return}n.$search.css("font-size","");n.$hint_placeholder.css("font-size","");n.$search.css("top",n.settings.inputFitTopOriginal+n.settings.inputFitUnitType);n.$hint_placeholder.css("top",n.$search.css("top"));n.initInputFit()},getInputTrueInnerWidth:function(){var n=this,o=n.$search.innerWidth();if(n.$search.css("padding-right").toLowerCase()!=="auto"&&n.$search.css("padding-right").toLowerCase()!=="inherit"){o-=parseInt(n.$search.css("padding-right"),10)}if(n.$search.css("padding-left").toLowerCase()!=="auto"&&n.$search.css("padding-left").toLowerCase()!=="inherit"){o-=parseInt(n.$search.css("padding-left"),10)}return o},inputFit:function(){if(!this.settings.useInputFit){return}this.initInputFit();var n=this,r,z=n.getInputTrueInnerWidth(),u=false,v=n.$search.val().length,o=false,p=false,q,t=1,s=parseInt(n.$search.css("font-size"),10),x=5,w=5,y;r=(n.$search.attr("id")===c?"__":n.$search.attr("id"))+"_size-changing-clone";if(n.prevInputNumChars>-1){if(v>n.prevInputNumChars){p=true}else{if(v<n.prevInputNumChars){o=true}}}n.prevInputNumChars=v;if(i("#"+r).length===0){q=i("<div></div>",{id:r,css:{fontSize:n.$search.css("font-size"),position:"absolute",left:"-9999px",fontFamily:n.$search.css("font-family")}});n.$search.parent().append(q)}q=i("#"+r);q.css("font-size",n.$search.css("font-size"));q.text(n.$search.val());n.$hint_placeholder.css("visibility","visible");if(o&&q.innerWidth()<z-x){while(q.innerWidth()<z-w){if(s<n.settings.inputFitMaxFont){s+=t;u=true}else{break}q.css("font-size",s+n.settings.inputFitUnitType)}}else{if(p){while(q.innerWidth()>z-w){if(s>n.settings.inputFitMinFont){s-=t;u=true}else{if(s===n.settings.inputFitMinFont){n.$hint_placeholder.css("visibility","hidden")}break}q.css("font-size",s+n.settings.inputFitUnitType)}}}if(u&&!n.isIE()){n.$search.css("font-size",s+n.settings.inputFitUnitType);n.$hint_placeholder.css("font-size",n.$search.css("font-size"));y=(n.settings.inputFitTopOriginal+n.getInputFitFontSizeDiff())+n.settings.inputFitUnitType;n.$search.css("top",y);n.$hint_placeholder.css("top",y)}n.hideHintPlaceholderBasedOnWidth()},hideHintPlaceholderBasedOnWidth:function(){var p=this,o,n,q;if(p.$hint_placeholder.css("visibility")!=="visible"){return}o=i("<span />");n=i("body");o.text(p.$search.val());o.css("font-size",p.$search.css("font-size"));o.css("font-family",p.$search.css("font-family"));o.css("font-weight",p.$search.css("font-weight"));o.css("text-transform",p.$search.css("text-transform"));n.append(o);q=o.innerWidth();o.remove();if(q>p.$search.innerWidth()){p.$hint.hide();p.$hint_placeholder.css("visibility","hidden")}},getInputFitFontSizeDiff:function(){var n=this,o=0;if(n.settings.inputFitMaxFont!==c){o=n.settings.inputFitMaxFont-parseInt(n.$search.css("font-size"),10);o=Math.round(o*0.5)}return o},showSpinner:function(p,o){var n=this,q=n.isIE6()?0:200;n.log("showspinner "+p+" bolBypassDelayCheck:"+o+" spinnerDelayTimeout_id:"+n.spinnerDelayTimeout_id);if(!n.settings.hasSpinner){return}if(p===c){p=true}if(o===c){o=false}if(p===false){o=true}clearTimeout(n.spinnerDelayTimeout_id);n.spinnerDelayTimeout_id=-1;if(p===true&&o===false){n.spinnerDelayTimeout_id=setTimeout(function(){n.showSpinner(p,true)},250);return}if(p&&n.$search.val()!==""){n.showClearBtn(false);n.$icon.show();if(n.settings.hasSpinner){n.$spinner.stop(true,true).fadeIn(q)}}else{n.$spinner.stop(true,true).fadeOut(q);n.$icon.hide()}if(n.isIE6()){n.$icon.show();n.$spinner.parent().hide().delay(500).show()}},spinnerClickHandler:function(o){var n=this;n.showSpinner(false);n.$search.trigger(n.CANCEL_EVENT)},showClearBtn:function(o){var n=this,p=n.isIE6()||n.isMobile?0:200;if(o===c){o=true}if(o){n.showSpinner(false);n.$icon.show();if(n.settings.hasClearBtn){n.$clearbtn.stop(true,true).fadeIn(p)}}else{if(n.settings.doesClearBtnPersist){return}n.$clearbtn.stop(true,true).fadeOut(p);n.$icon.hide()}if(n.isIE6()){n.$clearbtn.parent().hide().delay(500).show();n.$icon.show()}},hideIcons:function(){var n=this;n.log("hide spinner from hideIcons");n.showSpinner(false);if(n.settings.doesClearBtnPersist){n.showClearBtn(true)}else{n.showClearBtn(false)}},clearClickHandler:function(p){var n=this,q=n.$search.val()!=="",o=new i.Event(n.CLEAR_EVENT);n.log("clearClickHandler settings.onClearGiveInputFocus:"+n.settings.onClearGiveInputFocus+" focused?"+n.$search.is(":focus")+" inputHadValue:"+q);n.reset(true);o.inputHadValue=q;n.$search.trigger(o);if(n.settings.onClearGiveInputFocus&&q){n.$search.focus();n.log("trigger escae focus")}else{n.$search.blur();p.preventDefault();p.stopPropagation()}},refreshViewWidths:function(){var n=this,o=i(".elc-hint-icon-container").outerWidth(true)+2,r,q=n.$container.innerWidth(),p=j.compatMode=="BackCompat"||j.compatMode=="CSS1 Compat";n.$search.width(n.$container.innerWidth());n.$hint.width(n.$container.innerWidth());if(n.settings.elicitApp&&n.settings.elicitApp.config.get("determineSearchInputPaddingRight")!==null){r=n.settings.elicitApp.config.get("determineSearchInputPaddingRight")(n.$search,o);n.$search.width(n.$container.innerWidth()-r)}else{if(!p){q-=o;if(!isNaN(parseInt(n.$search.css("left"),10))){q-=parseInt(n.$search.css("left"),10)}n.$search.width(q)}}n.$hint.width(n.$search.width());if(n.settings.useHintPlaceholderInput){n.$hint_placeholder.width(n.$search.innerWidth())}if(n.settings.elicitApp&&n.settings.elicitApp.config.get("useAutoHintPositioning")!==c&&n.settings.elicitApp.config.get("useAutoHintPositioning")){n.positionHint($hint,$search)}n.resetInputFit()},
/*
				* HTML5 placeholder polyfill
				* @requires jQuery - tested with 1.6.2 but might as well work with older versions
				* 
				* code: https://github.com/ginader/HTML5-placeholder-polyfill
				* please report issues at: https://github.com/ginader/HTML5-placeholder-polyfill/issues
				*
				* Copyright (c) 2012 Dirk Ginader (ginader.de)
				* Dual licensed under the MIT and GPL licenses:
				* http://www.opensource.org/licenses/mit-license.php
				* http://www.gnu.org/licenses/gpl.html
				*
				* Version: 2.0
				*/
positionHint:function(o,n){var p=n.is("textarea");o.css({width:n.innerWidth()-(p?20:4),height:n.innerHeight()-6,lineHeight:n.css("line-height"),whiteSpace:p?"normal":"nowrap",overflow:"hidden"}).offset(n.offset())},showResults:function(){var n=this;i(".elc-hint-results").show();n.showClearBtn()},hideResults:function(){i(".elc-hint-results").hide();i(".elc-hint-results table tbody").empty()},clickHintResult:function(o){var n=this;o.preventDefault();n.log("click handler result");n.clearHintText();n.$search.val(n.$search.data("title"));n.hideResults();n.isClickedHint=true;n.$search.trigger(n.settings.HINT_EVENT)},selectKeyedResult:function(){var n=this;if(i(".elc-hint-results table td.selected").length>0){n.$search.val(i(".elc-hint-results table td.selected").attr("title"));n.log("selectKeyedResult");n.clearHintText()}},hasSameNextLetterAsHint:function(r){var n=this,p=getHintText(),q="";if(!r){return false}try{q=p.toLowerCase().indexOf(r.toLowerCase())>-1}catch(o){}return q},updateHintResultsDropDown:function(q,o){var n=this,p,r;if(o&&o.length>0&&q&&q!==""){i(".elc-hint-results table tbody").empty();for(p in o){if(p>=n.settings.resultNum){break}r=o[p].substring(q.length);i(".elc-hint-results table tbody").append("<tr><td title='"+q+r+"'><span class='key'>"+q+"</span><span class='word'>"+r+"</span></td></tr>")}if(!isClickedHint){n.showResults()}else{n.isClickedHint=false}}else{n.hideResults()}},log:function(t){if(this.isLoggingEnabled){var n=this,q="ELC-HINT",r=new Date(),o=r.getTime()-n.now.getTime();if(n.$search&&n.$search.attr("id")){q+=" "+n.$search.attr("id")}try{console.log("["+q+" "+o+"] "+t)}catch(p){}}},_isIELess10:null,isIELess10:function(){var n=this;if(n._isIELess10!=null){return n._isIELess10}n._isIELess10=((/msie 6./i).test(navigator.appVersion)||(/msie 7./i).test(navigator.appVersion)||(/msie 8./i).test(navigator.appVersion)||(/msie 9./i).test(navigator.appVersion))&&(m.ActiveXObject!=c);return n._isIELess10},_isIE6:null,isIE6:function(){var n=this;if(n._isIE6!=null){return n._isIE6}n._isIE6=!!(j.all&&(/msie 6./i).test(navigator.appVersion)&&(m.ActiveXObject!=c));return n._isIE6},_isIE:null,isIE:function(){var n=this;if(n._isIE!=null){return n._isIE}n._isIE=!!(j.all&&(/msie /i).test(navigator.appVersion)&&(m.ActiveXObject!=c));return n._isIE},textWidth:function(o){var n=this,q=i(o).html(),p="<span>"+q+"</span>",r;i(o).html(p);r=i(o).find("span:first").width();i(o).html(q);return r},setHint:function(o){var n=this,p,q;if(o!==c&&o!==null){n.log("external setHint:'"+o+"'");n.curHint=o;p=o.substring(n.$search.val().length);q=n.$search.val();if(o===""){q="";p=""}n.setHintText(q,p);n.showClearBtn()}},getHint:function(){var n=this;return n.curHint},getKey:function(){var n=this;return n.$search.val()},setHintResults:function(q){var n=this,r=n.$search.val(),p,o;n.allHints=q;if(r!==""&&q[0]){if(n.getHintText()===""){o=q[0].substring(r.length);n.setHintText(r,o)}if(!hasSameNextLetterAsHint(q[0])){p=q[0].substring(r.length);n.setHintText(r,p)}else{p=q[0].substring(r.length);n.setHintText(r,p)}n.updateHintResultsDropDown(r,q);n.showClearBtn()}else{if(r!==""){n.showClearBtn()}}},disableSelection:function(o){var n=i(o);n.each(function(){if(typeof this.onselectstart!="undefined"){this.onselectstart=function(){return false}}else{if(typeof this.style.MozUserSelect!="undefined"){this.style.MozUserSelect="none"}else{this.onmousedown=function(){return false}}}})},getXssSafeValue:function(p){var o="";if(p.indexOf("<")>-1&&p.indexOf(">")>-1){o=false}else{try{o=i("<div/>").html(p).text()}catch(n){}}return o},destroy:function(){var n=this;n.bindEvents(false);n.$el.removeData(n.name);n.$el=null;clearTimeout(n.blurAssignTimeout_id);clearTimeout(n.spinnerDelayTimeout_id)},getPublicInterface:function(){var n=this,o={HINT_EVENT:n.settings.HINT_EVENT,KEY_NAV_EVENT:n.KEY_NAV_EVENT,KEY_NAV_DOWN:n.KEY_NAV_DOWN,KEY_NAV_UP:n.KEY_NAV_UP,KEY_NAV_LEFT:n.KEY_NAV_LEFT,KEY_NAV_RIGHT:n.KEY_NAV_RIGHT,KEY_NAV_ENTER:n.KEY_NAV_ENTER,CLEAR_EVENT:n.CLEAR_EVENT,CANCEL_EVENT:n.CANCEL_EVENT,ESCAPE_EVENT:n.ESCAPE_EVENT,inputbox:n.$search,setKey:i.proxy(n.setKey,n),getKey:i.proxy(n.getKey,n),getHint:i.proxy(n.getHint,n),setHint:i.proxy(n.setHint,n),reset:i.proxy(n.reset,n),setHintResults:i.proxy(n.setHintResults,n),showSpinner:i.proxy(n.showSpinner,n),showClearBtn:i.proxy(n.showClearBtn,n),hideIcons:i.proxy(n.hideIcons,n),fillInputWithHint:i.proxy(n.fillInputWithHint,n),refreshViewWidths:i.proxy(n.refreshViewWidths,n),destroy:i.proxy(n.destroy,n)};return o}});i.fn[l]=function(n){return this.each(function(){var o,p;if(!i.data(this,"plugin_"+l)){o=new k(this,n);p=o.getPublicInterface();i.data(this,"plugin_"+l,p);return this}})}})(e,h,f)}})($elc,window,document);(function(a,d,b,c){a.classes.Enums=a.classes.Class.extend({DisplayType:{Standard:1,TextOnly:2,HalfHeightTextOnly:3,RichFullHeight:4,RichDoubleHeight:5,RichHalfHeight:6,SingleHeightTextFooter:7,RichTallSideBlock:8},EventType:{Query:".query",QuerySend:"evt-send.query.elc",QueryResponse:"evt-response.query.elc",QueryCancel:"evt-cancel.query.elc",Result:".result",ResultRefresh:"evt-refresh.result.elc",ResultReset:"evt-reset.result.elc",ResultClick:"evt-click.result.elc",ResultSelectFirst:"evt-selectfirst.result.elc",Input:".input",InputSetHint:"evt-setHint.input.elc",InputReset:"evt-reset.input.elc",InputSetSpinner:"evt-setSpinner.input.elc",InputHint:"evt-hint.input.elc",InputNav:"evt-nav.input.elc",InputSet:"evt-set.input.elc",InputCollapse:"evt-collapse.input.elc",InputFocus:"evt-focus.input.elc",InputBlur:"evt-blur.input.elc",InputCancel:"evt-cancel.input.elc",InputClear:"evt-clear.input.elc",Visit:".visit",VisitResult:"evt-result.visit.elc",VisitSearchAll:"evt-search.visit.elc",Tracking:".tracking",TrackingSend:"evt-send.tracking.elc",TrackingResponse:"evt-response.tracking.elc",TrackingAddTransOrder:"evt-addorder.tracking.elc",TrackingAddTransDetail:"evt-adddetail.tracking.elc",TrackingTrackTrans:"evt-track.tracking.elc",ViewResultClose:"evt-close.result-view.elc",ViewScrollToTop:"evt-scrollToTop.search-view.elc",ViewRenderComplete:"evt-rendercomplete.result-view.elc",Responsive:".responsive",ResponsiveChange:"evt-changeresponsive.responsive.elc",Search:".search",SearchClose:"evt-closesearch.search.elc",Window:".window",WindowUnload:"evt-windowunload.window.elc",API_ElicitLoad:"load.app.elc",API_ResultHasResults:"hasresults.result.elc",API_ResultNone:"noresults.result.elc",API_ResultClick:"click.result.elc",API_ResultShowingResultsForClick:"click-showing-results-for.result.elc",API_ResultSiteSearch:"sitesearch.result.elc",API_InputClear:"clear.input.elc",API_SearchClose:"close.search.elc",API_ResponsiveChange:"change.responsive.elc",API_QueryKeystroke:"keystroke.query.elc"},KeyType:{Down:"down.key.elc",Up:"up.key.elc",Left:"left.key.elc",Right:"right.key.elc",Enter:"enter.key.elc",Submit:"submit.key.elc"},ResultType:{Match:"match",Category:"category",NoResults:"no results",MoreResults:"more results",ShowingResultsFor:"showing results for",LoadingResults:"loading results",PersistentResultsHeader:"persistent results header"},CSSType:{CSS3Fix:"elc-css3fix",PngFix:"elc-pngfix",isClickable:"elc-isClickable",hover:"elc-hover"},PlatformType:{Site:0,Mobile:1,Social:2},ApplicationType:{Search:0,PersistentResults:1},AnalyticsEventType:{ResultClick:0,MoreResultsClick:1,SearchClose:2,ResultsPagination:3},ResultsLayoutType:{Standard:"elc-resultsLayout-standard",Wide:"elc-resultsLayout-wide",PersistentResults:"elc-resultsLayout-persist"},EcomMetaType:{WebTrends:"wt",GoogleAnalytics:"ga",Omniture:"om",Yahoo:"yh",OpenWeb:"ow",Custom:"cm"},PageType:{Standard:"elc-page-stnd",Homepage:"elc-page-home",PersistentResults:"elc-page-persist"},AlignmentType:{Left:"left",Right:"right"},init:function(){}})})($elc,window,document);(function(a,d,b,c){a.classes.ControllerAPI=a.classes.Class.extend({$ela:null,$ela_old:null,$api:null,app:null,$:null,acceptableFuncArr:["_log","_addEventListener","_removeEventListener","_addTransOrder","_addTransDetail","_trackTrans","_closeSearch"],init:function(f){var e=this;e.app=f;e.$=e.app.config.get("$");e.$api=e.$({id:e.app.config.get("id")});e.$log.init(e.app,"ctrl.api",true)},startup:function(){var e=this,g,f;if(d.$ela!==c){if(e.$.isArray(d.$ela)){e.$ela_old=d.$ela.slice();a.state.set("clientDefinedAPIArray",e.$.extend(true,[],e.$ela_old))}else{if(a.state.get("clientDefinedAPIArray")!==c){e.$ela_old=a.state.get("clientDefinedAPIArray")}}}e.$ela={$:e.$,app:e.app,push:e.$.proxy(e.push,e),log:e.$.proxy(e._log,e)};if(e.$.isArray(d.$ela)||d.$ela===c){d.$ela=e.$ela;f=true}if(e.$.isArray(e.$ela_old)){for(g=0;g<e.$ela_old.length;g+=1){e.push(e.$ela_old[g])}}if(f){e.trigger(new e.$.Event(e.app.enums.EventType.API_ElicitLoad))}},push:function(g){var e=this,h;if(e.$.isArray(g)&&g.length>0){h=g.splice(0,1);if(!e.$.inArray(h)){throw {name:"elicit API Error",level:"Error",message:"Invalid function name.",htmlMessage:"Invalid function name."}}else{h=e[h];if(h!==c){h.apply(e,g)}}}},_log:function(g){try{d.console.log("[ELC.API-"+this.app.config.get("id")+"] "+g)}catch(f){}},_addEventListener:function(g,f){var e=this;e.$api.bind(g,f)},_removeEventListener:function(g,f){var e=this;e.$api.unbind(g,f)},_addTransOrder:function(n,j,k,q,r,o,h,p,g){var f=this,l,i;l=new a.classes.ModelEcomOrder(n,j,k,q,r,o,h,p,g);i=new f.$.Event(f.app.enums.EventType.TrackingAddTransOrder,l);i._data=l;f.$(f).trigger(i)},_addTransDetail:function(k,o,l,h,i,p,n){var f=this,j,g;j=new a.classes.ModelEcomDetail(k,o,l,h,i,p,n);g=new f.$.Event(f.app.enums.EventType.TrackingAddTransDetail);g._data=j;f.$(f).trigger(g)},_trackTrans:function(){var f=this,g;g=new f.$.Event(f.app.enums.EventType.TrackingTrackTrans);f.$(f).trigger(g)},_closeSearch:function(g){var f=this,h;h=f.$.Event(f.app.enums.EventType.SearchClose);f.__triggerInternalEventForApps(h,g)},__triggerInternalEventForApps:function(k,j){var f=this,g,l,h=a.state.get("appArr");if(j!==c){g=a.getApp(j);f.$(g.api).trigger(k)}else{for(l=0;l<h.length;l+=1){g=h[l];g.$(g.api).trigger(k)}}},trigger:function(g){var f=this;g.app=f.app;g.appId=f.app.config.get("id");g.context=f.app.config.get("context");g.locale=f.app.config.get("locale");f.$(f.app).trigger(g);f.$api.trigger(g)}})})($elc,window,document);(function(a,e,b,d){var c={config:null,tracking:null,query:null,visit:null,ui:null,state:null,api:null,enums:null,$:null,templates:null,_clientInput:null,startupCheckClientInputReady_id:-1,startupCheckClientInputReady_cnt:0,startupCheckClientInputReady_cnt_max:10*4,init:function(g){var f=this;f.enums=new a.classes.Enums();f.config=g;f.$=g.get("$");f.$log.init(f,f.config.get("id")+" ctrl.app",true)},initialize:function(){var f=this,g=f.config.get("appStartupDelay");if(g===d){g=-1}f.$log.log("initialize, elicit core version: "+f.config.get("versionFull")+", jQuery version: "+f.$.fn.jquery+(f.$.mobile===d?"":", jQuery mobile: "+f.$.mobile.version));f.api=new a.classes.ControllerAPI(this);f.state=new a.classes.ControllerAppState(this);f.tracking=new a.classes.ControllerTracking(this);if(!a.state.get("trackingLoadSent")){f.tracking.handleLoadEvent();a.state.set("trackingLoadSent",true)}f.api.startup();f.$log.log("isLearningMode:"+f.config.get("isLearningMode"));if(f.config.get("isLearningMode")){a.log(":: LEARNING MODE ::")}else{if(g>-1){setTimeout(function(){f.startup()},g)}else{f.startup()}}},startup:function(){var f=this,g=f.startupCheck();if(!g){return}f.$log.log("startup");f.query=new a.classes.ControllerQuery(this);f.visit=new a.classes.ControllerVisit(this);f.templates=new a.classes.ViewTemplates(this);f.assignUI();f.bindEvents();f.ui.appReady()},startupCheck:function(){var f=this,g,h=false;if(f.config.get("hasClientInput")){f.$log.log("startupCheck");f._clientInput=f.$(f.config.get("clientSearchInputFieldSelector"));if(f._clientInput.length>0){g=f._clientInput.is(":focus");if(g&&a.util.isiTouch()){f._clientInput.bind("blur",f.$.proxy(f.startupCheckHandleBlur,f));h=false}else{h=true}}else{h=false;f.startupCheckClientInputReady()}}else{h=true}return h},startupCheckHandleBlur:function(){var f=this;f._clientInput.unbind("blur",f.$.proxy(f.handleInputBlur,f));f.startup()},startupCheckClientInputReady:function(){var f=this;f.startupCheckClientInputReady_cnt+=1;f.$log.log("startupCheckClientInputReady "+f.startupCheckClientInputReady_cnt);if(f.startupCheckClientInputReady_cnt>=f.startupCheckClientInputReady_cnt_max){a.log("startupCheckClientInputReady FAIL");return}if(f.$(f.config.get("clientSearchInputFieldSelector")).length>0){f.$log.log("startupCheckClientInputReady found!");f.startupCheck()}else{f.startupCheckClientInputReady_id=setTimeout(function(){f.startupCheckClientInputReady()},250)}},assignUI:function(){var f=this;f.ui=new a.classes.ControllerUI(f);f.ui.setup();f.ui.startup()},bindEvents:function(){var f=this;f.$(f.ui).bind(f.enums.EventType.QuerySend,f.$.proxy(f.tracking.handleQuerySend,f.tracking)).bind(f.enums.EventType.QueryCancel,f.$.proxy(f.query.cancel,f.query)).bind(f.enums.EventType.VisitResult,f.$.proxy(f.tracking.handleVisitResult,f.tracking)).bind(f.enums.EventType.VisitSearchAll,f.$.proxy(f.tracking.handleVisitSearchAll,f.tracking)).bind(f.enums.EventType.SearchClose,f.$.proxy(f.tracking.handleTrackSearchClose,f.tracking));f.$(f.query).bind(f.enums.EventType.QueryResponse,f.$.proxy(f.handleQueryResponse,f));f.$(f.tracking).bind(f.enums.EventType.QuerySend,f.$.proxy(f.query.send,f.query)).bind(f.enums.EventType.VisitResult,f.$.proxy(f.visit.handleVisitResult,f.visit)).bind(f.enums.EventType.VisitSearchAll,f.$.proxy(f.visit.handleVisitSearchAll,f.visit));f.$(f.visit).bind(f.enums.EventType.VisitSearchAll,f.$.proxy(f.ui.triggerSubmit,f.ui))},handleQueryResponse:function(g){var f=this;f.ui.handleQueryResponse(g);f.tracking.handleQueryResponse(g)}};a.classes.ControllerApp=a.classes.Class.extend(c)})($elc,window,document);(function(a,e,b,d){var c={defaults:{isUnloadInProgress:false,isVisitInProgress:false,isResultsViewOpen:false,isResultSelected:false,matchCount:0,inputHint:"",searchWrapperElement:null},_attributes:null,$:null,init:function(g,h){var f=this;f.app=g;f.$=f.app.config.get("$");f.$log.init(f.app,f.app.config.get("id")+" ctrl.app.state",true);f.attributes={};if(h===d){h={}}f._attributes=f.$.extend({},f.defaults,h);f.bindEvents();f.handleWindowResize()},get:function(f){return this._attributes[f]},set:function(f,g){this._attributes[f]=g},bindEvents:function(h){var f=this,g=f.app.config.get("namespace");if(h===d){h=true}f.$(e).unbind("resize."+g,f.$.proxy(f.handleWindowResize,f));if(h){f.$(e).bind("resize."+g,f.$.proxy(f.handleWindowResize,f))}},handleWindowResize:function(){var f=this,i=f.$(e).width(),h,g=false;if(f.app.config.get("isResponsive")){if(i<=f.app.config.get("responsiveMobileAtWidth")&&f.app.config.get("platform")==f.app.enums.PlatformType.Site){f.app.config.set("platform",f.app.enums.PlatformType.Mobile);f.app.config.set("inputFitMinFont",f.app.config.get("inputFitMinFont_mobile"));g=true}else{if(i>f.app.config.get("responsiveMobileAtWidth")&&f.app.config.get("platform")==f.app.enums.PlatformType.Mobile){f.app.config.set("platform",f.app.enums.PlatformType.Site);f.app.config.set("inputFitMinFont",f.app.config.get("inputFitMinFont_site"));g=true}}if(g){h=new f.$.Event(f.app.enums.EventType.ResponsiveChange,{platform:f.app.config.get("platform")});f.trigger(h);f.app.api.trigger(f.$.Event(f.app.enums.EventType.API_ResponsiveChange,{platform:f.app.config.get("platform")}))}}},bind:function(h,g){var f=this;f.$(f).bind(h,g)},unbind:function(h,g){var f=this;f.$(f).unbind(h,g)},trigger:function(g){var f=this;f.$(f).trigger(g)},isMobile:function(){var f=this,g=f.app.config.get("isMobile");if(f.app.config.get("isResponsive")){if(f.app.config.get("platform")==f.app.enums.PlatformType.Mobile){g=true}}return g}};a.classes.ControllerAppState=a.classes.Class.extend(c)})($elc,window,document);(function(a,e,b,d){var c={app:null,view:null,searchHint:null,$searchHint:null,$inputbox:null,$clientInputBox:null,$submitBtn:null,lastQuery:"",$form:null,allowSubmit:false,blurDelay_id:-1,blurDelay:200,isClientInputAndElicitInputDiff:false,hintConfig:null,poll_id:-1,pollInterval_ms:2000,curResponse:null,$hintDiv:null,hasUserQueriedDuringSearchSession:false,keystrokesForSearchSession:0,refinementsForSearchSession:0,backspacingInProcess:false,queriesSentThisSearchSession:null,lastResponse:null,isQueryInProgress:false,init:function(g){var f=this;f.app=g;f.$log.init(f.app,f.app.config.get("id")+" ctrl.input",false)},setup:function(){var f=this,g;f.$clientInputBox=f.$(f.app.config.get("clientSearchInputFieldSelector"));if(f.app.config.get("clientSearchInputFieldSelector")!=f.app.config.get("elcSearchInputFieldSelector")&&f.$(f.app.config.get("clientSearchInputFieldSelector")).length>0){f.isClientInputAndElicitInputDiff=true}g=f.$clientInputBox.val();if(g==f.app.config.get("defaultSearchInputText")||g==f.$clientInputBox.attr("placeholder")||g==f.$clientInputBox.attr("title")){g=""}f.view=new a.classes.ViewInput(f.app);f.view.setup();f.view.startup();f.$form=f.$(f.app.config.get("searchFormSelector")).eq(0);f.$inputbox=f.$(f.app.config.get("elcSearchInputFieldSelector")).eq(0);f.$submitBtn=f.$(f.app.config.get("elcSearchInputButtonSelector")).eq(0);f.setupPlugin();f.setupEvents();f.resetQueryAnalyticHelpers();if(a.util.isIE6()){a.util.redrawElement(f.$form)}if(f.app.config.get("isClientInputBoxFocusedOnStart")){f.$inputbox.focus();if(a.util.bodyTagHas("elc-ie")){setTimeout(function(){f.$inputbox.focus()},0)}}if(g===""){g=f.$inputbox.val()}if(!a.util.stringIsNullOrEmpty(g)){setTimeout(function(){f.searchHint.setKey(g)},1)}},setupPluginConfig:function(){var f=this;f.hintConfig={resultNum:0,enterClearsHint:false,hasClearBtn:f.app.config.get("hasInputClearBtn"),spinnerConfig:f.app.config.get("spinnerConfig"),useHintPlaceholderInput:f.app.config.get("useInputPlaceholder"),useInputFit:f.app.config.get("useInputFit"),inputFitMinFont:f.app.config.get("inputFitMinFont"),supressFocusAnimation:f.app.config.get("supressFocusAnimation"),elicitApp:f.app}},setupPlugin:function(){var f=this;f.setupPluginConfig();f.$inputbox.elcHint(f.hintConfig);f.searchHint=f.$inputbox.data("plugin_elcHint");f.$searchHint=f.$form.find(".elc-hint-container");f.$hintDiv=f.$form.find(".elc-hint-match");f.$inputbox=f.$(f.app.config.get("elcSearchInputFieldSelector"))},setupEvents:function(h){var f=this,g=f.app.config.get("namespace");if(h===d){h=true}f.$inputbox.unbind(f.searchHint.HINT_EVENT,f.$.proxy(f.handleInputHint,f)).unbind(f.searchHint.CLEAR_EVENT,f.$.proxy(f.handleInputCleared,f)).unbind(f.searchHint.KEY_NAV_EVENT,f.$.proxy(f.handleKeyNav,f)).unbind(f.searchHint.ESCAPE_EVENT,f.$.proxy(f.handleEscape,f)).unbind(f.searchHint.CANCEL_EVENT,f.$.proxy(f.handleSearchHintCancel,f)).unbind("focus",f.$.proxy(f.handleInputFocus,f)).unbind("blur",f.$.proxy(f.handleBlur,f));f.$form.unbind("submit",f.$.proxy(f.handleSubmit,f));f.$submitBtn.unbind("click",f.$.proxy(f.handleSubmitBtnClick,f));f.app.state.unbind(f.app.enums.EventType.ResponsiveChange,f.$.proxy(f.handleResponsiveChanged,f));f.$(e).unbind("pageshow."+g,f.$.proxy(f.handlePageShow,f));f.$(f.app.api).unbind(f.app.enums.EventType.SearchClose,f.$.proxy(f.handleBlurAndClose,f));if(h){f.$inputbox.bind(f.searchHint.HINT_EVENT,f.$.proxy(f.handleInputHint,f)).bind(f.searchHint.CLEAR_EVENT,f.$.proxy(f.handleInputCleared,f)).bind(f.searchHint.KEY_NAV_EVENT,f.$.proxy(f.handleKeyNav,f)).bind(f.searchHint.ESCAPE_EVENT,f.$.proxy(f.handleEscape,f)).bind(f.searchHint.CANCEL_EVENT,f.$.proxy(f.handleSearchHintCancel,f)).bind("focus",f.$.proxy(f.handleInputFocus,f)).bind("blur",f.$.proxy(f.handleBlur,f));f.$form.bind("submit",f.$.proxy(f.handleSubmit,f));f.$submitBtn.bind("click",f.$.proxy(f.handleSubmitBtnClick,f));f.app.state.bind(f.app.enums.EventType.ResponsiveChange,f.$.proxy(f.handleResponsiveChanged,f));f.$(e).bind("pageshow."+g,f.$.proxy(f.handlePageShow,f));f.$(f.app.api).bind(f.app.enums.EventType.SearchClose,f.$.proxy(f.handleBlurAndClose,f))}},handleInputFocus:function(){var f=this,g;f.$log.log("elicit.controller.input : handleInputFocus ");clearTimeout(f.blurDelay_id);f.setupPollingFailsafe();if(f.app.config.get("onInputFocusTriggersViewOpen")){if(!f.app.state.get("isResultsViewOpen")&&f.$.trim(f.lastQuery)!==""){f.sendQuery(f.lastQuery,d,f.keystrokesForSearchSession,f.refinementsForSearchSession)}}g=new a.classes.EventInput(f.$,f.app.enums.EventType.InputFocus);f.triggerSelf(g)},handleSubmit:function(h){var f=this,g=f.handleSubmitCheck(h);if(f.isClientInputAndElicitInputDiff){f.$clientInputBox.val(f.$inputbox.val())}f.$log.log("handleSubmit allow:"+g);return g},handleSubmitCheck:function(h){var f=this,g=true,j;j=f.$.trim(f.$inputbox.val()).length===0;f.$log.log("input controller handleSubmit canFormSubmit:"+f.app.config.get("canFormSubmit")+" isEmpty:"+j);if(j||!f.app.config.get("canFormSubmit")){f.$log.log("stop the submit");g=false;try{h.preventDefault();h.stopPropagation();h.stopImmediatePropagation()}catch(i){}}return g},handleInputHint:function(h){this.$log.log("handleInputHint ");var f=this,l=f.getXssSafeInputValue(),j,i,k,g;if(l===false){f.searchHint.showSpinner(false);return}f.$log.log("handleInputHint val:"+l+" lastQuery:"+f.lastQuery);if(l==f.lastQuery){f.searchHint.showSpinner(false);if(f.$inputbox.val()!==""){f.searchHint.showClearBtn(true)}}else{f.detectRefinement(l,f.lastQuery);f.keystrokesForSearchSession+=1;if(l===""&&f.$inputbox.val()===""){g=new f.$.Event(f.searchHint.CLEAR_EVENT);g.inputHadValue=f.lastQuery!=="";f.handleInputCleared(g);f.triggerCloseEvent()}else{j=false;i=f.getHintCur();if(f.curResponse!==null&&f.lastQuery!==""&&f.lastQuery.length<l.length&&f.curResponse.d.dm===1&&f.curResponse.d.rr===0&&i.toLowerCase().indexOf(l.toLowerCase())===0){j=true}f.$log.log("querysend? isQuerySameAsHint:"+j+" curResponse:"+this.curResponse);if(f.curResponse===null||true){f.sendQuery(l,h?h.bolInputFilledWithHint:false,f.keystrokesForSearchSession,f.refinementsForSearchSession,j)}else{f.searchHint.showSpinner(false);if(!f.app.config.get("isMobile")&&h!==d&&h.bolInputFilledWithHint){k=new f.$.Event();k.key=this.searchHint.KEY_NAV_DOWN;k.isInputFillWithHint=true;f.handleKeyNav(k)}}}if(f.isClientInputAndElicitInputDiff&&f.$clientInputBox.length>0){f.$clientInputBox.val(l)}}f.hasUserQueriedDuringSearchSession=true;f.lastQuery=l},sendQuery:function(g,j,k,l,h){var f=this,m=new a.classes.EventQuery(f.$,f.app.enums.EventType.QuerySend,g,d,j,k,l,h);f.$log.log("send query "+m);f.triggerSelf(m);f.isQueryInProgress=true},triggerCloseEvent:function(h){var f=this,g;f.$log.log("trigger close event "+h);if(h){f.triggerSearchClose()}g=new a.classes.EventInput(f.$,f.app.enums.EventType.ViewResultClose);f.triggerSelf(g)},triggerSearchClose:function(){var f=this,j="",i="",h,k;if(!f.app.state.get("isResultsViewOpen")||f.app.state.get("isVisitInProgress")||f.app.state.get("isUnloadInProgress")){return}f.$log.log("trigger search close _.app.state.get(isVisitInProgress)"+f.app.state.get("isVisitInProgress")+" _.app.state.get(isUnloadInProgress)"+f.app.state.get("isUnloadInProgress"));if(f.lastResponse!==d&&f.lastResponse!==null){i=f.lastResponse.d.i;j=f.getKeywordCur()}try{h={input:i,keyword:j,queryNum:f.keystrokesForSearchSession,refinementNum:f.refinementsForSearchSession,analyticsEventType:f.app.enums.AnalyticsEventType.SearchClose,totalResults:f.app.state.get("matchCount"),resultsFound:f.app.state.get("matchCount")>0};k=f.$.Event(f.app.enums.EventType.SearchClose,h);f.triggerSelf(k)}catch(g){}},resetQueryAnalyticHelpers:function(){var f=this;f.hasUserQueriedDuringSearchSession=false;f.keystrokesForSearchSession=0;f.refinementsForSearchSession=0;f.queriesSentThisSearchSession={};f.backspacingInProcess=false;f.lastResponse=null},handleInputEnterKey:function(i){var f=this,g=this.handleSubmitCheck(i),h,j,k,l=false,n=false,m=f.$.trim(f.$inputbox.val()).length===0;if(g){if(f.curResponse!==null&&f.curResponse.d.i==f.$inputbox.val()){l=true}if(f.curResponse!==null&&f.curResponse.d.cs!==d){n=true}if((l&&!n)||(f.app.config.get("allowEnterKeyToSubmitFullSearch")&&!f.app.state.get("isResultSelected"))){f.triggerSubmitWithTracking();return false}}if(!m){h=f.$.Event(f.app.enums.EventType.InputNav);h.input=f.$inputbox.val();if(f.searchHint){j=f.searchHint.getHint();k=f.$inputbox.val();if(j!==d&&j!==null){j=j.toLowerCase()}k=k.toLowerCase()}h.bolHintWillFillInput=j!==""&&j!=k;f.$log.log("bolHintWillFillInput:"+h.bolHintWillFillInput+" h_hint:"+j);h.key=f.app.enums.KeyType.Enter;h.input=j!==""?j:f.$inputbox.val();f.triggerSelf(h)}return false},handleInputCleared:function(){var f=this,i=f.app.state.get("isResultsViewOpen"),g=new a.classes.EventQuery(f.$,f.app.enums.EventType.QueryCancel),h=new a.classes.EventInput(f.$,f.app.enums.EventType.InputClear,f.lastQuery);f.$log.log("handleInputCleared");f.$(f).trigger(g);f.$(f).trigger(h);if(i){f.app.api.trigger(f.$.Event(f.app.enums.EventType.API_InputClear,{input:f.lastQuery,keyword:f.getKeywordCur(),totalResults:f.app.state.get("matchCount")}))}f.lastQuery="";f.isQueryInProgress=false;if(f.app.config.get("doesInputClearTriggerEscape")){f.handleEscape()}},handleBlurAndClose:function(g){var f=this;f.triggerBlurAndClose()},triggerBlurAndClose:function(){var f=this;if(f.$inputbox.is(":focus")){f.$inputbox.blur()}if(f.app.state.get("isResultsViewOpen")){f.handleEscape(d,d,f.app.state.get("isResultsViewOpen"),true)}},handleEscape:function(i,j,g,l){var f=this,h=f.searchHint.getHint(),k;f.$log.log("handleEscape hasResults:"+j+" areResultsOpen:"+g+" triggerAPI event:"+l);if(g===d&&f.$inputbox.val().length>0){if(h===""||h==f.$inputbox.val()){f.lastQuery="";f.searchHint.reset(true)}else{f.searchHint.setHint("");f.app.state.set("inputHint","")}}else{if(g===false||g===d){f.lastQuery="";f.searchHint.reset(true)}else{if(g&&f.$inputbox.val().length>0){f.searchHint.setHint("");f.app.state.set("inputHint","")}}}k=new a.classes.EventQuery(f.$,f.app.enums.EventType.QueryCancel);f.triggerSelf(k);l=true;f.triggerCloseEvent(l);f.handleQueryCancel();f.$log.log("handleescape lastQuery:"+f.lastQuery)},handleSearchHintCancel:function(){var f=this,g=new a.classes.EventQuery(f.$,f.app.enums.EventType.QueryCancel);f.$(f).trigger(g);f.handleQueryCancel()},handleKeyNav:function(g){var f=this,h=f.$.Event(f.app.enums.EventType.InputNav);f.$log.log("handleKeyNav:"+g.key);switch(g.key){case f.searchHint.KEY_NAV_UP:h.key=f.app.enums.KeyType.Up;break;case f.searchHint.KEY_NAV_DOWN:h.key=f.app.enums.KeyType.Down;break;case f.searchHint.KEY_NAV_LEFT:h.key=f.app.enums.KeyType.Left;break;case f.searchHint.KEY_NAV_RIGHT:h.key=f.app.enums.KeyType.Right;break;case f.searchHint.KEY_NAV_ENTER:f.handleInputEnterKey(g);break}f.triggerSelf(h)},handleSubmitBtnClick:function(h){var f=this,g=this.handleSubmitCheck(h);f.$log.log("handleSubmitBtnClick:"+h+" allowsubmit:"+g);if(g){f.triggerSubmitWithTracking()}return false},triggerSubmitWithTracking:function(){var f=this,g;f.app.state.set("isVisitInProgress",true);setTimeout(function(){g=f.$.Event(f.app.enums.EventType.InputNav);g.key=f.app.enums.KeyType.Submit;g.input=f.$inputbox.val();g.keyword=f.getKeywordCur();f.triggerSelf(g)},0)},handleQueryResponse:function(g){var f=this,i=false,h,j=f.getXssSafeInputValue(),k=a.util.getXssSafeValue(f.$,g.d.i);f.isQueryInProgress=false;if(g.d.i!==d&&j!==false&&k!==false&&j.indexOf(k)!==0){f.$log.log("input rejecting response getXssSafeInputValue():'"+f.getXssSafeInputValue()+"' i:'"+g.d.i+"'");i=false}else{f.curResponse=g;f.lastResponse=g;h=f.getHintCur();f.$log.log("handleQueryResponse input SET HINT : '"+h+"' inputbox: '"+f.getXssSafeInputValue()+"'");f.searchHint.setHint(h);f.app.state.set("inputHint",h);i=true}return i},handleQueryCancel:function(){var f=this;f.curResponse=null;f.searchHint.showSpinner(false);f.isQueryInProgress=false},triggerSubmit:function(){var f=this;f.$log.log("input triggerSubmit");f.allowSubmit=true;f.$form.submit()},triggerSelf:function(g){var f=this;f.$(f).trigger(g)},handleInputSet:function(g){var f=this;f.searchHint.setKey(g.val,g.bolBypassChangeEvent)},handleVisible:function(){var f=this;f.searchHint.refreshViewWidths()},setupPollingFailsafe:function(){return},handlePollInterval:function(){this.handleInputCheckForChange()},handleInputCheckForChange:function(){var f=this.$inputbox.val();if(f!=this.lastQuery){this.$log.log("handleInputCheckForChange! val:"+this.getXssSafeInputValue()+" lastQuery:"+this.lastQuery);this.handleInputHint()}},getHintCur:function(){var f=this,k="",l,j,g=f.curResponse,i;if(f.curResponse!==null){k="";i=g.d.h===d||g.d.h===null?"":g.d.h;l=g.d.hs===d||g.d.hs===null?"":g.d.hs;j=g.d.he===d||g.d.he===null?"":g.d.he;if(l===f.$inputbox.val()){l=f.$inputbox.val()}k=l.toLowerCase()+j.toLowerCase()}return k},getKeywordLast:function(){var f=this;return f.lastResponse!==null&&f.lastResponse.d!==d&&f.lastResponse.d.termMatched!==d?f.lastResponse.d.termMatched:""},getKeywordCur:function(){var f=this;return f.curResponse!==null&&f.lastResponse.d!==d&&f.curResponse.d.termMatched!==d?f.curResponse.d.termMatched:""},handleBlur:function(){var f=this;f.$log.log("handleBlur");f.setupPollingFailsafe(false);clearTimeout(f.blurDelay_id);f.blurDelay_id=setTimeout(function(){f.handleBlurDelayed()},f.blurDelay);f.triggerSelf(new a.classes.EventInput(f.$,f.app.enums.EventType.InputBlur))},handleBlurDelayed:function(){var f=this,g=true;if(f.app.state.isMobile()&&f.$inputbox.val()!==""){g=false}if(f.isQueryInProgress){g=false}if(!f.hasUserQueriedDuringSearchSession){g=false}if(f.app.state.get("isResultsViewOpen")){g=false}if(g){f.$log.log("trigger search close from blur delay");f.triggerSearchClose()}return},fillInputWithHint:function(){this.searchHint.fillInputWithHint()},handleResponsiveChanged:function(f){this.$log.log("handleResponsiveChanged e.platform:"+f.platform);this.searchHint.refreshViewWidths()},detectRefinement:function(f,h){var g=false;if(f.length<h.length){if(h.indexOf(f)===0){if(!this.backspacingInProcess){this.backspacingInProcess=true;g=true}}else{g=true}}else{if(f.indexOf(h)===0){if(this.backspacingInProcess){this.backspacingInProcess=false;g=true}}}if(g&&(this.backspacingInProcess||(this.queriesSentThisSearchSession[f]===d&&f!==""))){this.refinementsForSearchSession+=1}this.queriesSentThisSearchSession[f]=1},handlePageShow:function(){if(a.util.isiTouch()){this.searchHint.reset()}},getXssSafeInputValue:function(){var f=this,g;if(f.$inputbox!==null){g=a.util.getXssSafeValue(f.$,f.$inputbox.val())}return g}};a.classes.ControllerInput=a.classes.Class.extend(c)})($elc,window,document);(function(a,e,b,d){var c={app:null,$:null,resultData:null,matchCur:null,activeRequest:null,request_id:0,request_id_parsed:0,cachedResults:null,curResponse:null,queryServicePath:null,curRequestInEvent:null,sendAPI_ResultEvent_id:-1,sendAPI_ResultEvent_event:null,init:function(g){var f=this;f.app=g;f.$=f.app.config.get("$");f.$log.init(f.app,f.app.config.get("id")+" ctrl.query",false);f.initVars();f.queryServicePath=f.app.config.get("protocol")+f.app.config.get("serviceQuery");f.bindEvents()},initVars:function(){var f=this;f.cachedResults={}},bindEvents:function(){var g=this,f=g.$(g);f.unbind(g.app.enums.EventType.Query).bind(g.app.enums.EventType.QuerySend,g.$.proxy(g.send,g)).bind(g.app.enums.EventType.QueryCancel,g.$.proxy(g.cancel,g))},send:function(i){var f=this,g,j,h;f.cancel(false);f.curRequestInEvent=i;f.app.api.trigger(f.$.Event(f.app.enums.EventType.API_QueryKeystroke,{input:i.i,term:i.i}));f.resetAPI_ResultEvent();g=f.cacheGet(i.i);if(g){f.$log.log("query '"+i.i+"' IS CACHED");f.handleResponse(g,"success",{},true);return}j=f.setNextRequestId();h={q:i.i,r:f.request_id,c:f.app.config.get("context"),sn:f.app.config.get("site"),su:f.app.config.get("username"),l:f.app.config.get("locale"),p:f.app.config.get("platform"),f:e.location.toString()};if(!f.app.config.get("sendQueryWithContext")){delete h.c}f.$log.log('sendQuery: "'+h.q+'" requestnum: '+h.r);f.activeRequest=f.$.ajax({url:f.queryServicePath,data:h,context:b.body,dataType:"jsonp",success:f.$.proxy(f.handleResponse,f),error:f.$.proxy(f.handleError,f),cache:false,statusCode:{500:f.$.proxy(f.handleError,f)}})},handleError:function(h,i,g){var f=this;f.$log.log("!!! query response error");f.handleResponse()},handleResponse:function(i,l,k,j){var f=this,h=new a.classes.ModelResult(f.app,i),g,m="";f.$log.log("handleResponse data requestnum: "+h.r+"  getRequestId:"+f.getRequestId()+" getLastRequestIdParsed():"+f.getLastRequestIdParsed()+" request_id_parsed:"+f.request_id_parsed);if(j===d){j=false}if(h.r<f.getRequestId()||f.curRequestInEvent===null){if(!j){f.cacheAdd(h.i,h);f.$log.log(" exiting old query response after cache add: '"+h.i+"'");return}}f.resultData=h;f.setLastRequestIdParsed(h.r);if(i!==d&&i!==null){if(i.cx!==d&&f.app.config.get("context")!==i.cx){f.app.config.set("context",i.cx)}if(i.lc!==d&&f.app.config.get("locale")!==i.lc){f.app.config.set("locale",i.lc);f.app.config.set("imgBasePath",f.app.config.replaceVariableValue(f.app.config.get("imgBasePath_raw")))}if(i.i!==d){m=i.i}if(i.cs!==d){f.$(i.cs).each(function(n,o){g=new a.classes.ModelCategory(f.app,o);g.fixImagePath(f.app.config.get("protocol"),f.app.config.get("imgBasePath"),f.app.config.get("imgBlankPath"));h.catArr.push(g)})}}f.curResponse=new a.classes.EventQuery(f.$,f.app.enums.EventType.QueryResponse,h.i,h,f.curRequestInEvent?f.curRequestInEvent.onResponseSelectFirstResult:false);f.$(f).trigger(f.curResponse);if(!j){f.cacheAdd(h.i,h)}f.activeRequest=null;f.curRequestInEvent=null;if(h.catArr===null||h.catArr===d||h.catArr.length===0){f.sendAPI_ResultEvent(f.$.Event(f.app.enums.EventType.API_ResultNone,{input:m,totalResults:0}))}else{f.sendAPI_ResultEvent(f.$.Event(f.app.enums.EventType.API_ResultHasResults,{input:m,term:h.termMatched,keyword:h.termMatched,totalResults:f.app.state.get("matchCount"),num:f.app.state.get("matchCount")}))}},sendAPI_ResultEvent:function(h){var f=this,g=f.app.config.get("supressAPI_ResultEventForMilliSeconds");f.resetAPI_ResultEvent();f.sendAPI_ResultEvent_event=h;f.sendAPI_ResultEvent_id=setTimeout(function(){if(f.sendAPI_ResultEvent_event!==null){f.app.api.trigger(f.sendAPI_ResultEvent_event);f.sendAPI_ResultEvent_event=null}},g)},resetAPI_ResultEvent:function(){var f=this;clearTimeout(f.sendAPI_ResultEvent_id);f.sendAPI_ResultEvent_id=-1;f.sendAPI_ResultEvent_event=null},cancel:function(g){var f=this;if(g===d){g=true}if(g){f.resetAPI_ResultEvent()}f.curRequestInEvent=null},cacheAdd:function(h,g){var f=this,i=f.cachedResults[h];if(i===d){f.cachedResults[h]=g}},cacheGet:function(g){var f=this;return f.cachedResults[g]},getResultData:function(){var f=this;return f.resultData},overrideResultDataHint:function(g){var f=this;f.resultData.termHint=g;f.resultData.termHintProper=g},setNextRequestId:function(){var f=this;f.request_id+=1;return f.request_id},getRequestId:function(){var f=this;return f.request_id},setLastRequestIdParsed:function(g){var f=this;f.request_id_parsed=g},getLastRequestIdParsed:function(){var f=this;return f.request_id_parsed}};a.classes.ControllerQuery=a.classes.Class.extend(c)})($elc,window,document);(function($elc,window,document,undefined){var self={app:null,request_id:0,activeRequest:null,recordSent:false,onloadSent:false,visitEvent:null,timeoutId:-1,timeoutMS:1000,onCompleteTimeoutMS:200,trackingService_url:null,timeQueryFirst:-1,timeQueryLast:-1,bolSearchAllHasBeenTracked:false,lastVisitTimestamp:0,lastVisitEvent:null,lastQueryEvent:null,trackingPlatforms:null,trackingEcom:null,isExitLinkTargetBlank:false,init:function(app){var _=this;_.app=app;_.$log.init(_.app,_.app.config.get("id")+" ctrl.track",false);_.trackingService_url=_.app.config.get("protocol")+_.app.config.get("serviceTracking");if($elc.classes.ControllerTrackingPlatforms!==undefined){_.trackingPlatforms=new $elc.classes.ControllerTrackingPlatforms(app)}if($elc.classes.ControllerTrackingEcom!==undefined){_.trackingEcom=new $elc.classes.ControllerTrackingEcom(app)}},handleLoadEvent:function(){var _=this,requestURL,data;if(_.onloadSent||!_.app.config.get("isTrackingEnabled")){return}_.onloadSent=true;requestURL=_.trackingService_url;data={t:2,f:window.location.toString(),r:document.referrer,s:_.app.config.get("site"),l:_.app.config.get("locale"),c:_.app.config.get("context"),p:_.app.config.get("platform"),at:_.app.config.get("appType"),ai:_.app.config.get("id")};data.f=escape(data.f);data.r=escape(data.r);_.$log.log("sendOnLoadEvent "+data.f);_.activeRequest=_.$.ajax({url:requestURL,data:data,context:document.body,dataType:"jsonp",success:_.$.proxy(_.handleTrackLoadResult,_),cache:false});if(_.trackingEcom!==null){_.trackingEcom.startup()}},handleTrackLoadResult:function(data){var _=this;_.$log.log("handleTrackLoadResult: "+(data!==undefined&&data!==null?data.r:"error"));_.activeRequest=null},handleVisitResult:function(e){var _=this,apiEvent;apiEvent={term:e.keyword,keyword:e.keyword,category:e.category,title:e.title,titleSub:e.titleSub,url:e.url,input:e.input,totalResults:e.totalResults,indexOfResult:e.indexOfResult};if(apiEvent.keyword===""){apiEvent.keyword=e.input;apiEvent.term=e.input}_.app.api.trigger(_.$.Event(_.app.enums.EventType.API_ResultClick,apiEvent));_.handleVisitRecord(e)},handleVisitSearchAll:function(e){var _=this,$form,$input,$termTag,$catTag,bolBypass=_.bolSearchAllHasBeenTracked;if(_.app.config.get("isSiteSearchVisitUrlAppendEnabled")){$form=_.$(_.app.config.get("searchFormSelector"));$input=_.$(_.app.config.get("elcSearchInputFieldSelector"));if($form.find("#"+_.app.config.get("siteSearchVisitTermTag")).length===0){$form.append("<input type='hidden' name='"+_.app.config.get("siteSearchVisitTermTag")+"' id='"+_.app.config.get("siteSearchVisitTermTag")+"' />");$form.append("<input type='hidden' name='"+_.app.config.get("siteSearchVisitCategoryTag")+"' id='"+_.app.config.get("siteSearchVisitCategoryTag")+"' />")}$termTag=$form.find("#"+_.app.config.get("siteSearchVisitTermTag"));$catTag=$form.find("#"+_.app.config.get("siteSearchVisitCategoryTag"));$termTag.val($input.val());$catTag.val(_.app.config.get("siteSearchVisitCategoryTag_NoResultsValue"))}if(e.input===""){bolBypass=true}if(!bolBypass){_.app.api.trigger(_.$.Event(_.app.enums.EventType.API_ResultSiteSearch,{term:e.input,keyword:e.keyword,input:e.input,totalResults:e.totalResults,shiftToMoreResults:e.shiftToMoreResults===true?true:false}))}_.handleVisitRecord(e,bolBypass);_.bolSearchAllHasBeenTracked=e.shiftToMoreResults},handleVisitRecord:function(e,bolBypass){var _=this,isSame,d,t0,t1,t2,keystrokeNum,refinementNum,analyticsEventType,requestURL,now=(new Date()).getTime();_.$log.log("handleVisitRecord bolBypass:"+bolBypass);_.visitEvent=e;if(bolBypass===undefined){bolBypass=false}_.isExitLinkTargetBlank=false;if(e!==null&&_.lastVisitEvent!==null&&e.compare!==undefined){isSame=e.compare(_.lastVisitEvent);if(isSame){_.$log.log("bypassing visit - same as last event");bolBypass=true}}if(!_.app.config.get("isTrackingEnabled")||bolBypass){_.$log.log("bypassing visit");_.$(_).trigger(e);return}_.cancel();clearTimeout(_.timeoutId);d=new Date();t0=d.getTime();t1=-1;t2=-1;if(_.timeQueryFirst>-1){t1=Math.round((t0-_.timeQueryFirst)/1000);if(_.timeQueryLast>-1){t2=Math.round((t0-_.timeQueryLast)/1000)}}keystrokeNum=-1;refinementNum=-1;analyticsEventType=-1;if(_.lastQueryEvent!==null){keystrokeNum=_.lastQueryEvent.queryNum;refinementNum=_.lastQueryEvent.refinementNum}if(e!==undefined){if(e.analyticsEventType!==undefined){analyticsEventType=e.analyticsEventType}else{switch(e.fullEventType){case _.app.enums.EventType.VisitResult:analyticsEventType=_.app.enums.AnalyticsEventType.ResultClick;break;case _.app.enums.EventType.VisitSearchAll:analyticsEventType=_.app.enums.AnalyticsEventType.MoreResultsClick;break}}}_.request_id+=1;requestURL=_.trackingService_url;d={};d.t=1;d.ur=e.url;d.s=_.app.config.get("site");d.un=_.app.config.get("username");d.cx=_.app.config.get("context");d.l=_.app.config.get("locale");d.k=e.keyword;d.i=e.input;d.f=window.location.toString();d.rf=e.resultsFound?1:0;d.sm=e.shiftToMoreResults?1:0;d.ss=e.shiftToSiteSearch?1:0;d.ct=e.category;d.rr=document.referrer;d.t1=t1;d.t2=t2;d.p=_.app.config.get("platform");d.at=_.app.config.get("appType");d.ai=_.app.config.get("id");d.ae=analyticsEventType;d.ks=keystrokeNum;d.rn=refinementNum;d.ur=escape(d.ur);d.f=escape(d.f);d.rr=escape(d.rr);_.$log.log("ControllerTracking handleVisitRequest:"+e.keyword+" url:"+e.url+" t1:"+t1+" t2:"+t2+" shiftToSiteSearch:"+e.shiftToSiteSearch+" analyticsEventType:"+analyticsEventType+" url"+requestURL);_.activeRequest=_.$.ajax({url:requestURL,data:d,context:document.body,dataType:"jsonp",success:_.$.proxy(_.handleTrackVisitResult,_),cache:false});_.recordSent=true;_.lastVisitTimestamp=now;_.lastVisitEvent=e;if(e.url.indexOf("target=_blank")>-1){_.isExitLinkTargetBlank=true;_.handleTrackVisitResult()}else{_.timeoutId=setTimeout(function(){_.handleTrackVisitResult()},_.timeoutMS)}},handleTrackVisitResult:function(data){var _=this,requestWasActive=_.activeRequest!==null;_.$log.log("handleTrackResult: "+(data!==undefined&&data!==null?data.r:"timedout"));clearTimeout(_.timeoutId);_.timeoutId=-1;_.activeRequest=null;if(requestWasActive){_.handleExternalTracking()}},handleQuerySend:function(e){var _=this,d=new Date();_.$log.log("handleTracking Query Send");_.lastQueryEvent=e;if(_.timeQueryFirst==-1){_.timeQueryFirst=d.getTime()}_.$log.log("timeQueryFirst:"+_.timeQueryFirst);if(e){_.$(_).trigger(e)}},handleQueryResponse:function(){var d=new Date(),_=this;_.timeQueryLast=d.getTime();_.$log.log("timeQueryFirst:"+_.timeQueryFirst+" timeQueryLast:"+_.timeQueryLast)},handleTrackResultClose:function(){var _=this;_.$log.log("handleTrackResultClose")},handleTrackSearchClose:function(e){var _=this;_.$log.log("handleTrackSearchClose");_.app.api.trigger(_.$.Event(_.app.enums.EventType.API_SearchClose,{keyword:e.keyword,term:e.keyword,input:e.input,totalResults:e.totalResults}));_.handleVisitRecord(e);_.handleQueryTimeReset(e)},handleTrackSearchCloseResult:function(data){var _=this;_.$log.log("handleTrackSearchCloseResult: "+(data!==undefined&&data!==null?data.r:"error"));_.activeRequest=null},handleExternalTracking:function(){var _=this,siteTag,hasExternalTracking=false,i=0,trackingOb=null,trackingTag="";_.$log.log("handleExternalTracking");if(!_.app.config.get("trackingMap")||_.visitEvent===undefined||_.visitEvent===null){_.$log.log("goto complete");_.complete()}else{siteTag="site_"+_.app.config.get("site").toLowerCase();for(i=0;i<_.app.config.get("trackingMap").length;i+=1){trackingOb=_.app.config.get("trackingMap")[i];if(trackingOb.id.toLowerCase()==siteTag){hasExternalTracking=true;trackingTag+=trackingOb.value;break}}for(i=0;i<_.app.config.get("trackingMap").length;i+=1){trackingOb=_.app.config.get("trackingMap")[i];if(trackingOb.id==_.visitEvent.category){hasExternalTracking=true;trackingTag+=trackingOb.value;break}}_.$log.log("hasExternalTracking:"+hasExternalTracking);if(hasExternalTracking){trackingTag=trackingTag.replace("[[CATEGORY]]",_.visitEvent.category);trackingTag=trackingTag.replace("[[TITLE]]",_.visitEvent.title);_.$log.log("tackingTag"+trackingTag+" cat:"+_.visitEvent.category+" title:"+_.visitEvent.title);try{eval(trackingTag)}catch(e){_.$log.log("trackingTag eval failed "+e)}if(_.isExitLinkTargetBlank){_.handleExternalTracking()}else{_.timeoutId=setTimeout(function(){_.handleExternalTrackingResult()},_.timeoutMS)}}else{_.complete()}}},handleExternalTrackingResult:function(){var _=this;clearTimeout(_.timeoutId);_.timeoutId=-1;_.complete()},complete:function(){var _=this;if(_.isExitLinkTargetBlank){_.triggerExit()}else{_.timeoutId=setTimeout(function(){_.triggerExit()},_.onCompleteTimeoutMS)}},triggerExit:function(){var _=this;_.$log.log("tracking complete:");if(_.visitEvent){_.$(_).trigger(_.visitEvent)}_.visitEvent=null},handleQueryTimeReset:function(){var _=this;_.timeQueryFirst=-1;_.timeQueryLast=-1},cancel:function(){}};$elc.classes.ControllerTracking=$elc.classes.Class.extend(self)})($elc,window,document);(function(a,e,b,d){var c={app:null,init:function(g){var f=this;f.app=g;if(f.app.config.get("isTrackingEnabledFor_GA")){f.initGA()}},initGA:function(){var f=this;try{_gaq.push(["_trackEvent","elicit-load",e.location.toString(),b.referrer])}catch(g){}f.app.api.push(["_addEventListener",f.app.enums.EventType.API_ResultClick,function(h){try{_gaq.push(["_trackEvent","elicit-category: "+h.category,h.keyword,h.url])}catch(i){}}]);f.app.api.push(["_addEventListener",f.app.enums.EventType.API_ResultSiteSearch,function(h){try{_gaq.push(["_trackEvent","elicit-category: Site Search",h.keyword!==d&&h.keyword!==""?h.keyword:h.input])}catch(i){}}])}};a.classes.ControllerTrackingPlatforms=a.classes.Class.extend(c)})($elc,window,document);(function(a,d,b,c){a.classes.ControllerTrackingEcom=a.classes.Class.extend({app:null,wasMetaChecked:false,activeRequest:null,ecomOrder:null,ecomDetailArr:null,init:function(f){var e=this;e.app=f;e.$log.init(e.app,e.app.config.get("id")+" ctrl.track.ecom",true)},startup:function(){var e=this;e.bindEventsAPI();if(e.wasMetaChecked||e.app.config.get("isTrackingEnabledFor_Ecom")===c||!e.app.config.get("isTrackingEnabledFor_Ecom")){return}e.wasMetaChecked=true;e.trackGoalPages()},trackGoalPages:function(){var e=this,f=e.app.config.get("trackingGoalECPages"),j=false,g="",h,k;if(f&&f.length>0){for(h=0;h<f.length;h+=1){k=b.URL.split("?")[0];g=f[h];if(g.toUpperCase()==k.toUpperCase()){j=true;break}}if(j){e.$log.log("goal page found "+g);e.populateEcomMeta();e.sendEcomMeta()}}},populateEcomMeta:function(){var f=this;try{switch(f.app.config.get("trackingMetaECType")){case f.app.enums.EcomMetaType.WebTrends:f.populateEcomMeta_WT();break;case f.app.enums.EcomMetaType.GoogleAnalytics:f.populateEcomMeta_GA();break}}catch(g){}},populateEcomMeta_WT:function(){var e=this,l=e.getMeta("WT.tx_u").split(";").length,n,h,k=0,j=0,o=0,g,p,f,m;n=e.getMeta("WT.z_order_total")?e.getMeta("WT.z_order_total").split(";")[0]:"";this.ecomOrder=new a.classes.ModelEcomOrder(e.getMeta("WT.tx_i"),e.getMeta("WT.cg_s"),"",n,"","","","");this.ecomDetailArr=[];for(g=0;g<l;g+=1){o=e.getMeta("WT.tx_u")?parseInt(e.getMeta("WT.tx_u").split(";")[g],10):0;k=e.getMeta("WT.tx_s")?parseFloat(e.getMeta("WT.tx_s").split(";")[g],10):0;j=a.util.mathRoundNumber(k/o,2);p=e.getMeta("DCSext.pn_sku_combination")?e.getMeta("DCSext.pn_sku_combination").split(";")[g]:"";m=e.getMeta("DCSext.pn_id_combination")?e.getMeta("DCSext.pn_id_combination").split(";")[g]:"";f=e.getMeta("WT.pn_sc")?e.getMeta("WT.pn_sc").split(";")[g]:"";h=new a.classes.ModelEcomDetail(e.getMeta("WT.tx_i"),p,m,f,"",j,o);e.ecomDetailArr.push(h)}},populateEcomMeta_GA:function(){},bindEventsAPI:function(){var e=this;e.$(e.app.api).bind(e.app.enums.EventType.TrackingAddTransOrder,e.$.proxy(e.handleAddTransOrder,e));e.$(e.app.api).bind(e.app.enums.EventType.TrackingAddTransDetail,e.$.proxy(e.handleAddTransDetail,e));e.$(e.app.api).bind(e.app.enums.EventType.TrackingTrackTrans,e.$.proxy(e.handleTrackTrans,e))},handleAddTransOrder:function(g){var f=this;f.ecomOrder=g._data},handleAddTransDetail:function(g){var f=this;f.ecomDetailArr.push(g._data)},handleTrackTrans:function(){var e=this;e.sendEcomMeta()},sendEcomMeta:function(){var e=this,g=e.app.config.get("protocol"),f;if(!a.util.isIE()){g="https://"}g+=e.app.config.get("serviceTrackingEcom");f={d:{f:b.URL,r:b.referrer,s:e.app.config.get("site"),l:e.app.config.get("locale"),cx:e.app.config.get("context"),p:e.app.config.get("platform"),tm:{to:e.ecomOrder,td:e.ecomDetailArr}}};f.d.f=escape(f.d.f);f.d.r=escape(f.d.r);e.$log.log("sendEcomMeta "+f.d.f+" requestURL:"+g);f.d=e.$.toJSON(f.d);e.activeRequest=e.$.ajax({url:g,data:f,dataType:"json",contentType:"text/plain; charset=utf-8",type:"POST",success:e.$.proxy(e.handleEcomMetaResult,e),error:function(h){e.$log.log("error sending meta"+h.message)},crossDomain:true,cache:false});e.ecomOrder=[];e.ecomDetailArr=[]},handleEcomMetaResult:function(f){var e=this;e.$log.log("handleGoalMetaResult: "+(f!==c&&f!==null?f.r:"error"));e.activeRequest=null},getMeta:function(f){var e=this;return e.$('meta[name="'+f+'"]').attr("content")}})})($elc,window,document);(function(a,e,b,d){var c={app:null,view:null,selectedIndex:-1,curResponse:null,catArr:null,$activeHoverElement:null,$clickableElements:null,linkClickEvent:null,showLoadingResultsDelay:0,init:function(g){var f=this;f.app=g;f.$log.init(f.app,f.app.config.get("id")+" ctrl.result",false)},setup:function(){var f=this;f.assignView();f.bindEvents()},assignView:function(){var f=this;if(f.app.config.get("hasDynamicResultsLayout")||f.app.config.get("resultsLayoutType")===f.app.enums.ResultsLayoutType.Wide){f.view=new a.classes.ViewResultWide(f.app)}else{if(f.app.config.get("resultsLayoutType")===f.app.enums.ResultsLayoutType.PersistentResults){f.view=new a.classes.ViewResultPersist(f.app)}else{f.view=new a.classes.ViewResult(f.app)}}f.view.setup()},bindEvents:function(h){var f=this,g=f.app.config.get("namespace");if(h===d){h=true}f.$(f.view).unbind(f.app.enums.EventType.ViewRenderComplete);f.$(e).unbind("resize."+g,f.$.proxy(f.handleWindowResize,f));if(h){f.$(f.view).bind(f.app.enums.EventType.ViewRenderComplete,f.$.proxy(f.handleRenderComplete,f));f.$(e).bind("resize."+g,f.$.proxy(f.handleWindowResize,f))}},handleQueryResponse:function(g){var f=this;f.catArr=g.d.catArr;f.curResponse=g.d;f.app.state.set("matchCount",f.getMatchCount());f.refresh();if(g.onResponseSelectFirstResult&&!f.app.config.get("isMobile")&&f.$activeHoverElement===null){f.resultSelectStepInc(true)}},refresh:function(){var f=this;if(f.app.config.get("hasDynamicResultsLayout")){f.setDynamicResultsLayout()}f.view.refresh(f.curResponse);f.handleWindowResize()},reset:function(){var f=this;f.$activeHoverElement=null;f.app.state.set("isResultSelected",false);f.$clickableElements=[];f.curResponse=null;f.view.reset()},handleRenderComplete:function(g){var f=this;if(!g.isSameAsLastReponse){f.bindResultMouseEvents()}setTimeout(function(){f.handleWindowResize()},0);f.$(f).trigger(g)},bindResultMouseEvents:function(){var g=this,h=g.view.$wrap.find("."+g.app.enums.CSSType.isClickable),f;g.$clickableElements=[];g.$activeHoverElement=null;g.app.state.set("isResultSelected",false);h.each(function(i,j){f=g.$(j);g.bindResultMouseEventItem(f);g.$clickableElements.push(f);f.data("clickableIndex",g.$clickableElements.length-1)});h=g.view.$wrap.find("a");h.each(function(i,j){f=g.$(j);if(f.hasClass("elc-match-a-link")){f.bind("click",g.$.proxy(g.handleResultPreventALinkClick,g))}else{f.bind("click",g.$.proxy(g.handleResultInnerLinkClick,g))}})},bindResultMouseEventItem:function(f){var g=this;f.unbind("mouseover").unbind("mouseover").unbind("click").bind("mouseover",function(){g.resultSelectItem(f,true)}).bind("mouseout",function(){g.resultSelectItem(f,false)}).bind("click",g.$.proxy(g.handleResultClick,this))},handleResultPreventALinkClick:function(g){var f=this,h=false;if(g.currentTarget!==d){if(f.$(g.currentTarget).hasClass("elc-match-a-link")){h=true}}else{if(f.$(g.target).hasClass("elc-match-a-link")){h=true}}if(h){g.preventDefault();g.stopPropagation();f.$(g.target).closest("."+f.app.enums.CSSType.isClickable).trigger("click")}},resultSelectItem:function(f,i){var g=this,h;if(i){if(g.$activeHoverElement){g.resultSelectItem(g.$activeHoverElement,false)}h=g.$(":focus");if(h.is("a")){h.blur()}f.addClass(g.app.enums.CSSType.hover);g.$activeHoverElement=f}else{g.$activeHoverElement=null;f.removeClass(g.app.enums.CSSType.hover)}g.app.state.set("isResultSelected",g.$activeHoverElement!==null)},handleResultClick:function(f){var g=this;setTimeout(function(){g.handleResultClickProcess(f)},100)},handleResultInnerLinkClick:function(f){this.linkClickEvent=f;try{if(f.target.target.toLowerCase()==="_blank"){f.supressVisit=true}else{f.preventDefault()}}catch(g){}},handleResultClickProcess:function(i){try{i.preventDefault();i.stopPropagation();i.stopImmediatePropagation()}catch(j){}var g=this,s=g.$(i.target).closest("."+g.app.enums.CSSType.isClickable),q,x,v,t,u,w,n,h,p,l,k,f,r=false,o;if(s.length===0){return}s=s[0];q=g.$.data(s,"type");w=null;p=g.getMatchCount()>0;g.app.state.set("isVisitInProgress",true);switch(q){case g.app.enums.ResultType.Match:n=g.$.data(s,"match");f=g.$.data(s,"$match");h=g.$.data(s,"cat");x=n.k;v=n.u;t=n.n;if(g.linkClickEvent!==null){v=g.linkClickEvent.target.href;u=g.$(g.linkClickEvent.target).text();r=g.linkClickEvent.supressVisit;if(g.linkClickEvent.target.target!="_parent"){if(v.indexOf("?")>-1){v+="&target="+g.linkClickEvent.target.target}else{v+="?target="+g.linkClickEvent.target.target}}this.$log.log('url reassigned:"'+v+'"')}w=new a.classes.EventVisit(g.$,g.app.enums.EventType.VisitResult,v,h.c,t,x,g.curResponse.i,p,false,false,u,g.getMatchCount(),f.data("renderMatchIndex")+1,r);g.linkClickEvent=null;break;case g.app.enums.ResultType.Category:h=g.$.data(s,"cat");w=new a.classes.EventVisit(g.$,g.app.enums.EventType.VisitResult,h.u,h.c,h.c,h.c,g.curResponse.i,p,false,false,u);break;case g.app.enums.ResultType.ShowingResultsFor:g.app.state.set("isVisitInProgress",false);l=g.$.data(s,"label");g.app.api.trigger(g.$.Event(g.app.enums.EventType.API_ResultShowingResultsForClick,{keyword:l,input:g.curResponse.i,totalResults:g.app.state.get("matchCount")}));k=new a.classes.EventInput(g.$,g.app.enums.EventType.InputSet,l);g.handleSelfTrigger(k);break;case g.app.enums.ResultType.MoreResults:case g.app.enums.ResultType.NoResults:w=new a.classes.EventVisit(g.$,g.app.enums.EventType.VisitSearchAll,"","","",g.curResponse.termMatched!==d?g.curResponse.termMatched:g.curResponse.i,g.curResponse.i,p,true,false,u,g.getMatchCount());if(q===g.app.enums.ResultType.MoreResults){if(g.app.config.get("fillInputWithShowingResultsForValueOnSubmit")&&g.curResponse.srf!==d&&g.curResponse.srf!==""){o=g.curResponse.srf;k=new a.classes.EventInput(g.$,g.app.enums.EventType.InputSet,o)}else{if(g.app.config.get("fillInputWithHintOnSubmit")&&g.app.state.get("inputHint")!==d&&g.app.state.get("inputHint")!==""){o=g.app.state.get("inputHint");k=new a.classes.EventInput(g.$,g.app.enums.EventType.InputSet,o)}}if(k!==d){g.handleSelfTrigger(k)}}break}if(w){g.handleSelfTrigger(w)}return false},handleInputNav:function(i){this.$log.log("handleInputNav e.key:"+i.key);var f=this,m=false,g="",n,h="",j,l,k;switch(i.key){case f.app.enums.KeyType.Down:if(i.isInputFillWithHint===d){f.resultSelectStepInc()}else{if(i.isInputFillWithHint&&f.$activeHoverElement===null){f.resultSelectStepInc()}}f.refreshScrollableTop();break;case f.app.enums.KeyType.Up:f.resultSelectStepDec();f.refreshScrollableTop();break;case f.app.enums.KeyType.Enter:f.$log.log("_.getMatchCount() :"+f.getMatchCount()+" _.$activeHoverElement:"+f.$activeHoverElement);if(f.$activeHoverElement!==null){f.$activeHoverElement.trigger("click")}else{if(f.getMatchCount()===0){f.$log.log("curResponse empty, triggering submit");i.key=f.app.enums.KeyType.Submit;f.handleInputNav(i);return}else{f.resultSelectStepInc();f.handleSelfTrigger(i)}}break;case f.app.enums.KeyType.Submit:k=f.getMatchCount(true);m=k>0;if(f.curResponse){if(f.curResponse.i!==d&&f.curResponse.i!==""){g=f.curResponse.i}}if(i.input!==d&&i.input!==""){g=i.input}if(i.keyword!==d){h=i.keyword}if(f.curResponse&&f.app.config.get("fillInputWithShowingResultsForValueOnSubmit")&&f.curResponse.srf!==d&&f.curResponse.srf!==""){l=f.curResponse.srf;j=new a.classes.EventInput(f.$,f.app.enums.EventType.InputSet,l);f.handleSelfTrigger(j)}n=new a.classes.EventVisit(f.$,f.app.enums.EventType.VisitSearchAll,"","","",h,g,m,false,true,d,k);f.handleSelfTrigger(n);break}},handleSelfTrigger:function(g){var f=this;f.$(f).trigger(g)},resultSelectStepInc:function(g){var f=this,i=0,j,h,k;f.$log.log("resultSelectStepInc:");if(g===d){g=true}if(f.$activeHoverElement!==null){i=f.$.data(f.$activeHoverElement[0],"clickableIndex")+1}if(f.$clickableElements===null){return}else{if(g){for(j=i;j<f.$clickableElements.length;j+=1){h=f.$clickableElements[j];k=f.$.data(h[0],"type");if(k==f.app.enums.ResultType.Match){i=j;break}}}}if(i>=f.$clickableElements.length){return}else{f.resultSelectItem(f.$clickableElements[i],true)}},resultSelectStepDec:function(g){if(g===d){g=true}if(this.$activeHoverElement===null){return}else{var f=this,i=f.$.data(f.$activeHoverElement[0],"clickableIndex")-1,j,h,k;if(g){for(j=i;j>=0;j-=1){h=f.$clickableElements[j];k=f.$.data(h[0],"type");if(k==f.app.enums.ResultType.Match){i=j;break}else{if(i===0){i=1;break}}}}if(i>=0){f.resultSelectItem(f.$clickableElements[i],true)}}},handleWindowResize:function(){var f=this;f.refreshScrollableContent()},refreshScrollableContent:function(){var f=this,g,j,i;if(f.app.config.get("useFixedScrollableResults")&&!f.app.config.get("isMobile")){f.view.$wrap.removeClass("elc-scrollable");f.view.$wrap.css({height:"auto",width:""});g=f.$(e).height();if(!f.app.config.get("isMobile")){g-=f.view.$wrap.offset().top-f.$(e).scrollTop()+10}i=f.view.$wrap.width();j=f.view.$wrap.height();if(g<j){f.view.$wrap.addClass("elc-scrollable");if(!f.app.config.get("isMobile")){i+=a.util.getScrollBarWidth();f.view.$wrap.height(g);f.view.$wrap.width(i)}}f.refreshScrollableTop()}},refreshScrollableTop:function(){var f=this,g,j,h,i,k;if(f.app.config.get("useFixedScrollableResults")){if(f.$activeHoverElement!==null){g=f.$activeHoverElement.offsetRelativeTo(f.view.$wrap);j=g.top;if(j<f.view.$wrap.scrollTop()){if(f.$activeHoverElement.data("clickableIndex")===0){j=0}f.view.$wrap.scrollTop(j)}h=g.top+f.$activeHoverElement.outerHeight();i=h-(f.view.$wrap.innerHeight()+f.view.$wrap.scrollTop());if(i>0){k=h-f.view.$wrap.innerHeight();f.view.$wrap.scrollTop(k)}}}},getIsOpen:function(){return this.view.getIsOpen()},hasResults:function(){var f=this,g=false;if(f.curResponse!==null){if(f.getMatchCount()>0&&!f.curResponse.isLoadingResults){g=true}}return g},toggleLoadingResult:function(g){var f=this;setTimeout(function(){if(g&&!f.hasResults()){f.curResponse=new a.classes.ModelResult(f.app,{},true);f.refresh()}},f.showLoadingResultsDelay)},getMatchCount:function(n){var f=this,m=0,h=0,g,k=0,l=false;if(n===d){n=false}if(f.curResponse!==null&&f.curResponse.catArr!==null&&f.curResponse.catArr.length>0){for(h=0;h<f.curResponse.catArr.length;h+=1){g=f.curResponse.catArr[h];if(n&&f.app.config.get("omitCategoryFromMatchCount")!==d){l=false;for(k=0;k<f.app.config.get("omitCategoryFromMatchCount").length;k+=1){if(g.c.toLowerCase()===f.app.config.get("omitCategoryFromMatchCount")[k].toLowerCase()){l=true;break}}if(l){continue}}m+=g.getMatchCount()}}return m},setDynamicResultsLayout:function(){var f=this,k=f.app.config.set("resultsLayoutType"),g=f.app.config.get("dynamicResultsLayoutBreakpoints"),h=0,j=f.getMatchCount(true);if(g!==d&&f.$.isArray(g)){for(h;h<g.length;h+=1){if(h==g.length-1||j<=g[h].breakpoint){k=g[h].type;break}}}f.app.config.set("resultsLayoutType",k)}};a.classes.ControllerResult=a.classes.Class.extend(c)})($elc,window,document);(function(a,d,b,c){a.classes.ControllerResultWide=a.classes.ControllerResult.extend({clickableRenderItemsTopLeftArr:[],handleInputNav:function(p){var h=this,l,m,n,v,s,t,u,f,g,o,q=0,r=0,k=false;if(!h._isWideLayout()){h._super(p)}else{h.$log.log("handleInputNav e.key:"+p.key);h.clickableRenderItemsTopLeftArr=h.view.getRenderItemTopLeftArr(h.$.makeArray(h.$clickableElements));if(h.$activeHoverElement===null){if(p.key===h.app.enums.KeyType.Down){f=h.$(h.app.config.get("elcSearchInputFieldSelector"));f.data("top",f.offset().top);f.data("left",f.offset().left);if(h.clickableRenderItemsTopLeftArr.length>0){v=0;if(h.clickableRenderItemsTopLeftArr[v].arr[0].data("type")!==h.app.enums.ResultType.Match){if(v+1<h.clickableRenderItemsTopLeftArr.length){v+=1}else{return}}o=h.clickableRenderItemsTopLeftArr[v].arr;s=o.length-1;for(q=0;q<o.length;q+=1){if(f.data("left")<=o[q].data("left")){s=q;break}}g=h.clickableRenderItemsTopLeftArr[v].arr[s];h.resultSelectItem(g,true)}}else{h._super(p)}}else{l=h.findClickableTopLeftArrIndexes(h.$activeHoverElement);v=l.top;s=l.left;m=h.$activeHoverElement.data("left");n=m+h.$activeHoverElement.data("width");switch(p.key){case h.app.enums.KeyType.Down:for(v;v+1<h.clickableRenderItemsTopLeftArr.length;){v+=1;for(r=0;r<h.clickableRenderItemsTopLeftArr[v].arr.length;r+=1){t=h.clickableRenderItemsTopLeftArr[v].arr[r].data("left");u=t+h.clickableRenderItemsTopLeftArr[v].arr[r].data("width");if(m<u){s=r;k=true;break}}if(k){break}}break;case h.app.enums.KeyType.Up:k=false;for(v;v-1>=0;){if(h.clickableRenderItemsTopLeftArr[v-1].arr[0].data("type")!==h.app.enums.ResultType.Match){break}v-=1;for(r=0;r<h.clickableRenderItemsTopLeftArr[v].arr.length;r+=1){t=h.clickableRenderItemsTopLeftArr[v].arr[r].data("left");u=t+h.clickableRenderItemsTopLeftArr[v].arr[r].data("width");if(m<u){s=r;k=true;break}}if(k){break}}if(h.$activeHoverElement.data("type")===h.app.enums.ResultType.MoreResults){s=h.clickableRenderItemsTopLeftArr[v].arr.length-1}break;case h.app.enums.KeyType.Left:if(s-1>=0){s-=1}break;case h.app.enums.KeyType.Right:if(s+1<h.clickableRenderItemsTopLeftArr[v].arr.length){s+=1}break;default:h._super(p);return}if(v!==l.top||s!==l.left){if(v<h.clickableRenderItemsTopLeftArr.length&&s<h.clickableRenderItemsTopLeftArr[v].arr.length){g=h.clickableRenderItemsTopLeftArr[v].arr[s];if(g!==c){h.resultSelectItem(g,true)}}}}}},findClickableTopLeftArrIndexes:function(e){var f=this,k={top:0,left:0},g,h;for(g=0;g<f.clickableRenderItemsTopLeftArr.length;g+=1){if(f.clickableRenderItemsTopLeftArr[g].id==="top-"+e.data("top")){k.top=g;for(h=0;h<f.clickableRenderItemsTopLeftArr[g].arr.length;h+=1){if(f.clickableRenderItemsTopLeftArr[g].arr[h].data("left")===e.data("left")){k.left=h;break}}break}}return k},_isWideLayout:function(){var e=this;return e.app.config.get("resultsLayoutType")===e.app.enums.ResultsLayoutType.Wide}})})($elc,window,document);(function(a,e,b,d){var c={app:null,input:null,result:null,$form:null,$clientSearchWrapper:null,$searchWrapper:null,wasItemClicked:false,blurDelay_id:-1,lastTouchEvent:null,addClassesToSearchWrapper:"",isSearchWrapperCollapseable:false,isSearchWrapperOpenOnStart:true,isSearchWrapperOpen:true,addAfterSearchWrapper:"",init:function(g){var f=this;f.app=g;f.$log.init(f.app,f.app.config.get("id")+" ctrl.ui",false);f.$log.log("ui init")},setup:function(){var f=this;f.decoratePageType();f.decorateSearchWrapper();f.assignInputController();f.assignResultsController()},appReady:function(){var f=0;f+=1},decoratePageType:function(){var f=this;f.$("html").addClass(f.app.config.get("pageType"))},assignInputController:function(){var f=this;f.input=new a.classes.ControllerInput(f.app,f.$searchWrapper);f.input.setup()},assignResultsController:function(){var f=this;if(f.app.config.get("hasDynamicResultsLayout")||f.app.config.get("resultsLayoutType")===f.app.enums.ResultsLayoutType.Wide||f.app.config.get("resultsLayoutType")===f.app.enums.ResultsLayoutType.PersistentResults){f.result=new a.classes.ControllerResultWide(f.app)}else{f.result=new a.classes.ControllerResult(f.app)}f.result.setup()},decorateSearchWrapper:function(){var f=this;if(f.app.config.get("injectSearchWrapper")!==null){try{f.app.config.get("injectSearchWrapper")(f.$,f.app)}catch(g){a.log("injectSearchWrapper error:"+g)}}f.isSearchWrapperCollapseable=f.app.config.get("isSearchWrapperCollapseable");f.isSearchWrapperOpenOnStart=f.app.config.get("isSearchWrapperOpenOnStart");f.isSearchWrapperOpen=f.isSearchWrapperOpenOnStart;f.addSearchWrapper();f.$form=f.$(f.app.config.get("searchFormSelector")).eq(0);f.$form.addClass("elc-form")},addSearchWrapper:function(){var f=this,g;g=f.getSearchWrapperElement();b.documentElement.className+=" elc-enabled ";f.$searchWrapper=f.renderSearchWrapper(g);f.app.state.set("searchWrapperElement",f.$searchWrapper);f.$log.log("searchwrapper done")},getSearchWrapperElement:function(){var f=this,h,g=f.app.config.get("namespace");h='<span class="elc-searchWrapper ';h+=g+" ";if(g!==f.app.config.get("appStyleClass")){h+=f.app.config.get("appStyleClass")}h+=f.addClassesToSearchWrapper;h+='"></span>';h=f.$(h);return h},renderSearchWrapper:function(n){var j=this,f,g,l,o,m,k,h;f=j.$(j.app.config.get("clientSearchInputFieldSelector")).eq(0);g=j.$(j.app.config.get("clientSearchInputButtonSelector")).eq(0);j.app.config.set("isClientInputBoxFocusedOnStart",f.is(":focus"));f.wrap(n);f.after(g);h=f.closest(".elc-searchWrapper");if(j.addAfterSearchWrapper!==""){h.after(j.$(j.addAfterSearchWrapper))}if(j.isSearchWrapperCollapseable&&!j.isSearchWrapperOpenOnStart){h.stop(true).slideToggle(0)}if(f.length>0){l=f[0].className.split(/\s+/);o="";for(m=0;m<l.length;m+=1){k=l[m];if(k.indexOf("elc-style")>-1){o=k;break}}if(o!==""){h.addClass(o);b.documentElement.className+=" "+o+" ";j.app.config.set("styleVersion",parseInt(o.replace(/^\D+/g,""),10))}}return h},startup:function(){var f=this;f.bindEvents();f.handleWindowResize()},bindEvents:function(h){var f=this,g=f.app.config.get("namespace");if(h===d){h=true}f.$(f.input).unbind(f.app.enums.EventType.Query).unbind(f.app.enums.EventType.ViewResultClose).unbind(f.app.enums.EventType.InputNav).unbind(f.app.enums.EventType.Input).unbind(f.app.enums.EventType.SearchClose);f.$(f.result).unbind(f.app.enums.EventType.Visit).unbind(f.app.enums.EventType.Input);f.$searchWrapper.unbind("mouseover",f.$.proxy(f.handleSearchWrapperOver,f)).unbind("mouseout",f.$.proxy(f.handleSearchWrapperOut,f));f.$(b).unbind("click."+g,f.$.proxy(f.handleDocumentClick,f)).unbind("mousedown."+g,f.$.proxy(f.handleDocumentMouseDown,f)).unbind("mouseup."+g,f.$.proxy(f.handleDocumentMouseUp,f));f.$(e).unbind("resize."+g,f.$.proxy(f.handleWindowResize,f)).unbind("unload."+g,f.$.proxy(f.handleWindowUnload,f)).unbind("load."+g,f.$.proxy(f.handleWindowLoad,f));f.$(f.app.state).unbind(f.app.enums.EventType.WindowUnload,f.$.proxy(f.handleWindowUnload,f));if(h){f.$(f.input).bind(f.app.enums.EventType.QuerySend,f.$.proxy(f.handleQuerySend,f)).bind(f.app.enums.EventType.QueryCancel,f.$.proxy(f.handleSelfTrigger,f)).bind(f.app.enums.EventType.ViewResultClose,f.$.proxy(f.handleCloseResult,f)).bind(f.app.enums.EventType.InputNav,function(i){f.result.handleInputNav(i)}).bind(f.app.enums.EventType.SearchClose,f.$.proxy(f.handleSearchClose,f)).bind(f.app.enums.EventType.InputFocus,f.$.proxy(f.handleInputFocus,f)).bind(f.app.enums.EventType.InputBlur,f.$.proxy(f.handleInputBlur,f));f.$searchWrapper.bind("mouseover",f.$.proxy(f.handleSearchWrapperOver,f)).bind("mouseout",f.$.proxy(f.handleSearchWrapperOut,f));f.$(f.result).bind(f.app.enums.EventType.VisitResult,f.$.proxy(f.handleVisit,f)).bind(f.app.enums.EventType.VisitSearchAll,f.$.proxy(f.handleVisit,f)).bind(f.app.enums.EventType.InputNav,function(i){if(i.key==f.app.enums.KeyType.Enter){f.input.fillInputWithHint()}}).bind(f.app.enums.EventType.InputSet,f.$.proxy(f.input.handleInputSet,f.input)).bind(f.app.enums.EventType.ViewRenderComplete,f.$.proxy(f.handleResultsRenderComplete,f));f.$(b).bind("click."+g,f.$.proxy(f.handleDocumentClick,f)).bind("mousedown."+g,f.$.proxy(f.handleDocumentMouseDown,f)).bind("mouseup."+g,f.$.proxy(f.handleDocumentMouseUp,f));f.$(e).bind("resize."+g,f.$.proxy(f.handleWindowResize,f)).bind("unload."+g,f.$.proxy(f.handleWindowUnload,f)).bind("load."+g,f.$.proxy(f.handleWindowLoad,f));f.$(f.app.state).bind(f.app.enums.EventType.WindowUnload,f.$.proxy(f.handleWindowUnload,f));if(!f.app.config.get("isMobile")&&a.util.isiTouch()){a.util.bindiTouchEvents(b)}}},handleVisit:function(g){var f=this;f.handleSelfTrigger(g)},handleQuerySend:function(g){var f=this;f.$log.log("handleQuerySend "+f.app.config.get("resultsLayoutType"));f.handleSelfTrigger(g)},handleResultsRenderComplete:function(){},handleSelfTrigger:function(g){var f=this;f.$(this).trigger(g)},handleCloseResult:function(){var f=this;f.$log.log("handleCloseResult");f.resetViews()},handleQueryResponse:function(g){var f=this,h=false;f.$log.log("handleQueryResponse "+f.app.config.get("resultsLayoutType"));if(f.input.handleQueryResponse!==d){h=f.input.handleQueryResponse(g)}else{h=true}if(h){f.result.handleQueryResponse(g)}return h},resetViews:function(){var f=this;f.result.reset()},handleDocumentMouseDown:function(g){var f=this,h=f.$(g.target).is("object")||f.$(g.target).is("embed");f.$(b).data("isMouseDown",true);if(h){f.handleDocumentClick(g)}},handleDocumentMouseUp:function(g){var f=this;f.$(b).data("isMouseDown",false)},handleDocumentClick:function(g){var i,j,h,f=this;i=f.app.state.isMobile();if(i){return}j=g.target||g.srcElement||g.originalTarget;if(j!==d&&j!==null){h=f.$(j).parents(".elc-searchWrapper."+f.app.config.get("appStyleClass")).length===0;f.$log.log("isClickoutside:"+h+" result.isOpen:"+f.result.getIsOpen());if(h&&!f.app.config.get("isResultViewCloseBypassed")&&f.result.getIsOpen()){f.$log.log("close results from document click");f.input.triggerBlurAndClose()}}},handleWindowResize:function(){},handleWindowUnload:function(){var f=this;f.$log.log("handleWindowUnload");f.app.state.set("isUnloadInProgress",true);f.input.handleEscape(d,d,false)},handleWindowLoad:function(){},triggerSubmit:function(){var f=this;f.$log.log("-->ui controlelr submit");f.input.triggerSubmit()},handleSearchWrapperOver:function(){var f=this;f.$searchWrapper.addClass("elc-searchWrapper-hover")},handleSearchWrapperOut:function(){var f=this;f.$searchWrapper.removeClass("elc-searchWrapper-hover")},searchWrapperInputFocusTimeout_id:-1,toggleSearchWrapper:function(){var g=this,h,f;if(!g.isSearchWrapperCollapseable){return}g.$log.log("toggleSearchWrapper:"+g+" this.isSearchWrapperOpen:"+g.isSearchWrapperOpen+" isSearchWrapperCollapseable:"+g.isSearchWrapperCollapseable);h=g.$searchWrapper.parent().width()+"px";f=g.$(g.app.config.get("elcSearchInputFieldSelector"));g.$searchWrapper.css("width",h);clearTimeout(g.searchWrapperInputFocusTimeout_id);if(g.isSearchWrapperOpen){f.blur();g.$searchWrapper.stop(true).slideUp("medium",function(){g.$searchWrapper.css("width","auto")});g.isSearchWrapperOpen=false}else{g.$searchWrapper.stop(true).slideDown(0,function(){g.$searchWrapper.css("width","auto")});g.input.handleVisible();g.isSearchWrapperOpen=true;f.focus()}},handleInputFocus:function(){var f=1;f+=1},handleInputBlur:function(){var f=1;f+=1},handleSearchClose:function(g){var f=this;f.handleSelfTrigger(g)},toString:function(){return"UI Controller"}};a.classes.ControllerUI=a.classes.Class.extend(c)})($elc,window,document);(function(a,d,b,c){a.classes.ControllerVisit=a.classes.Class.extend({app:null,init:function(f){var e=this;e.app=f;e.$log.init(e.app,e.app.config.get("id")+" ctrl.visit",true)},handleVisitResult:function(g){var f=this,k,j=true,i=false,h;a.log("handleVisitResult:"+g+" e.supressVisit:"+g.supressVisit);setTimeout(function(){f.app.state.set("isVisitInProgress",false)},5000);if(g.supressVisit!==c&&g.supressVisit){return}k=f.$.trim(g.url);h=k.toLowerCase().indexOf("javascript:")===0;if(a.util.stringIsNullOrEmpty(k)){k=""}if(!h){k=f.appendQueryStringOptions(k,g);k=f.appendQueryStringSiteSearch(k,g);if(k.indexOf("target=_blank")>0){i=true;j=false}if(f.app.config.get("isFacebook")){j=true}if(k.indexOf("http")!==0&&k.charAt(0)!="/"){k=b.location.protocol+"//"+k}}a.log("visiting link "+k+" isTargetBlank:"+i);f.triggerWindowUnload();if(j){d.open(k,"_top")}else{if(i){d.open(k)}else{setTimeout(function(){d.location.assign(k)},1)}}},goToURL:function(f){var e=b.createElement("a");if(e.click){e.setAttribute("href",f);e.style.display="none";b.body.appendChild(e);e.click()}else{d.location=f}},appendQueryStringOptions:function(i,g){var f=this,h=f.app.config.get("appendToQueryStringToEndOfAllLinks");if(!a.util.stringIsNullOrEmpty(h)){i=f.appendValuesToQueryString(h,i)}return i},appendQueryStringSiteSearch:function(i,g){var f=this,h;if(f.app.config.get("isSiteSearchVisitUrlAppendEnabled")){h={};h[f.app.config.get("siteSearchVisitTermTag")]=escape(g.keyword);h[f.app.config.get("siteSearchVisitCategoryTag")]=escape(g.category);i=f.appendValuesToQueryString(h,i)}return i},appendValuesToQueryString:function(h,i){var f,k,e,g,j=true;if(i!==c){if(i.toLowerCase().indexOf("javascript:")===0){return}if(i.indexOf("#")>-1){g=i.split("#");e=g[1];i=g[0]}if(i.indexOf("?")==-1){i+="?";j=false}if(h!==c&&h!==null){if(typeof h=="string"){i+=h}else{if(typeof h=="object"){for(f in h){k=h[f];if(j){i+="&"}j=true;i+=f+"="+k}}}}if(e!==c){i+="#"+e}}return i},handleVisitSearchAll:function(g){var f=this;f.triggerWindowUnload();f.$(f).trigger(g)},triggerWindowUnload:function(){var e=this;if(a.util.isiTouch()){setTimeout(function(){a.app.state.trigger(e.$.Event(e.app.enums.EventType.WindowUnload))},0)}}})})($elc,window,document);(function(a,d,b,c){a.classes.ControllerLogger=a.classes.Class.extend({app:null,label:"",active:null,spaces:"",$log:1,log4js:null,$:null,methods:["debug","info","warn","error","assert","dir","dirxml","group","groupEnd","time","timeEnd","count","trace","profile","profileEnd"],init:function(g,j,f,k){var e=this,h=0;e.app=g;if(e.app!==c){e.$=e.app.$}if(j===c){j=""}e.label=j;if(f===c){f=false}e.active=f;if(k===c){k=0}for(h;h<k;h+=1){this.spaces+=" "}},setupLogger:function(){var e=this,f=new a.lib.Log4Javascript.BrowserConsoleAppender(),g=new a.lib.Log4Javascript.PatternLayout("%d{mm:ss,SSS} %-5p %m%n");e.log4js=a.lib.Log4Javascript.getLogger("elc-logger-"+e.app.config.get("id"));f.setLayout(g);e.log4js.addAppender(f)},setupMethods:function(){var e=this,f=0,g;for(f;f<e.methods.length;f+=1){g=e.methods[f];e[g]=function(){e.log4js[g].apply(e.log4js,arguments.unshift(e.label).unshift("ELC"))}}},log:function(){if(!this.active){return}var f=this,g,j;if(typeof d.console!=="undefined"){try{j="[ELC "+f.getTimeStamp()+" "+f.label+"]";g=f.$.makeArray(arguments);g.unshift(j);d.console.log.apply(d.console,g)}catch(h){var i=1;i+=1}}},getTimeStamp:function(){var e=this,f=new Date(),g=e.formatFill(f.getMinutes().toString(),2,"0",-1)+":"+e.formatFill(f.getSeconds().toString(),2,"0",-1)+":"+e.formatFill(f.getMilliseconds().toString(),3,"0");return g},formatFill:function(j,g,e,h){var f=0;for(f=j.length;f<g;f+=1){if(h===-1){j=e+j}else{j+=e}}return j},setActive:function(f){var e=this;e.active=f;e.log4js.setEnabled(f)},setLabel:function(f){var e=this;e.label=f}})})($elc,window,document);(function(a,d,b,c){a.classes.ModelMatch=a.classes.Class.extend({app:null,init:function(f,h,g){var e=this;e.app=f;e._category=g;e.app.$.extend(e,h);e._imgThumb="";e._d=h.d},fixImagePath:function(p,n,o){var f=this,l=f.i,m,k=false,j,h;if(l!==""&&l!==c){if(l.indexOf("http://")>-1){l=l.substring(7,l.length)}else{if(l.indexOf("https://")>-1){l=l.substring(8,l.length)}else{if(l.charAt(0)=="/"){l=l.substring(1,l.length)}l=n+l}}try{j=l.split(".");if(j.length>0){h=j[j.length-1].toLowerCase();if(h=="jpg"||h=="jpeg"||h=="png"||h=="gif"){k=true}}}catch(g){}}if(l===""||l===c||l===null||!k){l=o;f._imgThumbBlank=true}m=p+l;if(n===c||l===c){m=c}f._imgThumb=m},isEqual:function(f){var e=this,g=false;if(e.n==f.n&&e._d==f._d&&e._imgThumb==f._imgThumb){g=true}return g}})})($elc,window,document);(function(a,d,b,c){a.classes.ModelResult=a.classes.Class.extend({app:null,catArr:[],isLoadingResults:false,termMatched:null,init:function(g,f,h){var e=this;e.app=g;e.app.$.extend(e,f);e.catArr=[];e.isLoadingResults=h;e.termMatched=e.i;if(e.srf!==c){e.termMatched=e.srf}else{if(e.h!==c){e.termMatched=e.h}}if(e.u===c){e.u=""}},areResultsEqual:function(j){var e=this,l=false,m=true,f,g,h,k;if(!j.srf&&!e.srf){m=true}else{if((j.srf&&!e.srf)||(!j.srf&&e.srf)){m=false}else{if(j.srf!=e.srf){m=false}}}if(m){if(j&&e.catArr&&j.catArr&&e.catArr.length==j.catArr.length){f=true;for(k=0;k<e.catArr.length;k+=1){g=e.catArr[k];h=j.catArr[k];f=g.isEqual(h);if(!f){l=false;break}}if(f){l=true}}}return l},getTotalNumberMatches:function(f){var e=this,g=0,h=0;if(f===c){f=true}if(e.catArr){for(g;g<e.catArr.length;g+=1){h+=e.catArr[g].getTotalNumberMatches(f)}}return h},toString:function(){return"ResultData "+this.i}})})($elc,window,document);(function(a,d,b,c){a.classes.ModelCategory=a.classes.Class.extend({app:null,data:null,matchesArr:null,isPromotion:false,init:function(g,f){var e=this,h,j;e.app=g;e.app.$.extend(e,f);e.matchesArr=[];e.isPromotion=false;e.data=f;if(e.c!==c&&e.c.toLowerCase().indexOf("promotion")>-1){e.isPromotion=true}if(f!==c&&f!==null){if(f.rs){for(h=0;h<f.rs.length;h+=1){j=new a.classes.ModelMatch(e.app,f.rs[h],e);e.matchesArr.push(j)}}}},getMatchCount:function(){var e=this;return e.matchesArr.length},fixImagePath:function(j,g,h){var e=this,f=0;for(f=0;f<e.matchesArr.length;f+=1){e.matchesArr[f].fixImagePath(j,g,h)}},isEqual:function(g){var e=this,l=false,j=null,k=null,f=true,h;if(e.c==g.c){if(e.matchesArr&&g.matchesArr&&e.matchesArr.length==g.matchesArr.length){for(h=0;h<e.matchesArr.length;h+=1){j=e.matchesArr[h];k=g.matchesArr[h];f=j.isEqual(k);if(!f){l=false;break}}if(f){l=true}}}return l}})})($elc,window,document);(function(a,d,b,c){a.classes.ModelEcomOrder=(function(j,h,i,m,n,k,g,l,f){var e=this;e.oi=j||"";e.l1=h||"";e.l2=i||"";e.tt=m||"";e.tx=n||"";e.sh=k||"";e.ct=g||"";e.st=l||"";e.cn=f||"";return e});a.classes.ModelEcomDetail=(function(h,k,i,f,g,l,j){var e=this;e.oi=h||"";e.sk=k||"";e.pn=i||"";e.l1=f||"";e.l2=g||"";e.up=l||"";e.qt=j||"";return e})})($elc,window,document);(function(a,e,b,d){var c={app:null,$:null,templates:null,defaults:{resultsWrapperTag:'<span class="elc-resultsWrapper <%= this._css %>"></span>',resultsTag:'<ul class="elc-results"></ul>',resultsSideTag:'<ul class="elc-resultsSide"></ul>',resultSide_displayTypes:["8"],resultBottom_displayTypes:["7"],resultTop_displayTypes:[],variableReplaceArr:["displayType_matchImgCell","displayType_showingResults_inner"],displayType_cat:'<li class="<%= this._outerCss %>" <%= (this.u !== undefined ? \'data-url="\' + this.u  + \'"\': \'\') %> ><div class="elc-category <%= this._css %>"><span class="elc-category-inner"><span class="elc-category-text"><%= this.c %></span></span></div></li>',displayType_allowTitleSubVerticalIsolation:false,displayType_matchImgCell:'<td class="elc-matchImgCell" rowspan="2"><div class="elc-matchImgOuter elc-matchImgDefaultThumb"><img class="elc-matchImg" src="<%= this._imgThumb %>" alt=""\\></div></td>',displayType_0:"",displayType_1:'<li class="<%= this._outerCss %>" <%= (this.u !== undefined ? \'data-url="\' + this.u  + \'"\': \'\') %> ><%= (this.u !== undefined ? \'<a class="elc-match-a-link" href="\' + this.u  + \'">\': \'\') %><div class="elc-match <%= this._css %>"><table class="elc-matchTable "><tr class="elc-matchTitleRow"><% if (this._app.config.get(\'defaultImagePlacementInMatch\') === this._app.enums.AlignmentType.Left){ %>{{displayType_matchImgCell}}<% } %><td class="elc-matchTitleCell"><span class="elc-matchTitle"><%= this.n %></span></td><% if ((this.pn != undefined && this.pn != 0) || this.pl != undefined || this.pl2 != undefined || (this.cmf != undefined && this.cmf.cta_label != undefined)){ this._hasTitleSub = true; } %><% if (this._hasTitleSub == true){ %><% this._titleSubHasVerticalIsolation = this._app.config.get(\'displayType_allowTitleSubVerticalIsolation\'); %><td class="elc-matchTitleSubCell <%= this._titleSubHasVerticalIsolation ? \'elc-fullcol\' : \'\' %>" rowspan="<%= this._titleSubHasVerticalIsolation ? 2 : 1 %>"><span class="elc-matchTitleSub"><% if (this.pn != undefined && this.pn != 0) { %><span class="elc-matchTitleSubItem"><% if (this.pp != undefined){ %><%= this.pp %><% } %><%= this.pn %></span><br/><% }%><% if (this.pl != undefined ) { %><span class="elc-matchTitleSubItem"><%= this.pl %></span><br/><% } %><% if (this.pl2 != undefined ) { %><span class="elc-matchTitleSubItem"><%= this.pl2 %></span><br/><% } %><% if (this.cmf != undefined && this.cmf.cta_label != undefined){ %><span class="elc-matchTitleSubItem"><% if (this.cmf.cta_url != undefined){ %><a href="<%= this.cmf.cta_url %>" <% if (this.cmf.cta_target != undefined){%> target="<%=this.cmf.cta_target%><%}}%>"><% if (this.cmf.cta_label != undefined) { %><%=this.cmf.cta_label%><% } %><% if (this.cmf.cta_url != undefined) { %></a><% } %></span><br/><% } %></span></td><% } %></td><% if (this._app.config.get(\'defaultImagePlacementInMatch\') === this._app.enums.AlignmentType.Right) { %>{{displayType_matchImgCell}}<% } %></tr><% this._descColspan = this._hasTitleSub && !this._titleSubHasVerticalIsolation? 2 : 1; %><tr class="elc-matchDescRow"><td colspan="<%=this._descColspan%>" class="elc-matchDescCell"><div class="elc-matchDesc" ><%= this.d %></div></div></td></tr></tr></table></div><%= (this.u !== undefined ? \'</a>\': \'\') %></li>',displayType_2:'<li class="elc-matchItem-text <%= this._outerCss %>" data-url="<%= (this.u !== undefined ? this.u : \'\') %>"><%= (this.u !== undefined ? \'<a class="elc-match-a-link" href="\' + this.u  + \'">\': \'\') %><div class="elc-match <%= this._css %>"><div class="elc-match-text"><div class="elc-matchTitle"><%= this.n %></div><div class="elc-matchDesc"><%= this.d %></div></div></div><%= (this.u !== undefined ? \'</a>\': \'\') %></li>',displayType_3:"<li class=\"elc-matchItem-halfHeightText <%= this._outerCss %>\" <%= (this.u !== undefined ? 'data-url=\"' + this.u  + '\"': '') %> ><%= (this.u !== undefined ? '<a class=\"elc-match-a-link\" href=\"' + this.u  + '\">': '') %><div class=\"elc-match <%= this._css %>\"><div class=\"elc-match-halfHeightText\"><div class=\"elc-matchTitle\"><%= this.n %></div></div></div><%= (this.u !== undefined ? '</a>': '') %></li>",displayType_4:'<li class="elc-matchItem-rich <%= this._outerCss %>" <%= (this.u !== undefined ? \'data-url="\' + this.u  + \'"\': \'\') %> ><div class="elc-match elc-match-rich <%= this._css %>"><img class="elc-matchCoverImg" title="<%= this._alt %>" alt="<%= this._alt %>" src="<%= this._imgBlank %>"\\><div class="elc-match-richFullHeight elc-match-rich-inner"><img src="<%= this._imgThumb %>" class="elc-pngfix elc-rich-img" alt=""\\></div></div><%= (this.u !== undefined ? \'</a>\': \'\') %></li>',displayType_5:'<li class="elc-matchItem-rich elc-matchItem-richDoubleHeight <%= this._outerCss %>" <%= (this.u !== undefined ? \'data-url="\' + this.u  + \'"\': \'\') %> ><%= (this.u !== undefined ? \'<a class="elc-match-a-link" href="\' + this.u  + \'">\': \'\') %><div class="elc-match elc-match-rich <%= this._css %>"><img class="elc-matchCoverImg" title="<%= this._alt %>" alt="<%= this._alt %>" src="<%= this._imgBlank %>"\\><div class="elc-match-richDoubleHeight elc-match-rich-inner"><img src="<%= this._imgThumb %>" class="elc-pngfix elc-rich-mg" alt=""\\></div></div><%= (this.u !== undefined ? \'</a>\': \'\') %></li>',displayType_6:'<li class="elc-matchItem-rich elc-match-richHalfHeight <%= this._outerCss %>" <%= (this.u !== undefined ? \'data-url="\' + this.u  + \'"\': \'\') %> ><%= (this.u !== undefined ? \'<a class="elc-match-a-link" href="\' + this.u  + \'">\': \'\') %><div class="elc-match elc-match-rich <%= this._css %>"><img class="elc-matchCoverImg" title="<%= this._alt %>" alt="<%= this._alt %>" src="<%= this._imgBlank %>"\\><div class="elc-match-richHalfHeight elc-match-rich-inner"><img src="<%= this._imgThumb %>" class="elc-pngfix elc-rich-img" alt=""\\></div></div><%= (this.u !== undefined ? \'</a>\': \'\') %></li>',displayType_7:"<li class=\"elc-matchItem-rich elc-resultItem-footer elc-clearfix <%= this._outerCss %>\" <%= (this.u !== undefined ? 'data-url=\"' + this.u  + '\"': '') %> ><%= (this.u !== undefined ? '<a class=\"elc-match-a-link\" href=\"' + this.u  + '\">': '') %><div class=\"elc-match <%= this._css %>\"><div class=\"elc-match-singleHeightText\"><div class=\"elc-matchDesc\"><%= this.d %></div></div></div><%= (this.u !== undefined ? '</a>': '') %></li>",displayType_8:'<li class="elc-matchItem-rich <%= this._outerCss %>" <%= (this.u !== undefined ? \'data-url="\' + this.u  + \'"\': \'\') %> ><%= (this.u !== undefined ? \'<a class="elc-match-a-link" href="\' + this.u  + \'">\': \'\') %><div class="elc-match elc-match-rich <%= this._css %>"><img class="elc-matchCoverImg" title="<%= this._alt %>" alt="<%= this._alt %>" src="<%= this._imgBlank %>"\\><div class="elc-match-richFullHeight elc-match-rich-inner"><img src="<%= this._imgThumb %>" class="elc-pngfix elc-rich-img" alt=""\\></div></div><%= (this.u !== undefined ? \'</a>\': \'\') %></li>',displayType_moreResults:'<li class="elc-moreResultsOuter <%= this._outerCss %>"><div class="elc-moreResults "><span class="elc-moreResults-inner"><%= this.s %></span></div></li>',displayType_noResults:'<li class="elc-noResultsOuter <%= this._outerCss %>"><div class="elc-noResults <%= this._css %>"><span class="elc-noResults-inner"><%= this.s %></span></div></li>',displayType_showingResults:'<li class="elc-showingResultsOuter <%= this._outerCss %>"><div class="elc-showingResults <%= this._css %>">{{displayType_showingResults_inner}}</div></li>',displayType_showingResults_inner:'<span class="elc-showingResults-inner"><%= this.s %></span>',displayType_loadingResults:'<li class="elc-loadingResultsOuter <%= this._outerCss %>"><div class="elc-loadingResults <%= this._css %>"><span class="elc-loadingResults-inner"><%= this.s %></span></div></li>',displayType_persistentResultsHeader:'<li class="elc-width-full elc-persistItem <%= this._outerCss %>" ><div class="elc-persist-header <%= this._css %>"><span class="elc-persist-header-inner"><span class="elc-persist-header-text"><%= this.s %></span></span></div></li>'},init:function(g){var f=this;f.app=g;f.$=g.config.get("$");f.$log.init(f.app,"view.templates",false);f.templates=f.$.extend(true,{},f.defaults,f.app.config.get("templateOverrides"));f.overwriteFromConfig();f.transform()},transform:function(){var f=this;f.templates.displayType_0=f.templates.displayType_1;f.replaceVariableValues()},overwriteFromConfig:function(){var f=this,j,g,h,k;j=f.app.config.getKeysStartingWith("displayType_");for(g=0;g<j.length;g+=1){h=f.templateArr[g];k=f.app.config.get(h);f.templates[h]=k}},replaceVariableValues:function(){var f=this,i="_raw",h=i.length,g,j;for(g in f.templates){if(f.templates.hasOwnProperty(g)&&g.indexOf(i)!==g.length-h){j=a.util.replaceVariableValue(f.get(g),f.templates.variableReplaceArr,function(k){return f.get(k)});f.templates[g]=j}}},get:function(f){return this.templates[f]}};a.classes.ViewTemplates=a.classes.Class.extend(c)})($elc,window,document);(function(a,e,b,d){var c={app:null,$form:null,$clientInputBox:null,$inputbox:null,$clientSubmitBtn:null,$submitBtn:null,init:function(g){var f=this;f.app=g;f.$log.init(f.app,f.app.config.get("id")+" view.input",true)},setup:function(){var f=this;f.$form=f.$(f.app.config.get("searchFormSelector")).eq(0);f.$clientInputBox=f.$(f.app.config.get("clientSearchInputFieldSelector")).eq(0);f.$clientSubmitBtn=f.$(f.app.config.get("clientSearchInputButtonSelector")).eq(0)},startup:function(){var f=this;f.decorate()},decorate:function(){var h,f=this,g;f.$form.attr("autocomplete","off");if(f.$clientInputBox.length>0){h=f.$(f.app.config.get("elcSearchInputFieldSelector")).eq(0);if(f.app.config.get("clientSearchInputFieldSelector")==f.app.config.get("elcSearchInputFieldSelector")||(h.length>0&&f.$clientInputBox[0]==h[0])){f.$inputbox=f.$clientInputBox}else{f.muteClientInput();f.$inputbox=f.$('<input type="text" class="elc-searchInput" autocomplete="off" />');if(f.$inputbox.attr("id")===d){g=f.findNextSearchBoxID("elc-searchInput");f.$inputbox.attr("id",g)}f.$inputbox.insertAfter(f.$clientInputBox);setTimeout(function(){},500)}}else{f.$inputbox=f.$(f.app.config.get("elcSearchInputFieldSelector")).eq(0)}if(f.app.config.get("clientSearchInputButtonSelector")==f.app.config.get("elcSearchInputButtonSelector")){f.$submitBtn=f.$clientSubmitBtn}else{f.$clientSubmitBtn.addClass("elc-searchBtn");f.$submitBtn=f.$(f.app.config.get("elcSearchInputButtonSelector")).eq(0)}f.$inputbox.addClass("elc-searchInput").attr("autocomplete","off").attr("autocorrect","off").attr("autocapitalize","off").attr("spellcheck","false").attr("maxlength","50").attr("disableLegacyInputChecking","true").attr("title",f.app.config.get("defaultSearchInputText"));f.$inputbox.wrap('<span class="elc-search"></span>');f.$inputbox.after(f.$submitBtn);f.$(".elc-hint-container").addClass(f.app.enums.CSSType.CSS3Fix);a.util.fixCSS3()},muteClientInput:function(){var f=this;f.$clientInputBox.hide();f.$clientInputBox.val("");f.$clientInputBox.bind("change",function(g){try{g.preventDefault();g.stopPropagation();g.stopImmediatePropagation()}catch(h){}return false})},findNextSearchBoxID:function(j){var f=this,h=0,g;for(h;h<100;h+=1){g=j+"-"+h;if(f.$("#"+g).eq(0).length===0){break}}return g}};a.classes.ViewInput=a.classes.Class.extend(c)})($elc,window,document);(function(a,e,b,d){var c={app:null,$wrap:null,curResponse:null,prevResponse:null,templateArr:null,catArr:null,templates:null,isOpen:false,$matchArr:null,$list:null,$prevList:null,doResultsRenderChunkWithDelay:false,doHideResultsPreRender:true,curRenderCatIndex:0,curRenderMatchIndex:0,curRenderMatchTotal:0,curRenderResultsTarget:null,prevRenderResultsTarget:null,curRenderTotalMatchesForCategory:0,renderChunkTimeoutId:-1,$chunkList:null,renderChunkTime:0,renderStartTime:0,firstMatch:true,isFirstCategoryRendered:false,$showingResultsForItem:null,init:function(g){var f=this;f.app=g;f.$log.init(f.app,f.app.config.get("id")+" view.result",false);f.templates=f.app.templates;f.$matchArr=[];if(a.util.isMobile()||a.util.isIELess10()){f.doResultsRenderChunkWithDelay=true}},setup:function(){var f=this;f.setupWrapper()},setupWrapper:function(){var g=this,h,i,f;h={_css:"",_app:g.app};i=g.$.jqote(g.templates.get("resultsWrapperTag"),h);g.$wrap=g.$(i);g.$wrap.addClass("elc-hidden").addClass(g.app.enums.CSSType.CSS3Fix);f=g.app.state.get("searchWrapperElement");f.append(g.$("<div class='elc-clearBoth'></div>"));f.append(g.$wrap)},reset:function(){var f=this;f.resetMatches();if(f.$wrap){f.$wrap.empty()}f.$wrap.addClass("elc-hidden");f.isOpen=false;f.app.state.set("isResultsViewOpen",false);f.curResponse=null;a.util.fixCSS3()},refreshForce:function(){var f=this,g;if(!f.isOpen){return}g=f.prevResponse;f.prevResponse=null,f.refresh(g)},refresh:function(g){var f=this;if(g!==d&&g!==null){f.curResponse=g}if(f.curResponse===null){return}else{if(f.curResponse.i&&f.curResponse.i==="no results please"){f.curResponse.catArr=[]}}if(f.app.config.get("showNoResults")!==d){if(f.curResponse.catArr.length===0&&!f.app.config.get("showNoResults")&&!f.curResponse.isLoadingResults){f.handleNoResultsWithSupression();return}}f.renderStartTime=f.$log.log("==render start");if(f.isOpen&&f.prevResponse&&f.curResponse&&f.prevResponse.areResultsEqual(f.curResponse)){f.triggerRenderCompleteEvent(true);return}f.prevResponse=f.curResponse;f.$wrap.removeClass("elc-hidden");if(f.$wrap.html()===""&&f.doHideResultsPreRender){f.$wrap.addClass("elc-prerender")}f.renderResultsPrepare();f.renderResultsStart();f.isOpen=true;f.app.state.set("isResultsViewOpen",true)},handleNoResultsWithSupression:function(){var f=this;f.reset()},renderResultsPrepare:function(){var f=this;f.$log.log("renderResults for input:"+f.curResponse.i+", clearing renderChunkTimeoutId:"+f.renderChunkTimeoutId);clearTimeout(f.renderChunkTimeoutId);f.renderChunkTimeoutId=-1;if(f.$chunkList!==null){f.$chunkList=null;f.resetMatches();f.$list=f.$prevList}f.$prevList=f.$list;f.$list=f.$(f.templates.get("resultsTag"));if(f.doHideResultsPreRender){f.$list.addClass("elc-prerender")}else{if(f.$prevList){f.$prevList.remove()}f.$wrap.empty()}f.$wrap.removeClass("elc-bg-transparent");f.$wrap.empty();f.setWrapResultsLayoutType();f.$wrap.append(f.$list)},resetMatches:function(){var g=this,h=0,f;for(h;h<g.$matchArr.length;h+=1){f=g.$matchArr[h];f.data("isActive",false);f.remove()}g.$matchArr=[]},setWrapResultsLayoutType:function(){var f=this;if(f.$wrap.data("resultsLayoutType")===d){f.$wrap.data("resultsLayoutType",f.app.config.get("resultsLayoutType"));f.$wrap.addClass(f.app.config.get("resultsLayoutType"))}if(f.$wrap.data("resultsLayoutType")!==f.app.config.get("resultsLayoutType")){f.$wrap.removeClass(f.$wrap.data("resultsLayoutType"));f.$wrap.addClass(f.app.config.get("resultsLayoutType"));f.$wrap.data("resultsLayoutType",f.app.config.get("resultsLayoutType"))}},renderResultsStart:function(){var h=this,i,f,g;i=h.curResponse?h.curResponse.catArr:[];h.$showingResultsForItem=null;if(!a.util.stringIsNullOrEmpty(h.curResponse.srf)){h.$showingResultsForItem=h.addShowingResultsFor(h.$list,h.curResponse.srf)}if(i.length>0){h.renderResultsChunkStart()}else{if(h.curResponse.isLoadingResults){f=h.addLoadingResults(h.$list)}else{g=h.addNoResults(h.$list)}h.renderComplete()}},renderComplete:function(){var f=this;if(f.$prevList){f.$prevList.remove()}f.$chunkList=null;f.$list.removeClass("elc-prerender");f.$wrap.removeClass("elc-prerender");if(f.$wrap.html()===""){f.$wrap.addClass("elc-hidden")}else{f.$wrap.removeClass("elc-hidden")}if(a.util.isIE6()){f.$wrap.bgiframe()}f.applyFixes();f.triggerRenderCompleteEvent()},triggerRenderCompleteEvent:function(h){if(h===d){h=false}var f=this,g=new f.$.Event(f.app.enums.EventType.ViewRenderComplete);g.isSameAsLastReponse=h;f.$(f).trigger(g);f.$log.log("==render done",f.renderStartTime)},renderResultsChunkStart:function(){var f=this;f.curRenderCatIndex=0;f.isFirstCategoryRendered=false;f.renderResultsResetItemCounters();f.$chunkList=f.$list;f.renderResultsChunkNext(true)},renderResultsResetItemCounters:function(){var f=this;f.curRenderMatchIndex=0;f.curRenderMatchTotal=0;f.curRenderResultsTarget=null},renderResultsChunkComplete:function(){var f=this;f.$log.log("renderResultsChunkComplete");f.addMoreResults(this.$list);f.$chunkList=null;f.renderComplete()},renderResultsChunkNext:function(g){var f=this,h;if(this.curResponse===null){return}h=f.curResponse.i;if(g===d){g=false}if(a.util.isMobile()||(this.doResultsRenderChunkWithDelay&&!g)){f.renderChunkTimeoutId=setTimeout(f.$.proxy(function(){f.renderResultsChunk(h)},f),f.renderChunkTime)}else{f.renderResultsChunk(h)}},isCategoryNeeded:function(){var f=this,g=f.curRenderMatchIndex===0&&!f.app.config.get("omitAllCategoriesFromResultView");return g},renderResultsIncrementCategory:function(){var f=this,g=f.curRenderCatIndex+1;f.renderResultsResetItemCounters();f.curRenderCatIndex=g},renderResultsChunk:function(k){var g=this,h,f,i,j,l;if(g.curResponse!==null&&g.curRenderCatIndex>=g.curResponse.catArr.length){g.renderResultsChunkComplete();return}if(g.curResponse===null){return}h=g.curResponse.catArr[g.curRenderCatIndex];g.curRenderTotalMatchesForCategory=h.matchesArr.length;if(g.curRenderMatchIndex>=h.matchesArr.length){g.renderResultsIncrementCategory();g.renderResultsResetItemCounters();g.renderResultsChunk(k);return}else{g.curRenderResultsTarget=g.getRenderResultsTarget();if(g.isCategoryNeeded()){f=g.addCategory(g.curRenderResultsTarget,h);h.$cat=f}i=h.matchesArr[g.curRenderMatchIndex];if(i!==d&&i!==null){j=g.getMatchTarget(i.dt);l=g.addMatch(j,h,i)}g.curRenderMatchIndex+=1;g.curRenderMatchTotal+=1}g.renderResultsChunkNext(!l);g.applyFixes()},getRenderResultsTarget:function(){return this.$list},getMatchTarget:function(f){return this.$list},applyFixes:function(){a.util.fixCSS3();a.util.fixPng()},addCategory:function(n,h){var g=this,l,i,k,f,m;l="";i={c:h.c,_css:"",_outerCss:"",_app:g.app};k=!a.util.stringIsNullOrEmpty(h.u);i._outerCss=g.getCategoryOuterDecoration(n,h);if(k){i._css+=" elc-pointer "}l=g.$.jqote(g.templates.get("displayType_cat"),i);m=true;try{if(i.c!==d&&(g.$.inArray(i.c.toLowerCase(),g.app.config.get("hideCategoryForLabels"))>-1)){m=false}}catch(j){}if(h.d!==d&&h.d===0){m=false}if(m){f=g.$(l);f.data("cat",h);f.data("type",g.app.enums.ResultType.Category);f=g.applyCategoryPreRender(f);n.append(f);if(k){f.eq(0).find(".elc-category-inner").addClass(g.app.enums.CSSType.isClickable)}}return f},getCategoryOuterDecoration:function(i,g){var f=this,h=" elc-categoryItem elc-clearfix ";if(f.curRenderCatIndex===0&&f.curRenderMatchIndex===0){h+=" elc-category-first "}if(f.curRenderMatchIndex===0){h+=" elc-category-match-first "}if(i.is(f.$list)){h+=" elc-resultItem-container "}return h},applyCategoryPreRender:function(f){var g=this;if(!g.isFirstCategoryRendered){if(g.app.config.get("isShowingResultsForPrependToFirstCategory")){f.find(".elc-category").prepend(g.$showingResultsForItem);f.find(".elc-category-inner").addClass("elc-notfullwidth")}g.isFirstCategoryRendered=true}return f},getDisplayTypeSafe:function(g){var f=this,j,i,k;if(!g||g===""){g=f.app.enums.DisplayType.Standard}try{j=f.app.config.get("safeDisplayTypesForLayout");k=j[f.app.config.get("resultsLayoutType")];i=f.$.inArray(parseInt(g,10),k);if(i===-1){g=-1}}catch(h){}return g},addMatch:function(m,h,i){var g=this,j=i.dt,l,n=false,f,k;j=g.getDisplayTypeSafe(j);if(j==-1){return false}i._app=g.app;i._css="";i._outerCss=g.getMatchOuterDecoration(m,i);i._imgBlank=g.app.config.get("protocol")+g.app.config.get("imgBlankPath");i._alt="";if(g.app.config.get("matchUsesAltTag")){if(a.util.uaHas("gecko")){i._alt=i.n+" &#8212; "+i._d}else{i._alt=i.n+" &#13;"+i._d}}if(i._d!==d&&i._d!==null){if(i._d.length>g.app.config.get("matchDescTruncate")){i.d=i._d.substr(0,g.app.config.get("matchDescTruncate"));i.d=i.d.substr(0,i.d.lastIndexOf(" "))+g.app.config.get("strEllipsesHTML");n=true}}l=g.$.jqote(g.templates.get("displayType_"+i.dt),i);f=g.$(l);f.data("cat",h);f.data("match",i);f.data("$match",f);f.data("type",g.app.enums.ResultType.Match);f.data("renderMatchIndex",g.curRenderMatchIndex);f.data("renderMatchTotalIndex",g.curRenderMatchTotal);f=g.applyMatchPreRender(f,j,m);m.append(f);g.$matchArr.push(f);f.data("target",m);f.data("isActive",true);k=!a.util.stringIsNullOrEmpty(i.u);if(k){g.$(f[0]).addClass(g.app.enums.CSSType.isClickable)}g.firstMatch=false;g.applyMatchPostRender(f,h,i);return n},getMatchOuterDecoration:function(i,g){var f=this,h=" ";h+="elc-matchItem ";if(f.curRenderMatchTotal===0){h+="elc-match-first "}if(f.curRenderCatIndex==f.curResponse.catArr.length-1){if(f.curRenderMatchIndex==f.curResponse.catArr[f.curRenderCatIndex].matchesArr.length-1){h+="elc-match-last "}}if(f.curRenderMatchIndex===0){h+="elc-match-cat-first "}if(f.curRenderMatchIndex==f.curResponse.catArr[f.curRenderCatIndex].matchesArr.length-1){h+="elc-match-cat-last "}if(i.is(f.$list)){h+=" elc-resultItem-container "}if(g!==d&&g.cmf!==d&&g.cmf.dt!==d){h+="elc-displayType-"+g.cmf.dt}return h},applyMatchPreRender:function(f,h,i){var g=this;f=g.addMatchDescriptionAdditional(f);return f},applyMatchPostRender:function(f,h,i){var g=this;g.handleMatchImages(f,i);g.adjustMatchTitleSub(f,h,i);g.addMatchTopBar(f,h,i);g.setCellDimensions(f);setTimeout(function(){g.setCellDimensions(f)},1);setTimeout(function(){g.setCellDimensions(f)},250)},adjustMatchTitleSub:function(g,j,k){var h=this,f,l,m=g.find(".elc-matchTitleSubCell"),n;if(m.length>0){f=m.find(".elc-matchTitleSubItem");n=f.outerWidth(true);for(l=0;l<10;l+=1){f=f.parent();n+=f.outerWidth(true)-f.width();if(f.is(m)){break}}m.width(n);if(h.$(m).find("br").length>1){h.$(m).addClass("elc-fullcol");h.$(m).attr("rowspan",2);h.$(m).closest(".elc-matchTable").find(".elc-matchDescCell").attr("colspan","1")}}},setAllCellDimensions:function(){var g=this,f,h;for(h=0;h<g.$matchArr.length;h+=1){f=g.$matchArr[h];g.setCellDimensions(f)}},setCellDimensions:function(h){if(h===d||h.data("target")===d||!h.data("isActive")){return}var i=h.find(".elc-matchTable"),j=i.find(".elc-matchTitleCell"),f=i.find(".elc-matchDescCell"),g=i.find(".elc-matchImgCell"),l=0,k=0;if(i.length>0){j.css("height","");i.css("height","");f.css("height","");j.height(j.children().outerHeight());f.height(i.height()-j.children().outerHeight());if(g.length>0){g.css("width","");k=g.width();l=g.find(".elc-matchImg").width();if(l>0&&l>k){g.width(l)}}i.css("height","");i.height(i.children().outerHeight());this.assignRenderItemDims(h)}},addMatchDescriptionAdditional:function(f){var g=f.data("match"),h;if(g.cmf!==d&&g.cmf!==null&&g.cmf.descAdd!==d&&g.cmf.descAdd!==null){h=a.util.stringReplaceAll(g.cmf.descAdd,'"',"'");h="<div class='elc-matchDesc-add'>"+h+"</div>";f.find(".elc-matchDesc").append(h)}return f},addMatchTopBar:function(f,k,l){var g=this,h=g.app.config.get("addMatchTopBarForLayouts"),m,j;if(h!==d){for(m=0;m<h.length;m+=1){j=g.app.config.get("resultsLayoutType")===h[m];if(j){break}}if(j&&g.addMatchTopBarCheck(f,k,l)){f.prepend("<div class='elc-match-top-border'></div>")}}},addMatchTopBarCheck:function(f,g,h){var i=false;if(!f.hasClass("elc-match-cat-first")){i=true}return i},truncateMatchText:function(f){var g=this,h,i=false;h=g.$(f.find(".elc-matchDesc").eq(0));if(h){i=this.ellipses.initEllipsisForDiv(g.$,h,2,"elc-temp-ellipsis",g.app.config.get("isLoggingEnabled"),a.log)}return i},matchRemoveAlt:function(f){var g=this,h=g.$(f.find(".elc-matchCoverImg").eq(0));if(h){h.attr({title:"",alt:""})}},handleMatchImages:function(f,h){var g=this;f.find(".elc-matchImg").each(function(l,m){var j,i,k;j=g.$(m);i=g.$(j.parent());k=a.util.isIE6()||a.util.isMobile()?0:50;if(h._imgThumbBlank){return}if(m.complete){i.removeClass("elc-matchImgDefaultThumb");j.addClass(g.app.enums.CSSType.PngFix);j.addClass(g.app.enums.CSSType.CSS3Fix);a.util.fixCSS3();j.css("opacity",1);setTimeout(function(){g.handleMatchImageLoaded(f)},0)}else{j.css("opacity",0);j.bind("load",function(){i.removeClass("elc-matchImgDefaultThumb");j.fadeTo(k,1);j.addClass(g.app.enums.CSSType.PngFix);j.addClass(g.app.enums.CSSType.CSS3Fix);a.util.fixCSS3();setTimeout(function(){g.handleMatchImageLoaded(f)},0)})}})},handleMatchImageLoaded:function(f){var g=this;g.setCellDimensions(f)},addShowingResultsFor:function(g,k){var h=this,i={_outerCss:"",_css:"",_app:h.app,s:h.app.config.get("strViewShowingResults")+' <span class="elc-underline-italic">'+k+"</span>"},f,l=h.getShowingResultsForTemplateType(),j=l==="displayType_showingResults";f=h.$(h.$.jqote(h.templates.get(l),i));f.data("type",h.app.enums.ResultType.ShowingResultsFor);f.data("label",k);f.addClass(h.app.enums.CSSType.isClickable);if(j){g.append(f)}return f},getShowingResultsForTemplateType:function(){var f=this,g;g=f.app.config.get("isShowingResultsForPrependToFirstCategory")?"displayType_showingResults_inner":"displayType_showingResults";return g},addMoreResults:function(g){var h=this,i,f;if(!h.app.config.get("hasMoreResults")||h.curResponse.ro!==d&&h.curResponse.ro==="1"){return g}i={_app:h.app,_outerCss:"",_css:h.app.enums.CSSType.CSS3Fix,s:"<a>"+h.app.config.get("strViewMoreResults")+"</a>"};f=h.$(h.$.jqote(h.templates.get("displayType_moreResults"),i));g.append(f);f.data("type",h.app.enums.ResultType.MoreResults);f.addClass(h.app.enums.CSSType.isClickable);return f},addNoResults:function(g){var h=this,k,j,f,i;k={_app:h.app,s:h.app.config.get("strViewResultsNoMatches"),_css:"",_outerCss:""};if(!h.app.config.get("noResultsClickable")){k._css+=" elc-noResultsOuter-noPointer "}else{k.s="<a>"+k.s+"</a>"}k._css+=" "+h.app.enums.CSSType.CSS3Fix+" ";j=h.$.jqote(h.templates.get("displayType_noResults"),k);f=h.$(j);f.data("type",h.app.enums.ResultType.NoResults);g.append(f);i=h.app.config.get("noResultsClickable");if(i){f.addClass(h.app.enums.CSSType.isClickable)}return f},addLoadingResults:function(g){var h=this,j,i,f;h.$wrap.addClass("elc-bg-transparent");j={_app:h.app,s:h.app.config.get("strViewLoadingResults"),_css:"",_outerCss:""};j._css+=" "+h.app.enums.CSSType.CSS3Fix+" ";i=h.$.jqote(h.templates.get("displayType_loadingResults"),j);f=h.$(i);f.data("type",h.app.enums.ResultType.LoadingResults);g.append(f);return f},getRenderItemTopLeftArr:function(l){var g=this,n,o,m=0,k=0,q,p,f,h=[];for(m=0;m<l.length;m+=1){f=g.$(l[m]);g.assignRenderItemDims(f);n="left-"+f.data("left");p="top-"+f.data("top");o=n+"-height";if(h.length===0){h.push({id:p,arr:[f],top:f.data("top")})}else{q=d;for(k=0;k<h.length;k+=1){if(h[k].id==p){q=h[k];q.arr.push(f);break}}if(q===d){h.push({id:p,arr:[f],top:f.data("top")})}}}h.sort(function(i,j){return i.top-j.top});for(k=0;k<h;k+1){h[k].arr.sort(function(i,j){return i.data("left")-j.data("left")})}return h},assignRenderItemDims:function(f){f.data("top",f.offset().top);f.data("left",f.offset().left);f.data("height",f.outerHeight());f.data("width",f.outerWidth())},getIsOpen:function(){return this.isOpen}};a.classes.ViewResult=a.classes.Class.extend(c)})($elc,window,document);(function(a,e,b,d){var c={remainingMatchesGoInCurRenderContainer:false,curRenderTargetIndex:0,nextRenderTargetIndex:0,renderContainerHasCategory:false,renderResultsChunkStart:function(){var f=this;if(f._isWideLayout()){f.curRenderTargetIndex=0;f.nextRenderTargetIndex=0}f._super()},isCategoryNeeded:function(){var f=this,g=f._super();if(f._isWideLayout()){g=false;if(!f.curRenderTargetHasCategory){if(!f.remainingMatchesGoInCurRenderContainer){g=true}else{if(f.curRenderMatchIndex===0){g=true}else{if(f.curRenderTargetIndex>0){g=true}}}}if(g){f.curRenderTargetHasCategory=g}}return g},renderResultsResetItemCounters:function(){var f=this;f._super();if(f._isWideLayout()){f.remainingMatchesGoInCurRenderContainer=false}},renderResultsIncrementCategory:function(){var f=this;f._super();if(f._isWideLayout()){f.curRenderResultsTarget=null;f.curRenderTargetIndex=0;f.nextRenderTargetIndex=0;f.curRenderTargetHasCategory=false}},isCategoryFullWidth:function(){var f=this,k=false,g,j,h=f.app.config.get("categoryWithFullWidth");if(h!==d&&h.length>0){if(f.curResponse!==null){if(f.curRenderCatIndex<f.curResponse.catArr.length){g=f.curResponse.catArr[f.curRenderCatIndex];for(j=0;j<h.length;j+=1){if(h[j].toLowerCase()===g.c.toLowerCase()){k=true;break}}if(f.app.config.get("numWideLayoutColumns")-g.matchesArr.length>0){k=true}}}}return k},getRenderResultsTarget:function(){var f=this,g=f._super(),h,i=false;if(f._isWideLayout()){if(f.remainingMatchesGoInCurRenderContainer&&f.curRenderResultsTarget!==null){return f.curRenderResultsTarget}i=true;if(i){f.curRenderTargetIndex=f.nextRenderTargetIndex;f.nextRenderTargetIndex=f.curRenderTargetIndex+1;f.curRenderTargetHasCategory=false;if(f.curRenderTargetIndex%f.app.config.get("numWideLayoutColumns")===0&&f.curRenderTotalMatchesForCategory-f.curRenderMatchIndex>=f.app.config.get("numWideLayoutColumns")){f.remainingMatchesGoInCurRenderContainer=true}h="<li class='elc-resultItem-container ";if(f.remainingMatchesGoInCurRenderContainer||f.curRenderTargetIndex%f.app.config.get("numWideLayoutColumns")===0){h+=" elc-clearfix "}if(f.isCategoryFullWidth()){h+=" elc-width-full "}h+="'></li>";g=f.$(h);f.$list.append(g)}}return g},applyCategoryPreRender:function(f){var g=this;f=g._super(f);if(g._isWideLayout()&&f.is("li")){f=f.changeElementType("div")}return f},applyMatchPreRender:function(f,i,j){var g=this,h;f=g._super(f,i,j);h=f.data();if(g._isWideLayout()&&f.is("li")){f=f.changeElementType("div");h.$match=f;f.data(h)}return f},getMatchTarget:function(g){var f=this,h=f._super(g);if(f._isWideLayout()){h=f.curRenderResultsTarget}return h},getMatchOuterDecoration:function(i,g){var f=this,h=f._super(i,g);if(f._isWideLayout()){if(f.curRenderMatchTotal%f.app.config.get("numWideLayoutColumns")===0){h+=" elc-clearfix "}}return h},renderComplete:function(){var f=this,g;f._super();if(f._isWideLayout()){g=f.getRenderItemTopLeftArr(f.$.makeArray(f.$matchArr));f.syncMatchRowHeights(g);f.assignLastRowFullWidth(g)}},syncMatchRowHeights:function(o){var f=this,h=0,m,n=0,l,k,g=true;for(h=0;h<o.length;h+=1){m=o[h];if(g){for(n=0;n<m.arr.length;n+=1){m.arr[n].css("height","").find(".elc-match").css("height","");f.assignRenderItemDims(m.arr[n])}}m.heightMax=0;for(n=0;n<m.arr.length;n+=1){if(m.arr[n].data("height")>m.heightMax){m.heightMax=m.arr[n].data("height")}}for(n=0;n<m.arr.length;n+=1){m.arr[n].height(m.heightMax);k=m.arr[n].find(".elc-match");l=m.heightMax-(k.outerHeight(true)-k.innerHeight());k.height(l)}for(n=0;n<m.arr.length;n+=1){f.assignRenderItemDims(m.arr[n])}}},assignLastRowFullWidth:function(g){var f=g.length-1;if(g.length>0){if(g[f].arr.length==1){g[f].arr[0].data("target").addClass("elc-width-full")}}},addMatchTopBarCheck:function(f,h,i){var g=this,j,k=false;if(!g._isWideLayout()){k=g._super(f,h,i)}else{j=f.parent().find(".elc-matchItem").index(f);if(j>=g.app.config.get("numWideLayoutColumns")){k=true}}return k},_isWideLayout:function(){var f=this;return f.app.config.get("resultsLayoutType")===f.app.enums.ResultsLayoutType.Wide}};a.classes.ViewResultWide=a.classes.ViewResult.extend(c)})($elc,window,document);(function(a,e,b,d){var c={$listSide:null,$prevListSide:null,renderResultsPrepare:function(){var f=this;f._super();f.$prevListSide=f.$listSide;if(f.app.config.get("hasResultsSide")){f.$listSide=f.$(f.templates.get("resultsSideTag"))}if(!f.doHideResultsPreRender){if(f.$prevListSide){f.$prevListSide.remove()}}if(f.$listSide){f.$wrap.prepend(f.$listSide)}},renderComplete:function(){var f=this;if(f.$prevListSide){f.$prevListSide.remove()}f.$wrap.removeClass("elc-hasSide");if(f.$listSide){if(f.$listSide.html().length>0){f.$wrap.addClass("elc-hasSide")}else{f.$listSide.remove()}}f._super()},getMatchTarget:function(g){var f=this,h;if(f.$.inArray(g,f.templates.get("resultSide_displayTypes"))>-1){h=this.$listSide}else{if(f.$.inArray(g,f.templates.get("resultBottom_displayTypes"))>-1){h=f.$wrap}else{h=f._super(g)}}return h},applyMatchPreRender:function(f,h,i){var g=this;if(g.$.inArray(h,g.templates.get("resultSide_displayTypes"))>-1){f=f}else{if(g.$.inArray(h,g.templates.get("resultBottom_displayTypes"))>-1){f=f}else{if(g.app.config.get("resultsLayoutType")===g.app.enums.ResultsLayoutType.Wide&&f.is("li")){f=f.changeElementType("div")}}}return f}};a.classes.ViewResultSide=a.classes.ViewResult.extend(c)})($elc,window,document);(function(a,d,b,c){a.classes.EventQuery=(function(f,j,k,g,m,n,o,l){if(m===c){m=false}if(l===c){l=false}var h=f.Event(j);h.i=k;h.d=g;h.onResponseSelectFirstResult=m;h.queryNum=n;h.refinementNum=o;h.fullEventType=j;h.isQuerySameAsHint=l;return h})})($elc,window,document);(function(a,d,b,c){a.classes.EventVisit=function(f,i,t,g,q,l,k,m,n,o,r,s,j,p){var h=f.Event(i);h.url=t;h.category=g;h.title=q,h.keyword=l;h.input=k;h.resultsFound=m;h.shiftToMoreResults=n;h.shiftToSiteSearch=o;h.fullEventType=i;h.titleSub=r;h.totalResults=s;h.indexOfResult=j;h.supressVisit=p;h.compare=function(u){var e=this,v=false;v=e.url==u.url&&e.category==u.category&&e.title==u.title&&e.keyword==u.keyword&&e.input==u.input&&e.resultsFound==u.resultsFound&&e.shiftToMoreResults==u.shiftToMoreResults&&e.shiftToSiteSearch==u.shiftToSiteSearch&&e.titleSub==u.titleSub&&e.totalResults==u.totalResults&&e.indexOfResult==u.indexOfResult&&e.supressVisit==u.supressVisit;return v};return h}})($elc,window,document);(function(a,d,b,c){a.classes.EventInput=function(f,j,k,h,g){var i=f.Event(j);i.val=k;i.fullEventType=j;i.bolBypassTracking=h;i.bolBypassChangeEvent=g;return i}})($elc,window,document);(function(a,d,b,c){a.classes.ControllerAppPersist=a.classes.ControllerApp.extend({init:function(f){var e=this;e._super(f);e.$log.init(e,e.config.get("id")+" ctrl.app",true);e.persistAdjustConfig()},persistAdjustConfig:function(){var e=this;e.config.set("hasClientInput",false);e.config.set("hasMoreResults",false);e.config.set("hasDynamicResultsLayout",false);e.config.set("omitAllCategoriesFromResultView",true);e.config.set("strViewShowingResults",e.config.get("strViewShowingResultsPersist"))},startupCheck:function(){var e=this,f=false;e.startupCheckClientInputReady_cnt+=1;e.$log.log("startupCheck "+e.startupCheckClientInputReady_cnt+" persistentTargetSelector:"+e.config.get("persistentTargetSelector"));if(e.$(e.config.get("persistentTargetSelector")).length>0){f=true}else{e.startupCheckClientInputReady_id=setTimeout(function(){e.startupCheck()},250)}e.$log.log("startupCheck returning: "+f);return f},assignUI:function(){var e=this;e.$log.log("assign UI");e.ui=new a.classes.ControllerUIPersist(e);e.ui.setup();e.ui.startup()}})})($elc,window,document);(function(a,d,b,c){a.classes.ControllerUIPersist=a.classes.ControllerUI.extend({init:function(f){var e=this;e._super(f);e.$log.init(e.app,e.app.config.get("id")+" ctrl.ui.p",true)},assignInputController:function(){var e=this;e.input=new a.classes.ControllerInputPersist(e.app);e.input.setup()},appReady:function(){var e=this;e._super();e.input.persistTriggerQuery()},renderSearchWrapper:function(f){var g=this,e=g.$("."+g.app.config.get("persistentWrapClass"));e.css({width:e.width()+"px"});e.append(f);return f}})})($elc,window,document);(function(a,d,b,c){a.classes.ControllerInputPersist=a.classes.Class.extend({app:null,init:function(f){var e=this;e.app=f;e.$log.init(e.app,e.app.config.get("id")+" ctrl.input.p",true)},setup:function(){},persistTriggerQuery:function(){var e=this,f,g;if(e.app.config.get("persistGetSearchValue")!==null){f=e.app.config.get("persistGetSearchValue")()}else{f=a.util.getQS().query;if(f===c){f=a.util.getQS().q}}if(f!==c){f=a.util.getXssSafeValue(e.$,f);if(f!==false&&f!==c&&f!==""){g=new a.classes.EventQuery(e.$,e.app.enums.EventType.QuerySend,f);e.$(e).trigger(g)}}},triggerBlurAndClose:function(){var e=0;e+=1},handleEscape:function(){var e=0;e+=1},handleQueryResponse:function(f){return true}})})($elc,window,document);(function(a,d,b,c){a.classes.ViewResultPersist=a.classes.ViewResult.extend({__isPersistRenderComplete:false,__$persistWrap:null,init:function(f){var e=this;e._super(f);e.$log.init(e.app,e.app.config.get("id")+" view.result.p",false);e.$log.log("init persist")},setupWrapper:function(){var e=this;e._super();e.__$persistWrap=e.$wrap.closest("."+e.app.config.get("persistentWrapClass"))},renderResultsStart:function(){var e=this;e.__$persistWrap.find(e.app.config.get("persistentLoadingSymbolSelector")).remove();e.persistAddHeader(e.$list);e.$log.log("render results render add header done");e._super();e.$log.log("render results start done")},renderComplete:function(){var e=this;e.$log.log("renderComplete start");e._super();if(!e._isWideLayout()){e.persistHandleSyncMatchHeights()}e.$log.log("renderComplete - remove offscreen");e.__$persistWrap.hide();e.__$persistWrap.css({width:"",height:"0px",overflow:"hidden"});setTimeout(function(){e.__$persistWrap.removeClass("elc-offscreen");e.__isPersistRenderComplete=true;e.__$persistWrap.show().animate({height:e.__$persistWrap.children().height()},{duration:"slow",step:function(g,f){if(f.end!==e.__$persistWrap.children().height()){f.end=e.__$persistWrap.children().height();e.$log.log("fix end:"+f.end+" _.__$persistWrap.children().height():"+e.__$persistWrap.children().height())}},complete:function(){e.__$persistWrap.css({width:"",height:"",overflow:"hidden"});setTimeout(function(){e.setAllCellDimensions();e.persistHandleSyncMatchHeights()},0)}})},0)},persistAppendShowingResults:function(){var e=this;if(e.$showingResultsForItem!==null){e.$("."+e.app.config.get("persistentWrapClass")).find(".elc-persist-header-inner").prepend(e.$showingResultsForItem)}},handleNoResultsWithSupression:function(){var e=this;e._super();e.__$persistWrap.slideUp({duration:"fast"})},getShowingResultsForTemplateType:function(){return"displayType_showingResults_inner"},persistHandleSyncMatchHeights:function(){var e=this,f;if(!e._isWideLayout()){f=e.getRenderItemTopLeftArr(e.$.makeArray(e.$matchArr));e.syncMatchRowHeights(f)}},handleMatchImageLoaded:function(e){var f=this;if(f.__isPersistRenderComplete){f.persistHandleSyncMatchHeights()}},persistAddHeader:function(f){var g=this,j,i,h,e;i=g.$.jqote(g.app.config.get("strPersistHeaderLabel"),{input:g.curResponse.i});if(g.curResponse.srf!==c&&g.curResponse.srf!==null&&g.curResponse.srf!==""){i=g.$.jqote(g.app.config.get("strPersistHeaderLabelSRF"),{input:g.curResponse.i,srf:g.curResponse.srf})}g.$log.log("persistAddHeader "+i);j={_app:g.app,s:i,_css:"",_outerCss:""};j._css+=" "+g.app.enums.CSSType.CSS3Fix+" ";h=g.$.jqote(g.templates.get("displayType_persistentResultsHeader"),j);e=g.$(h);e.data("type",g.app.enums.ResultType.PersistentResultsHeader);f.append(e);return e},applyMatchPostRender:function(e,g,h){var f=this,i;f._super(e,g,h);i=e.parent().find(".elc-matchItem").index(e);e.find(".elc-matchImgCell").attr("rowSpan","");if(i%(f.app.config.get("persistentNumLayoutColumns")-1)===0&&i>0){e.addClass("elc-persist-nobuffer-right")}},_isWideLayout:function(){return false},setCellDimensions:function(g){if(g===c||g.data("target")===c||!g.data("isActive")){return}var h=g.find(".elc-matchTable"),i=h.find(".elc-matchTitleCell"),e=h.find(".elc-matchDescCell"),f=h.find(".elc-matchImgCell"),m=0,k=0,l=0,j=0;if(h.length>0){i.css("height","");h.css("height","");e.css("height","");i.height(i.children().outerHeight());e.height(e.children().outerHeight());if(f.length>0){f.css("width","");k=f.width();m=f.find(".elc-matchImg").width();if(m>0&&m>k){f.width(m)}f.css("height","");j=f.height();l=f.find(".elc-matchImg").height();f.height(l)}h.css("height","");h.height(h.children().outerHeight());this.assignRenderItemDims(g)}},syncMatchRowHeights:function(n){var e=this,g=0,l,m=0,k,h,f=true;for(g=0;g<n.length;g+=1){l=n[g];if(f){for(m=0;m<l.arr.length;m+=1){l.arr[m].css("height","").find(".elc-match").css("height","");e.assignRenderItemDims(l.arr[m])}}l.heightMax=0;for(m=0;m<l.arr.length;m+=1){if(l.arr[m].data("height")>l.heightMax){l.heightMax=l.arr[m].data("height")}}for(m=0;m<l.arr.length;m+=1){l.arr[m].height(l.heightMax);h=l.arr[m].find(".elc-match");k=l.heightMax-(h.outerHeight(true)-h.innerHeight());h.height(k)}for(m=0;m<l.arr.length;m+=1){e.assignRenderItemDims(l.arr[m])}}}})})($elc,window,document);